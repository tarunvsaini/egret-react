{"ast":null,"code":"import _toConsumableArray from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/tarunsaini/Projects/arctic-admin/react/src/app/views/scrum-board/CardEditorDialog.jsx\";\nimport React, { Component } from \"react\";\nimport { Dialog, TextField, Icon, Avatar, Button, Divider, IconButton, Grid, Card, MenuItem, Input, FormControlLabel, Checkbox, Tooltip } from \"@material-ui/core\";\nimport { getTimeDifference, generateRandomId } from \"utils.js\";\nimport Scrollbar from \"react-perfect-scrollbar\";\nimport { EgretMenu } from \"egret\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { updateCardInList } from \"../../redux/actions/ScrumBoardActions\";\n\nvar CardEditorDialog = /*#__PURE__*/function (_Component) {\n  _inherits(CardEditorDialog, _Component);\n\n  var _super = _createSuper(CardEditorDialog);\n\n  function CardEditorDialog() {\n    var _this;\n\n    _classCallCheck(this, CardEditorDialog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      id: \"\",\n      title: \"\",\n      description: \"\",\n      commentText: \"\",\n      fullScreen: false,\n      updateFromProps: true\n    };\n\n    _this.closeDialog = function () {\n      if (_this.windowResizeListener) window.removeEventListener(\"resize\", _this.windowResizeListener);\n\n      _this.props.handleClose();\n    };\n\n    _this.makeCoverPhoto = function (coverImage) {\n      _this.setState({\n        coverImage: coverImage\n      });\n    };\n\n    _this.removeAttachments = function (index) {\n      var _this$state$attachmen = _this.state.attachments,\n          attachments = _this$state$attachmen === void 0 ? [] : _this$state$attachmen;\n      attachments.splice(index, 1);\n\n      _this.setState({\n        attachments: attachments\n      });\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState({\n        updateFromProps: false\n      });\n\n      var target = event.target;\n      var id = target.value;\n\n      if (target.name === \"avatar\") {\n        var _this$state = _this.state,\n            cardMembers = _this$state.cardMembers,\n            boardMembers = _this$state.boardMembers;\n        var member = boardMembers.find(function (user) {\n          return user.id === id;\n        });\n\n        if (!target.checked) {\n          cardMembers.splice(cardMembers.indexOf(member), 1);\n\n          _this.setState({\n            cardMembers: cardMembers\n          });\n        } else {\n          cardMembers.push(member);\n\n          _this.setState({\n            cardMembers: cardMembers\n          });\n        }\n      } else if (target.name === \"label\") {\n        var _this$state2 = _this.state,\n            labels = _this$state2.labels,\n            labelList = _this$state2.labelList;\n        var label = labelList.find(function (item) {\n          return item.id === parseInt(id);\n        });\n\n        if (!target.checked) {\n          labels.splice(labels.indexOf(label), 1);\n\n          _this.setState({\n            labels: labels\n          });\n        } else {\n          labels.push(label);\n\n          _this.setState({\n            labels: labels\n          });\n        }\n      } else if (event.key === \"Enter\" && !event.shiftKey && target.name === \"commentText\") {\n        _this.setState(_defineProperty({}, event.target.name, event.target.value));\n\n        _this.sendComment();\n      } else {\n        _this.setState(_defineProperty({}, event.target.name, event.target.value));\n      }\n    };\n\n    _this.handleSave = function () {\n      var _this$state3 = _this.state,\n          id = _this$state3.id,\n          title = _this$state3.title,\n          coverImage = _this$state3.coverImage,\n          _this$state3$cardMemb = _this$state3.cardMembers,\n          cardMembers = _this$state3$cardMemb === void 0 ? [] : _this$state3$cardMemb,\n          _this$state3$labels = _this$state3.labels,\n          labels = _this$state3$labels === void 0 ? [] : _this$state3$labels,\n          description = _this$state3.description,\n          _this$state3$attachme = _this$state3.attachments,\n          attachments = _this$state3$attachme === void 0 ? [] : _this$state3$attachme,\n          _this$state3$comments = _this$state3.comments,\n          comments = _this$state3$comments === void 0 ? [] : _this$state3$comments,\n          listId = _this$state3.listId,\n          boardId = _this$state3.boardId;\n      var card = {\n        id: id,\n        title: title,\n        coverImage: coverImage,\n        members: cardMembers.map(function (member) {\n          return member.id;\n        }),\n        labels: labels.map(function (item) {\n          return item.id;\n        }),\n        description: description,\n        attachments: attachments,\n        comments: comments\n      };\n\n      _this.props.updateCardInList(boardId, listId, card);\n\n      _this.closeDialog();\n    };\n\n    _this.sendComment = function () {\n      var _this$state4 = _this.state,\n          comments = _this$state4.comments,\n          user = _this$state4.user,\n          commentText = _this$state4.commentText;\n      if (commentText.trim() !== \"\") comments.push({\n        id: generateRandomId(),\n        uid: user.userId,\n        text: commentText.trim(),\n        time: new Date()\n      });\n\n      _this.setState({\n        comments: comments,\n        commentText: \"\"\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(CardEditorDialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (window.innerWidth < 768) {\n        this.setState({\n          fullScreen: true\n        });\n      }\n\n      if (window) this.windowResizeListener = window.addEventListener(\"resize\", function (event) {\n        if (event.target.innerWidth < 768) {\n          _this2.setState({\n            fullScreen: true\n          });\n        } else _this2.setState({\n          fullScreen: false\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.windowResizeListener) window.removeEventListener(\"resize\", this.windowResizeListener);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          open = _this$props.open,\n          memberList = _this$props.memberList;\n      var _this$state5 = this.state,\n          fullScreen = _this$state5.fullScreen,\n          title = _this$state5.title,\n          _this$state5$cardMemb = _this$state5.cardMembers,\n          cardMembers = _this$state5$cardMemb === void 0 ? [] : _this$state5$cardMemb,\n          _this$state5$boardMem = _this$state5.boardMembers,\n          boardMembers = _this$state5$boardMem === void 0 ? [] : _this$state5$boardMem,\n          _this$state5$labels = _this$state5.labels,\n          labels = _this$state5$labels === void 0 ? [] : _this$state5$labels,\n          _this$state5$labelLis = _this$state5.labelList,\n          labelList = _this$state5$labelLis === void 0 ? [] : _this$state5$labelLis,\n          description = _this$state5.description,\n          _this$state5$attachme = _this$state5.attachments,\n          attachments = _this$state5$attachme === void 0 ? [] : _this$state5$attachme,\n          _this$state5$comments = _this$state5.comments,\n          comments = _this$state5$comments === void 0 ? [] : _this$state5$comments,\n          user = _this$state5.user,\n          commentText = _this$state5.commentText;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        onClose: this.closeDialog,\n        open: open,\n        fullScreen: fullScreen,\n        fullWidth: true,\n        scroll: \"body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"scrum-board\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"px-sm-24 pt-sm-24\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-middle flex-grow-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 17\n        }\n      }, \"assignment\"), /*#__PURE__*/React.createElement(Input, {\n        style: {\n          fontSize: \"1rem\",\n          fontWeight: 500\n        },\n        className: \"flex-grow-1 px-8 ml-8 capitalize\",\n        type: \"text\",\n        autoFocus: true,\n        name: \"title\",\n        onChange: this.handleChange,\n        disableUnderline: true,\n        value: title,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(IconButton, {\n        size: \"small\",\n        onClick: this.closeDialog,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }\n      }, \"clear\"))), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"m-0 ml-40 mb-16 text-small text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }\n      }, \"Tech Startup Board Hot Backlog\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-40 mb-16 flex flex-wrap flex-space-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0 mb-8 uppercase text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 17\n        }\n      }, \"cardMembers\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex position-relative face-group-36\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 17\n        }\n      }, cardMembers.map(function (member) {\n        return /*#__PURE__*/React.createElement(Avatar, {\n          key: member.id,\n          className: \"avatar\",\n          src: member.avatar,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 21\n          }\n        });\n      }), /*#__PURE__*/React.createElement(EgretMenu, {\n        horizontalPosition: \"center\",\n        shouldCloseOnItemClick: false,\n        menuButton: /*#__PURE__*/React.createElement(Tooltip, {\n          title: \"Add\",\n          fontSize: \"large\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Avatar, {\n          className: \"avatar ml--12 cursor-pointer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 25\n          }\n        }, \"+\")),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 19\n        }\n      }, boardMembers.map(function (user) {\n        return /*#__PURE__*/React.createElement(FormControlLabel, {\n          className: \"ml-0\",\n          key: user.id,\n          control: /*#__PURE__*/React.createElement(Checkbox, {\n            name: \"avatar\",\n            checked: cardMembers.some(function (member) {\n              return member.id === user.id;\n            }),\n            onChange: _this3.handleChange,\n            value: user.id,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 27\n            }\n          }),\n          label: /*#__PURE__*/React.createElement(\"div\", {\n            className: \"flex flex-middle\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 27\n            }\n          }, /*#__PURE__*/React.createElement(Avatar, {\n            src: user.avatar,\n            className: \"size-24\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 29\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"ml-12\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }\n          }, user.name)),\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 23\n          }\n        });\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0 mb-8 uppercase text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 17\n        }\n      }, \"labels\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"button-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 17\n        }\n      }, labels.map(function (label) {\n        return /*#__PURE__*/React.createElement(Button, {\n          key: label.id,\n          size: \"small\",\n          variant: \"contained\",\n          className: \"capitalize mr-4 text-white text-small bg-\".concat(label.color),\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 21\n          }\n        }, label.title);\n      }), /*#__PURE__*/React.createElement(EgretMenu, {\n        horizontalPosition: \"right\",\n        shouldCloseOnItemClick: false,\n        menuButton: /*#__PURE__*/React.createElement(Tooltip, {\n          title: \"Add\",\n          fontSize: \"large\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          className: \"bg-light-gray\",\n          size: \"small\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 25\n          }\n        }, \"+\")),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 19\n        }\n      }, labelList.map(function (label) {\n        return /*#__PURE__*/React.createElement(FormControlLabel, {\n          className: \"ml-0\",\n          key: label.id,\n          control: /*#__PURE__*/React.createElement(Checkbox, {\n            checked: labels.some(function (item) {\n              return item.id === label.id;\n            }),\n            onChange: _this3.handleChange,\n            value: label.id,\n            name: \"label\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 27\n            }\n          }),\n          label: /*#__PURE__*/React.createElement(\"div\", {\n            className: \"flex flex-middle\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 27\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"border-radius-4 size-24 bg-\".concat(label.color),\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 29\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"ml-12\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 29\n            }\n          }, label.title)),\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 23\n          }\n        });\n      })))))), /*#__PURE__*/React.createElement(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Scrollbar, {\n        className: \"position-relative pt-16 mb-16\",\n        style: {\n          maxHeight: \"45vh\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"px-sm-24 pt-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-middle mb-8\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 17\n        }\n      }, \"description\"), /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0 ml-16 uppercase text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 17\n        }\n      }, \"description\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-40 mb-16 flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        className: \"text-muted\",\n        onChange: this.handleChange,\n        name: \"description\",\n        value: description,\n        variant: \"outlined\",\n        fullWidth: true,\n        multiline: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-space-between flex-middle mb-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 19\n        }\n      }, \"attach_file\"), /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0 ml-16 uppercase text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 19\n        }\n      }, \"attachments\")), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"upload-file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"text-primary uppercase font-weight-500\",\n        component: \"span\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 19\n        }\n      }, \"+ add an attachment\")), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"display-none\",\n        id: \"upload-file\",\n        type: \"file\",\n        multiple: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-40 mb-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 17\n        }\n      }, attachments.map(function (file, id) {\n        return /*#__PURE__*/React.createElement(Grid, {\n          key: id,\n          item: true,\n          lg: 6,\n          md: 6,\n          sm: 12,\n          xs: 12,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          className: \"p-4 flex flex-middle bg-default h-100\",\n          elevation: 2,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"flex flex-middle border-radius-8\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: file.url,\n          alt: \"image cover photo\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 27\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"ml-16\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"h6\", {\n          className: \"m-0 text-muted capitalize\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 27\n          }\n        }, file.name), /*#__PURE__*/React.createElement(\"small\", {\n          className: \"text-muted text-small capitalize\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 27\n          }\n        }, file.size)), /*#__PURE__*/React.createElement(EgretMenu, {\n          horizontalPosition: \"center\",\n          menuButton: /*#__PURE__*/React.createElement(IconButton, {\n            className: \"ml-16\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 31\n            }\n          }, \"more_vert\")),\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(MenuItem, {\n          className: \"flex flex-middle\",\n          onClick: function onClick() {\n            return _this3.makeCoverPhoto(file.url);\n          },\n          style: {\n            minWidth: 165\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(Icon, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 29\n          }\n        }, \" insert_photo \"), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"pl-16\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 29\n          }\n        }, \" Make Cover \")), /*#__PURE__*/React.createElement(MenuItem, {\n          onClick: function onClick() {\n            return _this3.removeAttachments(id);\n          },\n          className: \"flex flex-middle\",\n          style: {\n            minWidth: 165\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(Icon, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 29\n          }\n        }, \" delete \"), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"pl-16\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 29\n          }\n        }, \" Remove \")))));\n      })))), /*#__PURE__*/React.createElement(Divider, {\n        className: \"mb-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"px-sm-24\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-middle mb-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 17\n        }\n      }, \"message\"), /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0 ml-16 uppercase text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 17\n        }\n      }, \"comments\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"comments ml-40\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 15\n        }\n      }, comments.map(function (comment) {\n        var user = memberList.find(function (user) {\n          return user.id === comment.uid;\n        });\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mb-16\",\n          key: comment.id,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"flex flex-middle mb-8\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Avatar, {\n          className: \"avatar size-36\",\n          src: user.avatar,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"ml-12\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"h6\", {\n          className: \"m-0\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 27\n          }\n        }, user.name), /*#__PURE__*/React.createElement(\"small\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 27\n          }\n        }, getTimeDifference(new Date(comment.time)), \" ago\"))), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"m-0 text-muted\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 23\n          }\n        }, comment.text));\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-middle mb-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Avatar, {\n        className: \"avatar size-36\",\n        src: user.photoURL,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex-grow-1 flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        className: \"ml-12 text-muted\",\n        onChange: this.handleChange,\n        onKeyDown: this.handleChange,\n        variant: \"outlined\",\n        name: \"commentText\",\n        value: commentText,\n        fullWidth: true,\n        inputProps: {\n          style: {\n            padding: \"10px\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        onClick: this.sendComment,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 19\n        }\n      }, \"Send\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"px-sm-24 mb-12 flex flex-end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"mr-12\",\n        onClick: this.closeDialog,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: this.handleSave,\n        variant: \"contained\",\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 13\n        }\n      }, \"Save\"))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (!prevState.updateFromProps && prevState.updateFromProps !== undefined) return {};\n      var card = nextProps.card,\n          _nextProps$memberList = nextProps.memberList,\n          memberList = _nextProps$memberList === void 0 ? [] : _nextProps$memberList,\n          _nextProps$labelList = nextProps.labelList,\n          labelList = _nextProps$labelList === void 0 ? [] : _nextProps$labelList,\n          board = nextProps.board,\n          user = nextProps.user;\n      var _card$members = card.members,\n          members = _card$members === void 0 ? [] : _card$members,\n          _card$labels = card.labels,\n          labels = _card$labels === void 0 ? [] : _card$labels;\n      var cardMembers = members.map(function (boardMemberId) {\n        return memberList.find(function (member) {\n          return member.id === boardMemberId;\n        });\n      });\n      var modifiedLabelList = labels.map(function (labelId) {\n        return labelList.find(function (label) {\n          return label.id === labelId;\n        });\n      });\n      var boardMembers = board.members.map(function (boardMember) {\n        return memberList.find(function (member) {\n          return member.id === boardMember.id;\n        });\n      });\n      return _objectSpread(_objectSpread({}, card), {}, {\n        boardId: board.id,\n        cardMembers: cardMembers,\n        boardMembers: boardMembers,\n        labels: _toConsumableArray(modifiedLabelList),\n        labelList: labelList,\n        user: user,\n        updateFromProps: false\n      });\n    }\n  }]);\n\n  return CardEditorDialog;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    updateCardInList: PropTypes.func.isRequired,\n    board: state.scrumboard.board,\n    memberList: state.scrumboard.memberList,\n    labelList: state.scrumboard.labelList,\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  updateCardInList: updateCardInList\n})(CardEditorDialog);","map":{"version":3,"sources":["/Users/tarunsaini/Projects/arctic-admin/react/src/app/views/scrum-board/CardEditorDialog.jsx"],"names":["React","Component","Dialog","TextField","Icon","Avatar","Button","Divider","IconButton","Grid","Card","MenuItem","Input","FormControlLabel","Checkbox","Tooltip","getTimeDifference","generateRandomId","Scrollbar","EgretMenu","PropTypes","connect","updateCardInList","CardEditorDialog","state","id","title","description","commentText","fullScreen","updateFromProps","closeDialog","windowResizeListener","window","removeEventListener","props","handleClose","makeCoverPhoto","coverImage","setState","removeAttachments","index","attachments","splice","handleChange","event","target","value","name","cardMembers","boardMembers","member","find","user","checked","indexOf","push","labels","labelList","label","item","parseInt","key","shiftKey","sendComment","handleSave","comments","listId","boardId","card","members","map","trim","uid","userId","text","time","Date","innerWidth","addEventListener","open","memberList","fontSize","fontWeight","avatar","some","color","maxHeight","file","url","size","minWidth","comment","photoURL","style","padding","nextProps","prevState","undefined","board","boardMemberId","modifiedLabelList","labelId","boardMember","mapStateToProps","func","isRequired","scrumboard"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Dialog,\n  TextField,\n  Icon,\n  Avatar,\n  Button,\n  Divider,\n  IconButton,\n  Grid,\n  Card,\n  MenuItem,\n  Input,\n  FormControlLabel,\n  Checkbox,\n  Tooltip\n} from \"@material-ui/core\";\nimport { getTimeDifference, generateRandomId } from \"utils.js\";\nimport Scrollbar from \"react-perfect-scrollbar\";\nimport { EgretMenu } from \"egret\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { updateCardInList } from \"../../redux/actions/ScrumBoardActions\";\n\nclass CardEditorDialog extends Component {\n  windowResizeListener;\n  state = {\n    id: \"\",\n    title: \"\",\n    description: \"\",\n    commentText: \"\",\n    fullScreen: false,\n    updateFromProps: true\n  };\n\n  closeDialog = () => {\n    if (this.windowResizeListener)\n      window.removeEventListener(\"resize\", this.windowResizeListener);\n    this.props.handleClose();\n  };\n\n  makeCoverPhoto = coverImage => {\n    this.setState({ coverImage });\n  };\n\n  removeAttachments = index => {\n    let { attachments = [] } = this.state;\n    attachments.splice(index, 1);\n    this.setState({ attachments });\n  };\n\n  handleChange = event => {\n    this.setState({ updateFromProps: false });\n\n    let target = event.target;\n    let id = target.value;\n\n    if (target.name === \"avatar\") {\n      let { cardMembers, boardMembers } = this.state;\n      let member = boardMembers.find(user => user.id === id);\n\n      if (!target.checked) {\n        cardMembers.splice(cardMembers.indexOf(member), 1);\n        this.setState({ cardMembers });\n      } else {\n        cardMembers.push(member);\n        this.setState({ cardMembers });\n      }\n    } else if (target.name === \"label\") {\n      let { labels, labelList } = this.state;\n      let label = labelList.find(item => item.id === parseInt(id));\n\n      if (!target.checked) {\n        labels.splice(labels.indexOf(label), 1);\n        this.setState({ labels });\n      } else {\n        labels.push(label);\n        this.setState({ labels });\n      }\n    } else if (\n      event.key === \"Enter\" &&\n      !event.shiftKey &&\n      target.name === \"commentText\"\n    ) {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n      this.sendComment();\n    } else {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    }\n  };\n\n  handleSave = () => {\n    let {\n      id,\n      title,\n      coverImage,\n      cardMembers = [],\n      labels = [],\n      description,\n      attachments = [],\n      comments = [],\n      listId,\n      boardId\n    } = this.state;\n\n    let card = {\n      id,\n      title,\n      coverImage,\n      members: cardMembers.map(member => member.id),\n      labels: labels.map(item => item.id),\n      description,\n      attachments,\n      comments\n    };\n    this.props.updateCardInList(boardId, listId, card);\n    this.closeDialog();\n  };\n\n  sendComment = () => {\n    let { comments, user, commentText } = this.state;\n\n    if (commentText.trim() !== \"\")\n      comments.push({\n        id: generateRandomId(),\n        uid: user.userId,\n        text: commentText.trim(),\n        time: new Date()\n      });\n    this.setState({ comments, commentText: \"\" });\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!prevState.updateFromProps && prevState.updateFromProps !== undefined)\n      return {};\n\n    let {\n      card,\n      memberList = [], //all cardMembers\n      labelList = [],\n      board,\n      user\n    } = nextProps;\n\n    let {\n      members = [], //members in card\n      labels = []\n    } = card;\n\n    let cardMembers = members.map(boardMemberId =>\n      memberList.find(member => member.id === boardMemberId)\n    );\n    let modifiedLabelList = labels.map(labelId =>\n      labelList.find(label => label.id === labelId)\n    );\n    let boardMembers = board.members.map(boardMember =>\n      memberList.find(member => member.id === boardMember.id)\n    );\n\n    return {\n      ...card,\n      boardId: board.id,\n      cardMembers,\n      boardMembers,\n      labels: [...modifiedLabelList],\n      labelList,\n      user,\n      updateFromProps: false\n    };\n  }\n\n  componentDidMount() {\n    if (window.innerWidth < 768) {\n      this.setState({ fullScreen: true });\n    }\n    if (window)\n      this.windowResizeListener = window.addEventListener(\"resize\", event => {\n        if (event.target.innerWidth < 768) {\n          this.setState({ fullScreen: true });\n        } else this.setState({ fullScreen: false });\n      });\n  }\n\n  componentWillUnmount() {\n    if (this.windowResizeListener)\n      window.removeEventListener(\"resize\", this.windowResizeListener);\n  }\n\n  render() {\n    let { open, memberList } = this.props;\n    let {\n      fullScreen,\n      title,\n      cardMembers = [],\n      boardMembers = [],\n      labels = [],\n      labelList = [],\n      description,\n      attachments = [],\n      comments = [],\n      user,\n      commentText\n    } = this.state;\n\n    return (\n      <Dialog\n        onClose={this.closeDialog}\n        open={open}\n        fullScreen={fullScreen}\n        fullWidth={true}\n        scroll=\"body\"\n      >\n        <div className=\"scrum-board\">\n          <div className=\"px-sm-24 pt-sm-24\">\n            <div className=\"flex flex-middle\">\n              <div className=\"flex flex-middle flex-grow-1\">\n                <Icon className=\"text-muted\">assignment</Icon>\n                <Input\n                  style={{\n                    fontSize: \"1rem\",\n                    fontWeight: 500\n                  }}\n                  className=\"flex-grow-1 px-8 ml-8 capitalize\"\n                  type=\"text\"\n                  autoFocus\n                  name=\"title\"\n                  onChange={this.handleChange}\n                  disableUnderline={true}\n                  value={title}\n                ></Input>\n              </div>\n              <IconButton size=\"small\" onClick={this.closeDialog}>\n                <Icon>clear</Icon>\n              </IconButton>\n            </div>\n\n            <p className=\"m-0 ml-40 mb-16 text-small text-muted\">\n              Tech Startup Board Hot Backlog\n            </p>\n\n            <div className=\"ml-40 mb-16 flex flex-wrap flex-space-between\">\n              <div>\n                <h6 className=\"m-0 mb-8 uppercase text-muted\">cardMembers</h6>\n                <div className=\"flex position-relative face-group-36\">\n                  {cardMembers.map(member => (\n                    <Avatar\n                      key={member.id}\n                      className=\"avatar\"\n                      src={member.avatar}\n                    />\n                  ))}\n                  <EgretMenu\n                    horizontalPosition=\"center\"\n                    shouldCloseOnItemClick={false}\n                    menuButton={\n                      <Tooltip title={\"Add\"} fontSize=\"large\">\n                        <Avatar className=\"avatar ml--12 cursor-pointer\">\n                          +\n                        </Avatar>\n                      </Tooltip>\n                    }\n                  >\n                    {boardMembers.map(user => (\n                      <FormControlLabel\n                        className=\"ml-0\"\n                        key={user.id}\n                        control={\n                          <Checkbox\n                            name=\"avatar\"\n                            checked={cardMembers.some(\n                              member => member.id === user.id\n                            )}\n                            onChange={this.handleChange}\n                            value={user.id}\n                          />\n                        }\n                        label={\n                          <div className=\"flex flex-middle\">\n                            <Avatar\n                              src={user.avatar}\n                              className=\"size-24\"\n                            ></Avatar>\n                            <span className=\"ml-12\">{user.name}</span>\n                          </div>\n                        }\n                      />\n                    ))}\n                  </EgretMenu>\n                </div>\n              </div>\n              <div>\n                <h6 className=\"m-0 mb-8 uppercase text-muted\">labels</h6>\n                <div className=\"button-group\">\n                  {labels.map(label => (\n                    <Button\n                      key={label.id}\n                      size=\"small\"\n                      variant=\"contained\"\n                      className={`capitalize mr-4 text-white text-small bg-${label.color}`}\n                    >\n                      {label.title}\n                    </Button>\n                  ))}\n                  <EgretMenu\n                    horizontalPosition=\"right\"\n                    shouldCloseOnItemClick={false}\n                    menuButton={\n                      <Tooltip title={\"Add\"} fontSize=\"large\">\n                        <Button className=\"bg-light-gray\" size=\"small\">\n                          +\n                        </Button>\n                      </Tooltip>\n                    }\n                  >\n                    {labelList.map(label => (\n                      <FormControlLabel\n                        className=\"ml-0\"\n                        key={label.id}\n                        control={\n                          <Checkbox\n                            checked={labels.some(item => item.id === label.id)}\n                            onChange={this.handleChange}\n                            value={label.id}\n                            name=\"label\"\n                          />\n                        }\n                        label={\n                          <div className=\"flex flex-middle\">\n                            <div\n                              className={`border-radius-4 size-24 bg-${label.color}`}\n                            ></div>\n                            <span className=\"ml-12\">{label.title}</span>\n                          </div>\n                        }\n                      />\n                    ))}\n                  </EgretMenu>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <Divider></Divider>\n\n          <Scrollbar\n            className=\"position-relative pt-16 mb-16\"\n            style={{ maxHeight: \"45vh\" }}\n          >\n            <div className=\"px-sm-24 pt-16\">\n              <div className=\"flex flex-middle mb-8\">\n                <Icon className=\"text-muted\">description</Icon>\n                <h6 className=\"m-0 ml-16 uppercase text-muted\">description</h6>\n              </div>\n              <div className=\"ml-40 mb-16 flex\">\n                <TextField\n                  className=\"text-muted\"\n                  onChange={this.handleChange}\n                  name=\"description\"\n                  value={description}\n                  variant=\"outlined\"\n                  fullWidth\n                  multiline\n                />\n              </div>\n\n              <div className=\"flex flex-space-between flex-middle mb-16\">\n                <div className=\"flex flex-middle\">\n                  <Icon className=\"text-muted\">attach_file</Icon>\n                  <h6 className=\"m-0 ml-16 uppercase text-muted\">\n                    attachments\n                  </h6>\n                </div>\n\n                <label htmlFor=\"upload-file\">\n                  <Button\n                    className=\"text-primary uppercase font-weight-500\"\n                    component=\"span\"\n                  >\n                    + add an attachment\n                  </Button>\n                </label>\n                <input\n                  className=\"display-none\"\n                  id=\"upload-file\"\n                  type=\"file\"\n                  multiple\n                />\n              </div>\n\n              <div className=\"ml-40 mb-16\">\n                <Grid container spacing={2}>\n                  {attachments.map((file, id) => (\n                    <Grid key={id} item lg={6} md={6} sm={12} xs={12}>\n                      <Card\n                        className=\"p-4 flex flex-middle bg-default h-100\"\n                        elevation={2}\n                      >\n                        <div className=\"flex flex-middle border-radius-8\">\n                          <img src={file.url} alt=\"image cover photo\" />\n                        </div>\n                        <div className=\"ml-16\">\n                          <h6 className=\"m-0 text-muted capitalize\">\n                            {file.name}\n                          </h6>\n                          <small className=\"text-muted text-small capitalize\">\n                            {file.size}\n                          </small>\n                        </div>\n                        <EgretMenu\n                          horizontalPosition=\"center\"\n                          menuButton={\n                            <IconButton className=\"ml-16\">\n                              <Icon>more_vert</Icon>\n                            </IconButton>\n                          }\n                        >\n                          <MenuItem\n                            className=\"flex flex-middle\"\n                            onClick={() => this.makeCoverPhoto(file.url)}\n                            style={{ minWidth: 165 }}\n                          >\n                            <Icon> insert_photo </Icon>\n                            <span className=\"pl-16\"> Make Cover </span>\n                          </MenuItem>\n                          <MenuItem\n                            onClick={() => this.removeAttachments(id)}\n                            className=\"flex flex-middle\"\n                            style={{ minWidth: 165 }}\n                          >\n                            <Icon> delete </Icon>\n                            <span className=\"pl-16\"> Remove </span>\n                          </MenuItem>\n                        </EgretMenu>\n                      </Card>\n                    </Grid>\n                  ))}\n                </Grid>\n              </div>\n            </div>\n\n            <Divider className=\"mb-16\"></Divider>\n\n            <div className=\"px-sm-24\">\n              <div className=\"flex flex-middle mb-16\">\n                <Icon className=\"text-muted\">message</Icon>\n                <h6 className=\"m-0 ml-16 uppercase text-muted\">comments</h6>\n              </div>\n              <div className=\"comments ml-40\">\n                {comments.map(comment => {\n                  let user = memberList.find(user => user.id === comment.uid);\n                  return (\n                    <div className=\"mb-16\" key={comment.id}>\n                      <div className=\"flex flex-middle mb-8\">\n                        <Avatar className=\"avatar size-36\" src={user.avatar} />\n                        <div className=\"ml-12\">\n                          <h6 className=\"m-0\">{user.name}</h6>\n                          <small>\n                            {getTimeDifference(new Date(comment.time))} ago\n                          </small>\n                        </div>\n                      </div>\n                      <p className=\"m-0 text-muted\">{comment.text}</p>\n                    </div>\n                  );\n                })}\n\n                <div className=\"flex flex-middle mb-16\">\n                  <Avatar className=\"avatar size-36\" src={user.photoURL} />\n                  <div className=\"flex-grow-1 flex\">\n                    <TextField\n                      className=\"ml-12 text-muted\"\n                      onChange={this.handleChange}\n                      onKeyDown={this.handleChange}\n                      variant=\"outlined\"\n                      name=\"commentText\"\n                      value={commentText}\n                      fullWidth\n                      inputProps={{\n                        style: {\n                          padding: \"10px\"\n                        }\n                      }}\n                    />\n                  </div>\n                  <Button onClick={this.sendComment}>Send</Button>\n                </div>\n              </div>\n            </div>\n          </Scrollbar>\n\n          <div className=\"px-sm-24 mb-12 flex flex-end\">\n            <Button className=\"mr-12\" onClick={this.closeDialog}>\n              Cancel\n            </Button>\n            <Button\n              onClick={this.handleSave}\n              variant=\"contained\"\n              color=\"primary\"\n            >\n              Save\n            </Button>\n          </div>\n        </div>\n      </Dialog>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  updateCardInList: PropTypes.func.isRequired,\n  board: state.scrumboard.board,\n  memberList: state.scrumboard.memberList,\n  labelList: state.scrumboard.labelList,\n  user: state.user\n});\n\nexport default connect(\n  mapStateToProps,\n  { updateCardInList }\n)(CardEditorDialog);\n"]},"metadata":{},"sourceType":"module"}