{"ast":null,"code":"import _slicedToArray from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/tarunsaini/Projects/arctic-admin/react/src/app/views/todo/TodoList.jsx\";\nimport React, { Component } from \"react\";\nimport TodoItem from \"./TodoItem\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { getAllTodo, updateTodoById, reorderTodoList, getAllTodoTag } from \"./TodoService\";\nimport { Icon, IconButton, MenuItem, Button, Card } from \"@material-ui/core\";\nimport { EgretMenu } from \"egret\";\n\nvar TodoList = /*#__PURE__*/function (_Component) {\n  _inherits(TodoList, _Component);\n\n  var _super = _createSuper(TodoList);\n\n  function TodoList() {\n    var _this;\n\n    _classCallCheck(this, TodoList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.todoList = [];\n    _this.state = {\n      tagList: [],\n      todoList: []\n    };\n\n    _this.search = function (query) {\n      query = query.toLowerCase();\n\n      var filteredTodoList = _this.todoList.filter(function (todo) {\n        return todo.title.toLowerCase().match(query) || todo.note.toLowerCase().match(query);\n      });\n\n      _this.setState({\n        todoList: _toConsumableArray(filteredTodoList)\n      });\n    };\n\n    _this.updateTodo = function (todo) {\n      updateTodoById(todo).then(function (_ref) {\n        var data = _ref.data;\n\n        _this.setState({\n          todoList: _toConsumableArray(data)\n        });\n\n        _this.todoList = _toConsumableArray(data);\n      });\n    };\n\n    _this.reorder = function (list, startIndex, endIndex) {\n      var result = Array.from(list);\n\n      var _result$splice = result.splice(startIndex, 1),\n          _result$splice2 = _slicedToArray(_result$splice, 1),\n          removed = _result$splice2[0];\n\n      result.splice(endIndex, 0, removed);\n      return result;\n    };\n\n    _this.handleDragEnd = function (result) {\n      // dropped outside the list\n      if (!result.destination) {\n        return;\n      }\n\n      var todoList = _this.reorder(_this.state.todoList, result.source.index, result.destination.index);\n\n      reorderTodoList(todoList).then(function (_ref2) {\n        var data = _ref2.data;\n\n        _this.setState({\n          todoList: _toConsumableArray(data)\n        });\n\n        _this.todoList = _toConsumableArray(data);\n      });\n    };\n\n    _this.filterTodoListByProperty = function (queryField, queryValue) {\n      if (queryField !== \"all\") {\n        _this.setState({\n          todoList: _toConsumableArray(_this.todoList.filter(function (todo) {\n            return todo[queryField] === queryValue;\n          }))\n        });\n      } else {\n        _this.setState({\n          todoList: _toConsumableArray(_this.todoList)\n        });\n      }\n    };\n\n    _this.filterTodoListByTag = function (tagId) {\n      if (tagId !== \"all\") _this.setState({\n        todoList: _toConsumableArray(_this.todoList.filter(function (todo) {\n          return todo.tag.includes(tagId);\n        }))\n      });else {\n        _this.setState({\n          todoList: _toConsumableArray(_this.todoList)\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(TodoList, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      this.props.setSearchFunction(this.search);\n      getAllTodo().then(function (_ref3) {\n        var data = _ref3.data;\n        getAllTodoTag().then(function (_ref4) {\n          var tagList = _ref4.data;\n\n          _this2.setState({\n            tagList: tagList,\n            todoList: _toConsumableArray(data)\n          });\n\n          _this2.todoList = _toConsumableArray(data);\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          todoList = _this$state.todoList,\n          tagList = _this$state.tagList;\n      return /*#__PURE__*/React.createElement(Card, {\n        className: \"todo position-relative m-sm-30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"todo-list__topbar bg-light-gray py-8 flex flex-wrap flex-middle flex-space-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(EgretMenu, {\n        menuButton: /*#__PURE__*/React.createElement(IconButton, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Icon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 19\n          }\n        }, \"arrow_drop_down\")),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"all\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }\n      }, \"All\"), /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"read\", true);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }\n      }, \"Read\"), /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"read\", false);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 15\n        }\n      }, \"Unread\"), /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"done\", true);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 15\n        }\n      }, \"Done\"), /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"done\", false);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 15\n        }\n      }, \"Undone\"), /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"important\", true);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 15\n        }\n      }, \"Important\"), /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"important\", false);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 15\n        }\n      }, \"Unimportant\"), /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"starred\", true);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 15\n        }\n      }, \"Starred\"), /*#__PURE__*/React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this3.filterTodoListByProperty(\"starred\", false);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 15\n        }\n      }, \"Unstarred\")), /*#__PURE__*/React.createElement(EgretMenu, {\n        menuButton: /*#__PURE__*/React.createElement(IconButton, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Icon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 19\n          }\n        }, \"label\")),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        className: \"capitalize\",\n        onClick: function onClick() {\n          return _this3.filterTodoListByTag(\"all\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }\n      }, \"all\"), tagList.map(function (tag) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          key: tag.id,\n          className: \"capitalize\",\n          onClick: function onClick() {\n            return _this3.filterTodoListByTag(tag.id);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }\n        }, tag.name);\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pr-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: function onClick() {\n          return _this3.props.history.push(\"/todo/list/add\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }\n      }, \"Create Todo\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"todo-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DragDropContext, {\n        onDragEnd: this.handleDragEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Droppable, {\n        droppableId: \"droppable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }\n      }, function (provided, snapshot) {\n        return /*#__PURE__*/React.createElement(\"div\", Object.assign({}, provided.droppableProps, {\n          ref: provided.innerRef,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 17\n          }\n        }), todoList.map(function (todo, index) {\n          return /*#__PURE__*/React.createElement(Draggable, {\n            key: todo.id,\n            draggableId: todo.id,\n            index: index,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 21\n            }\n          }, function (provided, snapshot) {\n            return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n              ref: provided.innerRef\n            }, provided.draggableProps, provided.dragHandleProps, {\n              style: provided.draggableProps.style,\n              __self: _this3,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 25\n              }\n            }), /*#__PURE__*/React.createElement(TodoItem, {\n              tagList: tagList,\n              updateTodo: _this3.updateTodo,\n              key: index,\n              todo: todo,\n              __self: _this3,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 27\n              }\n            }));\n          });\n        }), provided.placeholder);\n      }))));\n    }\n  }]);\n\n  return TodoList;\n}(Component);\n\nexport default TodoList;","map":{"version":3,"sources":["/Users/tarunsaini/Projects/arctic-admin/react/src/app/views/todo/TodoList.jsx"],"names":["React","Component","TodoItem","DragDropContext","Droppable","Draggable","getAllTodo","updateTodoById","reorderTodoList","getAllTodoTag","Icon","IconButton","MenuItem","Button","Card","EgretMenu","TodoList","todoList","state","tagList","search","query","toLowerCase","filteredTodoList","filter","todo","title","match","note","setState","updateTodo","then","data","reorder","list","startIndex","endIndex","result","Array","from","splice","removed","handleDragEnd","destination","source","index","filterTodoListByProperty","queryField","queryValue","filterTodoListByTag","tagId","tag","includes","props","setSearchFunction","map","id","name","history","push","provided","snapshot","droppableProps","innerRef","draggableProps","dragHandleProps","style","placeholder"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TodoItem from \"./TodoItem\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport {\n  getAllTodo,\n  updateTodoById,\n  reorderTodoList,\n  getAllTodoTag\n} from \"./TodoService\";\nimport { Icon, IconButton, MenuItem, Button, Card } from \"@material-ui/core\";\nimport {EgretMenu} from \"egret\";\n\nclass TodoList extends Component {\n  todoList = [];\n  state = {\n    tagList: [],\n    todoList: []\n  };\n\n  componentWillMount() {\n    this.props.setSearchFunction(this.search);\n    getAllTodo().then(({ data }) => {\n      getAllTodoTag().then(({ data: tagList }) => {\n        this.setState({\n          tagList,\n          todoList: [...data]\n        });\n        this.todoList = [...data];\n      });\n    });\n  }\n\n  search = query => {\n    query = query.toLowerCase();\n    let filteredTodoList = this.todoList.filter(\n      todo =>\n        todo.title.toLowerCase().match(query) ||\n        todo.note.toLowerCase().match(query)\n    );\n    this.setState({\n      todoList: [...filteredTodoList]\n    });\n  };\n\n  updateTodo = todo => {\n    updateTodoById(todo).then(({ data }) => {\n      this.setState({\n        todoList: [...data]\n      });\n      this.todoList = [...data];\n    });\n  };\n\n  reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n\n    return result;\n  };\n\n  handleDragEnd = result => {\n    // dropped outside the list\n    if (!result.destination) {\n      return;\n    }\n\n    let todoList = this.reorder(\n      this.state.todoList,\n      result.source.index,\n      result.destination.index\n    );\n\n    reorderTodoList(todoList).then(({ data }) => {\n      this.setState({\n        todoList: [...data]\n      });\n      this.todoList = [...data];\n    });\n  };\n\n  filterTodoListByProperty = (queryField, queryValue) => {\n    if (queryField !== \"all\") {\n      this.setState({\n        todoList: [\n          ...this.todoList.filter(todo => todo[queryField] === queryValue)\n        ]\n      });\n    } else {\n      this.setState({\n        todoList: [...this.todoList]\n      });\n    }\n  };\n\n  filterTodoListByTag = tagId => {\n    if (tagId !== \"all\")\n      this.setState({\n        todoList: [...this.todoList.filter(todo => todo.tag.includes(tagId))]\n      });\n    else {\n      this.setState({\n        todoList: [...this.todoList]\n      });\n    }\n  };\n\n  render() {\n    let { todoList, tagList } = this.state;\n    return (\n      <Card className=\"todo position-relative m-sm-30\">\n        <div className=\"todo-list__topbar bg-light-gray py-8 flex flex-wrap flex-middle flex-space-between\">\n          <div>\n            <EgretMenu\n              menuButton={\n                <IconButton>\n                  <Icon>arrow_drop_down</Icon>\n                </IconButton>\n              }\n            >\n              <MenuItem onClick={() => this.filterTodoListByProperty(\"all\")}>\n                All\n              </MenuItem>\n              <MenuItem\n                onClick={() => this.filterTodoListByProperty(\"read\", true)}\n              >\n                Read\n              </MenuItem>\n              <MenuItem\n                onClick={() => this.filterTodoListByProperty(\"read\", false)}\n              >\n                Unread\n              </MenuItem>\n              <MenuItem\n                onClick={() => this.filterTodoListByProperty(\"done\", true)}\n              >\n                Done\n              </MenuItem>\n              <MenuItem\n                onClick={() => this.filterTodoListByProperty(\"done\", false)}\n              >\n                Undone\n              </MenuItem>\n              <MenuItem\n                onClick={() => this.filterTodoListByProperty(\"important\", true)}\n              >\n                Important\n              </MenuItem>\n              <MenuItem\n                onClick={() =>\n                  this.filterTodoListByProperty(\"important\", false)\n                }\n              >\n                Unimportant\n              </MenuItem>\n              <MenuItem\n                onClick={() => this.filterTodoListByProperty(\"starred\", true)}\n              >\n                Starred\n              </MenuItem>\n              <MenuItem\n                onClick={() => this.filterTodoListByProperty(\"starred\", false)}\n              >\n                Unstarred\n              </MenuItem>\n            </EgretMenu>\n            <EgretMenu\n              menuButton={\n                <IconButton>\n                  <Icon>label</Icon>\n                </IconButton>\n              }\n            >\n              <MenuItem\n                className=\"capitalize\"\n                onClick={() => this.filterTodoListByTag(\"all\")}\n              >\n                all\n              </MenuItem>\n              {tagList.map(tag => (\n                <MenuItem\n                  key={tag.id}\n                  className=\"capitalize\"\n                  onClick={() => this.filterTodoListByTag(tag.id)}\n                >\n                  {tag.name}\n                </MenuItem>\n              ))}\n            </EgretMenu>\n          </div>\n          <div className=\"pr-16\">\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => this.props.history.push(\"/todo/list/add\")}\n            >\n              Create Todo\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"todo-list\">\n          <DragDropContext onDragEnd={this.handleDragEnd}>\n            <Droppable droppableId=\"droppable\">\n              {(provided, snapshot) => (\n                <div {...provided.droppableProps} ref={provided.innerRef}>\n                  {todoList.map((todo, index) => (\n                    <Draggable\n                      key={todo.id}\n                      draggableId={todo.id}\n                      index={index}\n                    >\n                      {(provided, snapshot) => (\n                        <div\n                          ref={provided.innerRef}\n                          {...provided.draggableProps}\n                          {...provided.dragHandleProps}\n                          style={provided.draggableProps.style}\n                        >\n                          <TodoItem\n                            tagList={tagList}\n                            updateTodo={this.updateTodo}\n                            key={index}\n                            todo={todo}\n                          />\n                        </div>\n                      )}\n                    </Draggable>\n                  ))}\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n        </div>\n      </Card>\n    );\n  }\n}\n\nexport default TodoList;\n"]},"metadata":{},"sourceType":"module"}