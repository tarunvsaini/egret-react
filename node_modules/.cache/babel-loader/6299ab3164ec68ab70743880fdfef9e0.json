{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? e(require(\"@firebase/app\")) : \"function\" == typeof define && define.amd ? define([\"@firebase/app\"], e) : e((t = \"undefined\" != typeof globalThis ? globalThis : t || self).firebase);\n}(this, function (vm) {\n  \"use strict\";\n\n  try {\n    !function () {\n      function t(t) {\n        return t && \"object\" == typeof t && \"default\" in t ? t : {\n          default: t\n        };\n      }\n\n      var e = t(vm),\n          _r2 = function r(t, e) {\n        return (_r2 = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (t, e) {\n          t.__proto__ = e;\n        } || function (t, e) {\n          for (var n in e) {\n            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n          }\n        })(t, e);\n      };\n\n      function n(t, e) {\n        if (\"function\" != typeof e && null !== e) throw new TypeError(\"Class extends value \" + String(e) + \" is not a constructor or null\");\n\n        function n() {\n          this.constructor = t;\n        }\n\n        _r2(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n      }\n\n      var _o2 = function o() {\n        return (_o2 = Object.assign || function (t) {\n          for (var e, n = 1, r = arguments.length; n < r; n++) {\n            for (var i in e = arguments[n]) {\n              Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);\n            }\n          }\n\n          return t;\n        }).apply(this, arguments);\n      };\n\n      function y(t, s, a, u) {\n        return new (a = a || Promise)(function (n, e) {\n          function r(t) {\n            try {\n              o(u.next(t));\n            } catch (t) {\n              e(t);\n            }\n          }\n\n          function i(t) {\n            try {\n              o(u.throw(t));\n            } catch (t) {\n              e(t);\n            }\n          }\n\n          function o(t) {\n            var e;\n            t.done ? n(t.value) : ((e = t.value) instanceof a ? e : new a(function (t) {\n              t(e);\n            })).then(r, i);\n          }\n\n          o((u = u.apply(t, s || [])).next());\n        });\n      }\n\n      function g(n, r) {\n        var i,\n            o,\n            s,\n            a = {\n          label: 0,\n          sent: function sent() {\n            if (1 & s[0]) throw s[1];\n            return s[1];\n          },\n          trys: [],\n          ops: []\n        },\n            t = {\n          next: e(0),\n          throw: e(1),\n          return: e(2)\n        };\n        return \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n          return this;\n        }), t;\n\n        function e(e) {\n          return function (t) {\n            return function (e) {\n              if (i) throw new TypeError(\"Generator is already executing.\");\n\n              for (; a;) {\n                try {\n                  if (i = 1, o && (s = 2 & e[0] ? o.return : e[0] ? o.throw || ((s = o.return) && s.call(o), 0) : o.next) && !(s = s.call(o, e[1])).done) return s;\n\n                  switch (o = 0, (e = s ? [2 & e[0], s.value] : e)[0]) {\n                    case 0:\n                    case 1:\n                      s = e;\n                      break;\n\n                    case 4:\n                      return a.label++, {\n                        value: e[1],\n                        done: !1\n                      };\n\n                    case 5:\n                      a.label++, o = e[1], e = [0];\n                      continue;\n\n                    case 7:\n                      e = a.ops.pop(), a.trys.pop();\n                      continue;\n\n                    default:\n                      if (!(s = 0 < (s = a.trys).length && s[s.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                        a = 0;\n                        continue;\n                      }\n\n                      if (3 === e[0] && (!s || e[1] > s[0] && e[1] < s[3])) {\n                        a.label = e[1];\n                        break;\n                      }\n\n                      if (6 === e[0] && a.label < s[1]) {\n                        a.label = s[1], s = e;\n                        break;\n                      }\n\n                      if (s && a.label < s[2]) {\n                        a.label = s[2], a.ops.push(e);\n                        break;\n                      }\n\n                      s[2] && a.ops.pop(), a.trys.pop();\n                      continue;\n                  }\n\n                  e = r.call(n, a);\n                } catch (t) {\n                  e = [6, t], o = 0;\n                } finally {\n                  i = s = 0;\n                }\n              }\n\n              if (5 & e[0]) throw e[1];\n              return {\n                value: e[0] ? e[1] : void 0,\n                done: !0\n              };\n            }([e, t]);\n          };\n        }\n      }\n\n      function s(t, e) {\n        for (var n = 0, r = e.length, i = t.length; n < r; n++, i++) {\n          t[i] = e[n];\n        }\n\n        return t;\n      }\n\n      var a = {\n        byteToCharMap_: null,\n        charToByteMap_: null,\n        byteToCharMapWebSafe_: null,\n        charToByteMapWebSafe_: null,\n        ENCODED_VALS_BASE: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",\n\n        get ENCODED_VALS() {\n          return this.ENCODED_VALS_BASE + \"+/=\";\n        },\n\n        get ENCODED_VALS_WEBSAFE() {\n          return this.ENCODED_VALS_BASE + \"-_.\";\n        },\n\n        HAS_NATIVE_SUPPORT: \"function\" == typeof atob,\n        encodeByteArray: function encodeByteArray(t, e) {\n          if (!Array.isArray(t)) throw Error(\"encodeByteArray takes an array as a parameter\");\n          this.init_();\n\n          for (var n = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_, r = [], i = 0; i < t.length; i += 3) {\n            var o = t[i],\n                s = i + 1 < t.length,\n                a = s ? t[i + 1] : 0,\n                u = i + 2 < t.length,\n                c = u ? t[i + 2] : 0,\n                h = (15 & a) << 2 | c >> 6,\n                c = 63 & c;\n            u || (c = 64, s || (h = 64)), r.push(n[o >> 2], n[(3 & o) << 4 | a >> 4], n[h], n[c]);\n          }\n\n          return r.join(\"\");\n        },\n        encodeString: function encodeString(t, e) {\n          return this.HAS_NATIVE_SUPPORT && !e ? btoa(t) : this.encodeByteArray(function (t) {\n            for (var e = [], n = 0, r = 0; r < t.length; r++) {\n              var i = t.charCodeAt(r);\n              i < 128 ? e[n++] = i : (i < 2048 ? e[n++] = i >> 6 | 192 : (55296 == (64512 & i) && r + 1 < t.length && 56320 == (64512 & t.charCodeAt(r + 1)) ? (i = 65536 + ((1023 & i) << 10) + (1023 & t.charCodeAt(++r)), e[n++] = i >> 18 | 240, e[n++] = i >> 12 & 63 | 128) : e[n++] = i >> 12 | 224, e[n++] = i >> 6 & 63 | 128), e[n++] = 63 & i | 128);\n            }\n\n            return e;\n          }(t), e);\n        },\n        decodeString: function decodeString(t, e) {\n          return this.HAS_NATIVE_SUPPORT && !e ? atob(t) : function (t) {\n            for (var e = [], n = 0, r = 0; n < t.length;) {\n              var i,\n                  o,\n                  s,\n                  a = t[n++];\n              a < 128 ? e[r++] = String.fromCharCode(a) : 191 < a && a < 224 ? (o = t[n++], e[r++] = String.fromCharCode((31 & a) << 6 | 63 & o)) : 239 < a && a < 365 ? (i = ((7 & a) << 18 | (63 & (o = t[n++])) << 12 | (63 & (s = t[n++])) << 6 | 63 & t[n++]) - 65536, e[r++] = String.fromCharCode(55296 + (i >> 10)), e[r++] = String.fromCharCode(56320 + (1023 & i))) : (o = t[n++], s = t[n++], e[r++] = String.fromCharCode((15 & a) << 12 | (63 & o) << 6 | 63 & s));\n            }\n\n            return e.join(\"\");\n          }(this.decodeStringToByteArray(t, e));\n        },\n        decodeStringToByteArray: function decodeStringToByteArray(t, e) {\n          this.init_();\n\n          for (var n = e ? this.charToByteMapWebSafe_ : this.charToByteMap_, r = [], i = 0; i < t.length;) {\n            var o = n[t.charAt(i++)],\n                s = i < t.length ? n[t.charAt(i)] : 0,\n                a = ++i < t.length ? n[t.charAt(i)] : 64,\n                u = ++i < t.length ? n[t.charAt(i)] : 64;\n            if (++i, null == o || null == s || null == a || null == u) throw Error();\n            r.push(o << 2 | s >> 4), 64 !== a && (r.push(s << 4 & 240 | a >> 2), 64 !== u && r.push(a << 6 & 192 | u));\n          }\n\n          return r;\n        },\n        init_: function init_() {\n          if (!this.byteToCharMap_) {\n            this.byteToCharMap_ = {}, this.charToByteMap_ = {}, this.byteToCharMapWebSafe_ = {}, this.charToByteMapWebSafe_ = {};\n\n            for (var t = 0; t < this.ENCODED_VALS.length; t++) {\n              this.byteToCharMap_[t] = this.ENCODED_VALS.charAt(t), this.charToByteMap_[this.byteToCharMap_[t]] = t, this.byteToCharMapWebSafe_[t] = this.ENCODED_VALS_WEBSAFE.charAt(t), (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]] = t) >= this.ENCODED_VALS_BASE.length && (this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)] = t, this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)] = t);\n            }\n          }\n        }\n      };\n\n      function h() {\n        return \"undefined\" != typeof navigator && \"string\" == typeof navigator.userAgent ? navigator.userAgent : \"\";\n      }\n\n      var i,\n          u = \"FirebaseError\",\n          c = (n(l, i = Error), l);\n\n      function l(t, e, n) {\n        e = i.call(this, e) || this;\n        return e.code = t, e.customData = n, e.name = u, Object.setPrototypeOf(e, l.prototype), Error.captureStackTrace && Error.captureStackTrace(e, f.prototype.create), e;\n      }\n\n      var f = (d.prototype.create = function (t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        var r,\n            i = e[0] || {},\n            o = this.service + \"/\" + t,\n            t = this.errors[t],\n            t = t ? (r = i, t.replace(m, function (t, e) {\n          var n = r[e];\n          return null != n ? String(n) : \"<\" + e + \"?>\";\n        })) : \"Error\",\n            t = this.serviceName + \": \" + t + \" (\" + o + \").\";\n        return new c(o, t, i);\n      }, d);\n\n      function d(t, e, n) {\n        this.service = t, this.serviceName = e, this.errors = n;\n      }\n\n      var p,\n          m = /\\{\\$([^}]+)}/g;\n\n      function v(t) {\n        return t && t._delegate ? t._delegate : t;\n      }\n\n      (_e = p = p || {})[_e.DEBUG = 0] = \"DEBUG\", _e[_e.VERBOSE = 1] = \"VERBOSE\", _e[_e.INFO = 2] = \"INFO\", _e[_e.WARN = 3] = \"WARN\", _e[_e.ERROR = 4] = \"ERROR\", _e[_e.SILENT = 5] = \"SILENT\";\n\n      function b(t, e) {\n        for (var n = [], r = 2; r < arguments.length; r++) {\n          n[r - 2] = arguments[r];\n        }\n\n        if (!(e < t.logLevel)) {\n          var i = new Date().toISOString(),\n              o = T[e];\n          if (!o) throw new Error(\"Attempted to log a message with an invalid logType (value: \" + e + \")\");\n          console[o].apply(console, s([\"[\" + i + \"]  \" + t.name + \":\"], n));\n        }\n      }\n\n      var w = {\n        debug: p.DEBUG,\n        verbose: p.VERBOSE,\n        info: p.INFO,\n        warn: p.WARN,\n        error: p.ERROR,\n        silent: p.SILENT\n      },\n          E = p.INFO,\n          T = ((Se = {})[p.DEBUG] = \"log\", Se[p.VERBOSE] = \"log\", Se[p.INFO] = \"info\", Se[p.WARN] = \"warn\", Se[p.ERROR] = \"error\", Se),\n          I = (Object.defineProperty(_.prototype, \"logLevel\", {\n        get: function get() {\n          return this._logLevel;\n        },\n        set: function set(t) {\n          if (!(t in p)) throw new TypeError('Invalid value \"' + t + '\" assigned to `logLevel`');\n          this._logLevel = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _.prototype.setLogLevel = function (t) {\n        this._logLevel = \"string\" == typeof t ? w[t] : t;\n      }, Object.defineProperty(_.prototype, \"logHandler\", {\n        get: function get() {\n          return this._logHandler;\n        },\n        set: function set(t) {\n          if (\"function\" != typeof t) throw new TypeError(\"Value assigned to `logHandler` must be a function\");\n          this._logHandler = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(_.prototype, \"userLogHandler\", {\n        get: function get() {\n          return this._userLogHandler;\n        },\n        set: function set(t) {\n          this._userLogHandler = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _.prototype.debug = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.DEBUG], t)), this._logHandler.apply(this, s([this, p.DEBUG], t));\n      }, _.prototype.log = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.VERBOSE], t)), this._logHandler.apply(this, s([this, p.VERBOSE], t));\n      }, _.prototype.info = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.INFO], t)), this._logHandler.apply(this, s([this, p.INFO], t));\n      }, _.prototype.warn = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.WARN], t)), this._logHandler.apply(this, s([this, p.WARN], t));\n      }, _.prototype.error = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.ERROR], t)), this._logHandler.apply(this, s([this, p.ERROR], t));\n      }, _);\n\n      function _(t) {\n        this.name = t, this._logLevel = E, this._logHandler = b, this._userLogHandler = null;\n      }\n\n      var _S = function S(t, e) {\n        return (_S = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (t, e) {\n          t.__proto__ = e;\n        } || function (t, e) {\n          for (var n in e) {\n            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n          }\n        })(t, e);\n      };\n\n      function A(t) {\n        var e = \"function\" == typeof Symbol && Symbol.iterator,\n            n = e && t[e],\n            r = 0;\n        if (n) return n.call(t);\n        if (t && \"number\" == typeof t.length) return {\n          next: function next() {\n            return {\n              value: (t = t && r >= t.length ? void 0 : t) && t[r++],\n              done: !t\n            };\n          }\n        };\n        throw new TypeError(e ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n      }\n\n      var N,\n          D = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {},\n          C = {},\n          k = D || self;\n\n      function R() {}\n\n      function x(t) {\n        var e = typeof t;\n        return \"array\" == (e = \"object\" != e ? e : t ? Array.isArray(t) ? \"array\" : e : \"null\") || \"object\" == e && \"number\" == typeof t.length;\n      }\n\n      function O(t) {\n        var e = typeof t;\n        return \"object\" == e && null != t || \"function\" == e;\n      }\n\n      var L = \"closure_uid_\" + (1e9 * Math.random() >>> 0),\n          P = 0;\n\n      function M(t, e, n) {\n        return t.call.apply(t.bind, arguments);\n      }\n\n      function F(e, n, t) {\n        if (!e) throw Error();\n\n        if (2 < arguments.length) {\n          var r = Array.prototype.slice.call(arguments, 2);\n          return function () {\n            var t = Array.prototype.slice.call(arguments);\n            return Array.prototype.unshift.apply(t, r), e.apply(n, t);\n          };\n        }\n\n        return function () {\n          return e.apply(n, arguments);\n        };\n      }\n\n      function V(t, e, n) {\n        return (V = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf(\"native code\") ? M : F).apply(null, arguments);\n      }\n\n      function U(e) {\n        var n = Array.prototype.slice.call(arguments, 1);\n        return function () {\n          var t = n.slice();\n          return t.push.apply(t, arguments), e.apply(this, t);\n        };\n      }\n\n      function q() {\n        return Date.now();\n      }\n\n      function B(t, o) {\n        function e() {}\n\n        e.prototype = o.prototype, t.X = o.prototype, t.prototype = new e(), (t.prototype.constructor = t).Pb = function (t, e, n) {\n          for (var r = Array(arguments.length - 2), i = 2; i < arguments.length; i++) {\n            r[i - 2] = arguments[i];\n          }\n\n          return o.prototype[e].apply(t, r);\n        };\n      }\n\n      function j() {\n        this.j = this.j, this.i = this.i;\n      }\n\n      j.prototype.j = !1, j.prototype.ka = function () {\n        var t;\n        !this.j && (this.j = !0, this.H(), 0) && (t = this, Object.prototype.hasOwnProperty.call(t, L) && t[L] || (t[L] = ++P));\n      }, j.prototype.H = function () {\n        if (this.i) for (; this.i.length;) {\n          this.i.shift()();\n        }\n      };\n      var K = Array.prototype.indexOf ? function (t, e) {\n        return Array.prototype.indexOf.call(t, e, void 0);\n      } : function (t, e) {\n        if (\"string\" == typeof t) return \"string\" != typeof e || 1 != e.length ? -1 : t.indexOf(e, 0);\n\n        for (var n = 0; n < t.length; n++) {\n          if (n in t && t[n] === e) return n;\n        }\n\n        return -1;\n      },\n          G = Array.prototype.forEach ? function (t, e, n) {\n        Array.prototype.forEach.call(t, e, n);\n      } : function (t, e, n) {\n        for (var r = t.length, i = \"string\" == typeof t ? t.split(\"\") : t, o = 0; o < r; o++) {\n          o in i && e.call(n, i[o], o, t);\n        }\n      };\n\n      function Q() {\n        return Array.prototype.concat.apply([], arguments);\n      }\n\n      function H(t) {\n        var e = t.length;\n\n        if (0 < e) {\n          for (var n = Array(e), r = 0; r < e; r++) {\n            n[r] = t[r];\n          }\n\n          return n;\n        }\n\n        return [];\n      }\n\n      function z(t) {\n        return /^[\\s\\xa0]*$/.test(t);\n      }\n\n      var W,\n          Y = String.prototype.trim ? function (t) {\n        return t.trim();\n      } : function (t) {\n        return /^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1];\n      };\n\n      function X(t, e) {\n        return -1 != t.indexOf(e);\n      }\n\n      function $(t, e) {\n        return t < e ? -1 : e < t ? 1 : 0;\n      }\n\n      t: {\n        var J = k.navigator;\n\n        if (J) {\n          J = J.userAgent;\n\n          if (J) {\n            W = J;\n            break t;\n          }\n        }\n\n        W = \"\";\n      }\n\n      function Z(t, e, n) {\n        for (var r in t) {\n          e.call(n, t[r], r, t);\n        }\n      }\n\n      function tt(t) {\n        var e,\n            n = {};\n\n        for (e in t) {\n          n[e] = t[e];\n        }\n\n        return n;\n      }\n\n      var et = \"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");\n\n      function nt(t) {\n        for (var e, n, r = 1; r < arguments.length; r++) {\n          for (e in n = arguments[r]) {\n            t[e] = n[e];\n          }\n\n          for (var i = 0; i < et.length; i++) {\n            e = et[i], Object.prototype.hasOwnProperty.call(n, e) && (t[e] = n[e]);\n          }\n        }\n      }\n\n      function rt(t) {\n        return rt[\" \"](t), t;\n      }\n\n      rt[\" \"] = R;\n      var it,\n          ot = X(W, \"Opera\"),\n          st = X(W, \"Trident\") || X(W, \"MSIE\"),\n          at = X(W, \"Edge\"),\n          ut = at || st,\n          ct = X(W, \"Gecko\") && !(X(W.toLowerCase(), \"webkit\") && !X(W, \"Edge\")) && !(X(W, \"Trident\") || X(W, \"MSIE\")) && !X(W, \"Edge\"),\n          ht = X(W.toLowerCase(), \"webkit\") && !X(W, \"Edge\");\n\n      function lt() {\n        var t = k.document;\n        return t ? t.documentMode : void 0;\n      }\n\n      t: {\n        var ft = \"\",\n            dt = (dt = W, ct ? /rv:([^\\);]+)(\\)|;)/.exec(dt) : at ? /Edge\\/([\\d\\.]+)/.exec(dt) : st ? /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(dt) : ht ? /WebKit\\/(\\S+)/.exec(dt) : ot ? /(?:Version)[ \\/]?(\\S+)/.exec(dt) : void 0);\n\n        if (dt && (ft = dt ? dt[1] : \"\"), st) {\n          dt = lt();\n\n          if (null != dt && dt > parseFloat(ft)) {\n            it = String(dt);\n            break t;\n          }\n        }\n\n        it = ft;\n      }\n\n      var pt = {};\n\n      function yt(a) {\n        return t = a, e = function e() {\n          for (var t = 0, e = Y(String(it)).split(\".\"), n = Y(String(a)).split(\".\"), r = Math.max(e.length, n.length), i = 0; 0 == t && i < r; i++) {\n            for (var o = e[i] || \"\", s = n[i] || \"\"; o = /(\\d*)(\\D*)(.*)/.exec(o) || [\"\", \"\", \"\", \"\"], s = /(\\d*)(\\D*)(.*)/.exec(s) || [\"\", \"\", \"\", \"\"], (0 != o[0].length || 0 != s[0].length) && (t = $(0 == o[1].length ? 0 : parseInt(o[1], 10), 0 == s[1].length ? 0 : parseInt(s[1], 10)) || $(0 == o[2].length, 0 == s[2].length) || $(o[2], s[2]), o = o[3], s = s[3], 0 == t);) {\n              ;\n            }\n          }\n\n          return 0 <= t;\n        }, n = pt, Object.prototype.hasOwnProperty.call(n, t) ? n[t] : n[t] = e(t);\n        var t, e, n;\n      }\n\n      var gt = k.document && st && (lt() || parseInt(it, 10)) || void 0,\n          mt = !st || 9 <= Number(gt),\n          vt = st && !yt(\"9\"),\n          bt = function () {\n        if (!k.addEventListener || !Object.defineProperty) return !1;\n        var t = !1,\n            e = Object.defineProperty({}, \"passive\", {\n          get: function get() {\n            t = !0;\n          }\n        });\n\n        try {\n          k.addEventListener(\"test\", R, e), k.removeEventListener(\"test\", R, e);\n        } catch (t) {}\n\n        return t;\n      }();\n\n      function wt(t, e) {\n        this.type = t, this.a = this.target = e, this.defaultPrevented = !1;\n      }\n\n      function Et(t, e) {\n        if (wt.call(this, t ? t.type : \"\"), this.relatedTarget = this.a = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = \"\", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = \"\", this.c = null, t) {\n          var n = this.type = t.type,\n              r = t.changedTouches && t.changedTouches.length ? t.changedTouches[0] : null;\n\n          if (this.target = t.target || t.srcElement, this.a = e, e = t.relatedTarget) {\n            if (ct) {\n              t: {\n                try {\n                  rt(e.nodeName);\n                  var i = !0;\n                  break t;\n                } catch (t) {}\n\n                i = !1;\n              }\n\n              i || (e = null);\n            }\n          } else \"mouseover\" == n ? e = t.fromElement : \"mouseout\" == n && (e = t.toElement);\n\n          this.relatedTarget = e, r ? (this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX, this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY, this.screenX = r.screenX || 0, this.screenY = r.screenY || 0) : (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX, this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY, this.screenX = t.screenX || 0, this.screenY = t.screenY || 0), this.button = t.button, this.key = t.key || \"\", this.ctrlKey = t.ctrlKey, this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.metaKey = t.metaKey, this.pointerId = t.pointerId || 0, this.pointerType = \"string\" == typeof t.pointerType ? t.pointerType : Tt[t.pointerType] || \"\", (this.c = t).defaultPrevented && this.b();\n        }\n      }\n\n      wt.prototype.b = function () {\n        this.defaultPrevented = !0;\n      }, B(Et, wt);\n      var Tt = {\n        2: \"touch\",\n        3: \"pen\",\n        4: \"mouse\"\n      };\n\n      Et.prototype.b = function () {\n        Et.X.b.call(this);\n        var t = this.c;\n        if (t.preventDefault) t.preventDefault();else if (t.returnValue = !1, vt) try {\n          (t.ctrlKey || 112 <= t.keyCode && t.keyCode <= 123) && (t.keyCode = -1);\n        } catch (t) {}\n      };\n\n      var It = \"closure_listenable_\" + (1e6 * Math.random() | 0),\n          _t = 0;\n\n      function St(t, e, n, r, i) {\n        this.listener = t, this.proxy = null, this.src = e, this.type = n, this.capture = !!r, this.da = i, this.key = ++_t, this.Y = this.Z = !1;\n      }\n\n      function At(t) {\n        t.Y = !0, t.listener = null, t.proxy = null, t.src = null, t.da = null;\n      }\n\n      function Nt(t) {\n        this.src = t, this.a = {}, this.b = 0;\n      }\n\n      function Dt(t, e) {\n        var n,\n            r,\n            i,\n            o = e.type;\n        o in t.a && (n = t.a[o], (i = 0 <= (r = K(n, e))) && Array.prototype.splice.call(n, r, 1), i && (At(e), 0 == t.a[o].length && (delete t.a[o], t.b--)));\n      }\n\n      function Ct(t, e, n, r) {\n        for (var i = 0; i < t.length; ++i) {\n          var o = t[i];\n          if (!o.Y && o.listener == e && o.capture == !!n && o.da == r) return i;\n        }\n\n        return -1;\n      }\n\n      Nt.prototype.add = function (t, e, n, r, i) {\n        var o = t.toString();\n        (t = this.a[o]) || (t = this.a[o] = [], this.b++);\n        var s = Ct(t, e, r, i);\n        return -1 < s ? (e = t[s], n || (e.Z = !1)) : ((e = new St(e, this.src, o, !!r, i)).Z = n, t.push(e)), e;\n      };\n\n      var kt = \"closure_lm_\" + (1e6 * Math.random() | 0),\n          Rt = {};\n\n      function xt(t, e, n, r, i) {\n        if (r && r.once) return function t(e, n, r, i, o) {\n          if (Array.isArray(n)) {\n            for (var s = 0; s < n.length; s++) {\n              t(e, n[s], r, i, o);\n            }\n\n            return null;\n          }\n\n          r = qt(r);\n          return e && e[It] ? e.xa(n, r, O(i) ? !!i.capture : !!i, o) : Ot(e, n, r, !0, i, o);\n        }(t, e, n, r, i);\n\n        if (Array.isArray(e)) {\n          for (var o = 0; o < e.length; o++) {\n            xt(t, e[o], n, r, i);\n          }\n\n          return null;\n        }\n\n        return n = qt(n), t && t[It] ? t.wa(e, n, O(r) ? !!r.capture : !!r, i) : Ot(t, e, n, !1, r, i);\n      }\n\n      function Ot(t, e, n, r, i, o) {\n        if (!e) throw Error(\"Invalid event type\");\n        var s = O(i) ? !!i.capture : !!i;\n        if (s && !mt) return null;\n        var a,\n            u,\n            c = Vt(t);\n        if (c || (t[kt] = c = new Nt(t)), (n = c.add(e, n, r, s, o)).proxy) return n;\n        if (a = Ft, u = mt ? function (t) {\n          return a.call(u.src, u.listener, t);\n        } : function (t) {\n          if (!(t = a.call(u.src, u.listener, t))) return t;\n        }, (n.proxy = r = u).src = t, r.listener = n, t.addEventListener) void 0 === (i = !bt ? s : i) && (i = !1), t.addEventListener(e.toString(), r, i);else if (t.attachEvent) t.attachEvent(Pt(e.toString()), r);else {\n          if (!t.addListener || !t.removeListener) throw Error(\"addEventListener and attachEvent are unavailable.\");\n          t.addListener(r);\n        }\n        return n;\n      }\n\n      function Lt(t) {\n        var e, n, r;\n        \"number\" != typeof t && t && !t.Y && ((e = t.src) && e[It] ? Dt(e.c, t) : (n = t.type, r = t.proxy, e.removeEventListener ? e.removeEventListener(n, r, t.capture) : e.detachEvent ? e.detachEvent(Pt(n), r) : e.addListener && e.removeListener && e.removeListener(r), (n = Vt(e)) ? (Dt(n, t), 0 == n.b && (n.src = null, e[kt] = null)) : At(t)));\n      }\n\n      function Pt(t) {\n        return t in Rt ? Rt[t] : Rt[t] = \"on\" + t;\n      }\n\n      function Mt(t, e) {\n        var n = t.listener,\n            r = t.da || t.src;\n        return t.Z && Lt(t), n.call(r, e);\n      }\n\n      function Ft(t, e) {\n        if (t.Y) return !0;\n        if (mt) return Mt(t, new Et(e, this));\n        if (!e) t: {\n          e = [\"window\", \"event\"];\n\n          for (var n = k, r = 0; r < e.length; r++) {\n            if (null == (n = n[e[r]])) {\n              e = null;\n              break t;\n            }\n          }\n\n          e = n;\n        }\n        return Mt(t, e = new Et(e, this));\n      }\n\n      function Vt(t) {\n        return (t = t[kt]) instanceof Nt ? t : null;\n      }\n\n      var Ut = \"__closure_events_fn_\" + (1e9 * Math.random() >>> 0);\n\n      function qt(e) {\n        return \"function\" == typeof e ? e : (e[Ut] || (e[Ut] = function (t) {\n          return e.handleEvent(t);\n        }), e[Ut]);\n      }\n\n      function Bt() {\n        j.call(this), this.c = new Nt(this), (this.J = this).D = null;\n      }\n\n      function jt(t, e) {\n        var n,\n            r = t.D;\n        if (r) for (n = []; r; r = r.D) {\n          n.push(r);\n        }\n        if (t = t.J, r = e.type || e, \"string\" == typeof e ? e = new wt(e, t) : e instanceof wt ? e.target = e.target || t : (s = e, nt(e = new wt(r, t), s)), s = !0, n) for (var i = n.length - 1; 0 <= i; i--) {\n          var o = e.a = n[i],\n              s = Kt(o, r, !0, e) && s;\n        }\n        if (s = Kt(o = e.a = t, r, !0, e) && s, s = Kt(o, r, !1, e) && s, n) for (i = 0; i < n.length; i++) {\n          s = Kt(o = e.a = n[i], r, !1, e) && s;\n        }\n      }\n\n      function Kt(t, e, n, r) {\n        if (!(e = t.c.a[String(e)])) return !0;\n        e = e.concat();\n\n        for (var i = !0, o = 0; o < e.length; ++o) {\n          var s,\n              a,\n              u = e[o];\n          u && !u.Y && u.capture == n && (s = u.listener, a = u.da || u.src, u.Z && Dt(t.c, u), i = !1 !== s.call(a, r) && i);\n        }\n\n        return i && !r.defaultPrevented;\n      }\n\n      B(Bt, j), Bt.prototype[It] = !0, (N = Bt.prototype).addEventListener = function (t, e, n, r) {\n        xt(this, t, e, n, r);\n      }, N.removeEventListener = function (t, e, n, r) {\n        !function t(e, n, r, i, o) {\n          if (Array.isArray(n)) for (var s = 0; s < n.length; s++) {\n            t(e, n[s], r, i, o);\n          } else i = O(i) ? !!i.capture : !!i, r = qt(r), e && e[It] ? (e = e.c, (n = String(n).toString()) in e.a && -1 < (r = Ct(s = e.a[n], r, i, o)) && (At(s[r]), Array.prototype.splice.call(s, r, 1), 0 == s.length && (delete e.a[n], e.b--))) : (e = e && Vt(e)) && (n = e.a[n.toString()], (r = (e = -1) < (e = n ? Ct(n, r, i, o) : e) ? n[e] : null) && Lt(r));\n        }(this, t, e, n, r);\n      }, N.H = function () {\n        if (Bt.X.H.call(this), this.c) {\n          var t,\n              e = this.c;\n\n          for (t in e.a) {\n            for (var n = e.a[t], r = 0; r < n.length; r++) {\n              At(n[r]);\n            }\n\n            delete e.a[t], e.b--;\n          }\n        }\n\n        this.D = null;\n      }, N.wa = function (t, e, n, r) {\n        return this.c.add(String(t), e, !1, n, r);\n      }, N.xa = function (t, e, n, r) {\n        return this.c.add(String(t), e, !0, n, r);\n      };\n      var Gt = k.JSON.stringify;\n\n      function Qt() {\n        this.b = this.a = null;\n      }\n\n      var Ht,\n          zt = (Wt.prototype.get = function () {\n        var t;\n        return 0 < this.b ? (this.b--, t = this.a, this.a = t.next, t.next = null) : t = this.c(), t;\n      }, new Wt(function () {\n        return new Yt();\n      }, function (t) {\n        t.reset();\n      }));\n\n      function Wt(t, e) {\n        this.c = t, this.f = e, this.b = 0, this.a = null;\n      }\n\n      function Yt() {\n        this.next = this.b = this.a = null;\n      }\n\n      function Xt(t, e) {\n        var n;\n        Ht || (n = k.Promise.resolve(void 0), Ht = function Ht() {\n          n.then(Zt);\n        }), $t || (Ht(), $t = !0), Jt.add(t, e);\n      }\n\n      Qt.prototype.add = function (t, e) {\n        var n = zt.get();\n        n.set(t, e), this.b ? this.b.next = n : this.a = n, this.b = n;\n      }, Yt.prototype.set = function (t, e) {\n        this.a = t, this.b = e, this.next = null;\n      };\n      var $t = !(Yt.prototype.reset = function () {\n        this.next = this.b = this.a = null;\n      }),\n          Jt = new Qt();\n\n      function Zt() {\n        for (var t; e = t = void 0, e = null, (t = Jt).a && (e = t.a, t.a = t.a.next, t.a || (t.b = null), e.next = null), t = e;) {\n          try {\n            t.a.call(t.b);\n          } catch (t) {\n            !function (t) {\n              k.setTimeout(function () {\n                throw t;\n              }, 0);\n            }(t);\n          }\n\n          var e = zt;\n          e.f(t), e.b < 100 && (e.b++, t.next = e.a, e.a = t);\n        }\n\n        $t = !1;\n      }\n\n      function te(t, e) {\n        Bt.call(this), this.b = t || 1, this.a = e || k, this.f = V(this.eb, this), this.g = q();\n      }\n\n      function ee(t) {\n        t.aa = !1, t.M && (t.a.clearTimeout(t.M), t.M = null);\n      }\n\n      function ne(t, e, n) {\n        if (\"function\" == typeof t) n && (t = V(t, n));else {\n          if (!t || \"function\" != typeof t.handleEvent) throw Error(\"Invalid listener argument\");\n          t = V(t.handleEvent, t);\n        }\n        return 2147483647 < Number(e) ? -1 : k.setTimeout(t, e || 0);\n      }\n\n      B(te, Bt), (N = te.prototype).aa = !1, N.M = null, N.eb = function () {\n        var t;\n        this.aa && (0 < (t = q() - this.g) && t < .8 * this.b ? this.M = this.a.setTimeout(this.f, this.b - t) : (this.M && (this.a.clearTimeout(this.M), this.M = null), jt(this, \"tick\"), this.aa && (ee(this), this.start())));\n      }, N.start = function () {\n        this.aa = !0, this.M || (this.M = this.a.setTimeout(this.f, this.b), this.g = q());\n      }, N.H = function () {\n        te.X.H.call(this), ee(this), delete this.a;\n      };\n      var re,\n          ie,\n          oe,\n          se = (_S(ie = ue, oe = re = j), ie.prototype = null === oe ? Object.create(oe) : (ae.prototype = oe.prototype, new ae()), ue.prototype.f = function (t) {\n        this.b = arguments, this.a ? this.c = !0 : function t(e) {\n          e.a = ne(function () {\n            e.a = null, e.c && (e.c = !1, t(e));\n          }, e.h);\n          var n = e.b;\n          e.b = null, e.g.apply(null, n);\n        }(this);\n      }, ue.prototype.H = function () {\n        re.prototype.H.call(this), this.a && (k.clearTimeout(this.a), this.a = null, this.c = !1, this.b = null);\n      }, ue);\n\n      function ae() {\n        this.constructor = ie;\n      }\n\n      function ue(t, e) {\n        var n = re.call(this) || this;\n        return n.g = t, n.h = e, n.b = null, n.c = !1, n.a = null, n;\n      }\n\n      function ce(t) {\n        j.call(this), this.b = t, this.a = {};\n      }\n\n      B(ce, j);\n      var he = [];\n\n      function le(t, e, n, r) {\n        Array.isArray(n) || (n && (he[0] = n.toString()), n = he);\n\n        for (var i = 0; i < n.length; i++) {\n          var o = xt(e, n[i], r || t.handleEvent, !1, t.b || t);\n          if (!o) break;\n          t.a[o.key] = o;\n        }\n      }\n\n      function fe(t) {\n        Z(t.a, function (t, e) {\n          this.a.hasOwnProperty(e) && Lt(t);\n        }, t), t.a = {};\n      }\n\n      function de() {\n        this.a = !0;\n      }\n\n      function pe(t, e, n, r) {\n        t.info(function () {\n          return \"XMLHTTP TEXT (\" + e + \"): \" + function (t, e) {\n            if (!t.a) return e;\n            if (!e) return null;\n\n            try {\n              var n = JSON.parse(e);\n              if (n) for (t = 0; t < n.length; t++) {\n                if (Array.isArray(n[t])) {\n                  var r = n[t];\n\n                  if (!(r.length < 2)) {\n                    var i = r[1];\n\n                    if (Array.isArray(i) && !(i.length < 1)) {\n                      var o = i[0];\n                      if (\"noop\" != o && \"stop\" != o && \"close\" != o) for (var s = 1; s < i.length; s++) {\n                        i[s] = \"\";\n                      }\n                    }\n                  }\n                }\n              }\n              return Gt(n);\n            } catch (t) {\n              return e;\n            }\n          }(t, n) + (r ? \" \" + r : \"\");\n        });\n      }\n\n      ce.prototype.H = function () {\n        ce.X.H.call(this), fe(this);\n      }, ce.prototype.handleEvent = function () {\n        throw Error(\"EventHandler.handleEvent not implemented\");\n      }, de.prototype.info = function () {};\n      var ye = {},\n          ge = null;\n\n      function me() {\n        return ge = ge || new Bt();\n      }\n\n      function ve(t) {\n        wt.call(this, ye.Ga, t);\n      }\n\n      function be() {\n        var t = me();\n        jt(t, new ve(t));\n      }\n\n      function we(t, e) {\n        wt.call(this, ye.STAT_EVENT, t), this.stat = e;\n      }\n\n      function Ee(t) {\n        var e = me();\n        jt(e, new we(e, t));\n      }\n\n      function Te(t) {\n        wt.call(this, ye.Ha, t);\n      }\n\n      function Ie(t, e) {\n        if (\"function\" != typeof t) throw Error(\"Fn must not be null and must be a function\");\n        return k.setTimeout(function () {\n          t();\n        }, e);\n      }\n\n      ye.Ga = \"serverreachability\", B(ve, wt), ye.STAT_EVENT = \"statevent\", B(we, wt), ye.Ha = \"timingevent\", B(Te, wt);\n      var _e = {\n        NO_ERROR: 0,\n        fb: 1,\n        sb: 2,\n        rb: 3,\n        mb: 4,\n        qb: 5,\n        tb: 6,\n        Ea: 7,\n        TIMEOUT: 8,\n        wb: 9\n      },\n          Se = {\n        kb: \"complete\",\n        Gb: \"success\",\n        Fa: \"error\",\n        Ea: \"abort\",\n        yb: \"ready\",\n        zb: \"readystatechange\",\n        TIMEOUT: \"timeout\",\n        ub: \"incrementaldata\",\n        xb: \"progress\",\n        nb: \"downloadprogress\",\n        Ob: \"uploadprogress\"\n      };\n\n      function Ae() {}\n\n      function Ne(t) {\n        return t.b || (t.b = t.c());\n      }\n\n      function De() {}\n\n      Ae.prototype.b = null;\n      D = {\n        OPEN: \"a\",\n        jb: \"b\",\n        Fa: \"c\",\n        vb: \"d\"\n      };\n\n      function Ce() {\n        wt.call(this, \"d\");\n      }\n\n      function ke() {\n        wt.call(this, \"c\");\n      }\n\n      function Re() {}\n\n      function xe(t, e, n, r) {\n        this.g = t, this.c = e, this.f = n, this.S = r || 1, this.J = new ce(this), this.P = Le, this.R = new te(t = ut ? 125 : void 0), this.B = null, this.b = !1, this.j = this.l = this.i = this.G = this.u = this.T = this.o = null, this.s = [], this.a = null, this.D = 0, this.h = this.m = null, this.N = -1, this.A = !1, this.O = 0, this.F = null, this.V = this.C = this.U = this.I = !1;\n      }\n\n      B(Ce, wt), B(ke, wt), B(Re, Ae), Re.prototype.a = function () {\n        return new XMLHttpRequest();\n      }, Re.prototype.c = function () {\n        return {};\n      };\n      var Oe = new Re(),\n          Le = 45e3,\n          Pe = {},\n          Me = {};\n\n      function Fe(t, e, n) {\n        t.G = 1, t.i = on(Je(e)), t.j = n, t.I = !0, Ve(t, null);\n      }\n\n      function Ve(t, e) {\n        t.u = q(), qe(t), t.l = Je(t.i);\n        var s,\n            a,\n            u,\n            c,\n            h,\n            l,\n            n = t.l,\n            r = t.S;\n        Array.isArray(r) || (r = [String(r)]), vn(n.b, \"t\", r), t.D = 0, t.a = fr(t.g, t.g.C ? e : null), 0 < t.O && (t.F = new se(V(t.Da, t, t.a), t.O)), le(t.J, t.a, \"readystatechange\", t.bb), e = t.B ? tt(t.B) : {}, t.j ? (t.m || (t.m = \"POST\"), e[\"Content-Type\"] = \"application/x-www-form-urlencoded\", t.a.ba(t.l, t.m, t.j, e)) : (t.m = \"GET\", t.a.ba(t.l, t.m, null, e)), be(), s = t.c, a = t.m, u = t.l, c = t.f, h = t.S, l = t.j, s.info(function () {\n          if (s.a) {\n            if (l) for (var t = \"\", e = l.split(\"&\"), n = 0; n < e.length; n++) {\n              var r,\n                  i,\n                  o = e[n].split(\"=\");\n              1 < o.length && (r = o[0], o = o[1], t = 2 <= (i = r.split(\"_\")).length && \"type\" == i[1] ? t + (r + \"=\") + o + \"&\" : t + (r + \"=redacted&\"));\n            } else t = null;\n          } else t = l;\n          return \"XMLHTTP REQ (\" + c + \") [attempt \" + h + \"]: \" + a + \"\\n\" + u + \"\\n\" + t;\n        });\n      }\n\n      function Ue(t, e, n) {\n        for (var r, i, o, s = !0; !t.A && t.D < n.length;) {\n          var a = (a = n, o = i = void 0, i = (r = t).D, -1 == (o = a.indexOf(\"\\n\", i)) ? Me : (i = Number(a.substring(i, o)), isNaN(i) ? Pe : (o += 1) + i > a.length ? Me : (a = a.substr(o, i), r.D = o + i, a)));\n\n          if (a == Me) {\n            4 == e && (t.h = 4, Ee(14), s = !1), pe(t.c, t.f, null, \"[Incomplete Response]\");\n            break;\n          }\n\n          if (a == Pe) {\n            t.h = 4, Ee(15), pe(t.c, t.f, n, \"[Invalid Chunk]\"), s = !1;\n            break;\n          }\n\n          pe(t.c, t.f, a, null), Qe(t, a);\n        }\n\n        4 == e && 0 == n.length && (t.h = 1, Ee(16), s = !1), t.b = t.b && s, s ? 0 < n.length && !t.V && (t.V = !0, (e = t.g).a == t && e.U && !e.F && (e.c.info(\"Great, no buffering proxy detected. Bytes received: \" + n.length), ir(e), e.F = !0, Ee(11))) : (pe(t.c, t.f, n, \"[Invalid Chunked Response]\"), Ge(t), Ke(t));\n      }\n\n      function qe(t) {\n        t.T = q() + t.P, Be(t, t.P);\n      }\n\n      function Be(t, e) {\n        if (null != t.o) throw Error(\"WatchDog timer not null\");\n        t.o = Ie(V(t.$a, t), e);\n      }\n\n      function je(t) {\n        t.o && (k.clearTimeout(t.o), t.o = null);\n      }\n\n      function Ke(t) {\n        0 == t.g.v || t.A || ar(t.g, t);\n      }\n\n      function Ge(t) {\n        je(t);\n        var e = t.F;\n        e && \"function\" == typeof e.ka && e.ka(), t.F = null, ee(t.R), fe(t.J), t.a && (e = t.a, t.a = null, e.abort(), e.ka());\n      }\n\n      function Qe(t, e) {\n        try {\n          var n,\n              r,\n              i,\n              o,\n              s,\n              a,\n              u,\n              c,\n              h,\n              l,\n              f,\n              d = t.g;\n          if (0 != d.v && (d.a == t || Sn(d.b, t))) if (d.I = t.N, !t.C && Sn(d.b, t) && 3 == d.v) {\n            try {\n              var p = d.la.a.parse(e);\n            } catch (t) {\n              p = null;\n            }\n\n            if (Array.isArray(p) && 3 == p.length) {\n              var y = p;\n\n              if (0 == y[0]) {\n                t: if (!d.j) {\n                  if (d.a) {\n                    if (!(d.a.u + 3e3 < t.u)) break t;\n                    sr(d), Yn(d);\n                  }\n\n                  rr(d), Ee(18);\n                }\n              } else d.pa = y[1], 0 < d.pa - d.P && y[2] < 37500 && d.G && 0 == d.o && !d.m && (d.m = Ie(V(d.Xa, d), 6e3));\n\n              if (_n(d.b) <= 1 && d.fa) {\n                try {\n                  d.fa();\n                } catch (t) {}\n\n                d.fa = void 0;\n              }\n            } else cr(d, 11);\n          } else if (!t.C && d.a != t || sr(d), !z(e)) for (e = p = d.la.a.parse(e), p = 0; p < e.length; p++) {\n            y = e[p], d.P = y[0], y = y[1], 2 == d.v ? \"c\" == y[0] ? (d.J = y[1], d.ha = y[2], null != (n = y[3]) && (d.ia = n, d.c.info(\"VER=\" + d.ia)), null != (r = y[4]) && (d.qa = r, d.c.info(\"SVER=\" + d.qa)), null != (i = y[5]) && \"number\" == typeof i && 0 < i && (o = 1.5 * i, d.D = o, d.c.info(\"backChannelRequestTimeoutMs_=\" + o)), o = d, (s = t.a) && (!(a = s.a ? s.a.getResponseHeader(\"X-Client-Wire-Protocol\") : null) || !(u = o.b).a && (X(a, \"spdy\") || X(a, \"quic\") || X(a, \"h2\")) && (u.f = u.g, u.a = new Set(), u.b && (An(u, u.b), u.b = null)), !o.A || (c = s.a ? s.a.getResponseHeader(\"X-HTTP-Session-Id\") : null) && (o.oa = c, rn(o.B, o.A, c))), d.v = 3, d.f && d.f.ua(), d.U && (d.N = q() - t.u, d.c.info(\"Handshake RTT: \" + d.N + \"ms\")), h = t, (o = d).ma = lr(o, o.C ? o.ha : null, o.ga), h.C ? (Nn(o.b, h), l = h, (f = o.D) && l.setTimeout(f), l.o && (je(l), qe(l)), o.a = h) : nr(o), 0 < d.g.length && Jn(d)) : \"stop\" != y[0] && \"close\" != y[0] || cr(d, 7) : 3 == d.v && (\"stop\" == y[0] || \"close\" == y[0] ? \"stop\" == y[0] ? cr(d, 7) : Wn(d) : \"noop\" != y[0] && d.f && d.f.ta(y), d.o = 0);\n          }\n          be();\n        } catch (t) {}\n      }\n\n      function He(t, e) {\n        if (t.forEach && \"function\" == typeof t.forEach) t.forEach(e, void 0);else if (x(t) || \"string\" == typeof t) G(t, e, void 0);else {\n          if (t.L && \"function\" == typeof t.L) var n = t.L();else if (t.K && \"function\" == typeof t.K) n = void 0;else if (x(t) || \"string\" == typeof t) for (var n = [], r = t.length, i = 0; i < r; i++) {\n            n.push(i);\n          } else for (i in n = [], r = 0, t) {\n            n[r++] = i;\n          }\n\n          for (var i = (r = function (t) {\n            if (t.K && \"function\" == typeof t.K) return t.K();\n            if (\"string\" == typeof t) return t.split(\"\");\n\n            if (x(t)) {\n              for (var e = [], n = t.length, r = 0; r < n; r++) {\n                e.push(t[r]);\n              }\n\n              return e;\n            }\n\n            for (r in e = [], n = 0, t) {\n              e[n++] = t[r];\n            }\n\n            return e;\n          }(t)).length, o = 0; o < i; o++) {\n            e.call(void 0, r[o], n && n[o], t);\n          }\n        }\n      }\n\n      function ze(t, e) {\n        this.b = {}, this.a = [], this.c = 0;\n        var n = arguments.length;\n\n        if (1 < n) {\n          if (n % 2) throw Error(\"Uneven number of arguments\");\n\n          for (var r = 0; r < n; r += 2) {\n            this.set(arguments[r], arguments[r + 1]);\n          }\n        } else if (t) if (t instanceof ze) for (n = t.L(), r = 0; r < n.length; r++) {\n          this.set(n[r], t.get(n[r]));\n        } else for (r in t) {\n          this.set(r, t[r]);\n        }\n      }\n\n      function We(t) {\n        if (t.c != t.a.length) {\n          for (var e = 0, n = 0; e < t.a.length;) {\n            var r = t.a[e];\n            Ye(t.b, r) && (t.a[n++] = r), e++;\n          }\n\n          t.a.length = n;\n        }\n\n        if (t.c != t.a.length) {\n          for (var i = {}, n = e = 0; e < t.a.length;) {\n            Ye(i, r = t.a[e]) || (i[t.a[n++] = r] = 1), e++;\n          }\n\n          t.a.length = n;\n        }\n      }\n\n      function Ye(t, e) {\n        return Object.prototype.hasOwnProperty.call(t, e);\n      }\n\n      (N = xe.prototype).setTimeout = function (t) {\n        this.P = t;\n      }, N.bb = function (t) {\n        t = t.target;\n        var e = this.F;\n        e && 3 == Gn(t) ? e.f() : this.Da(t);\n      }, N.Da = function (t) {\n        try {\n          if (t == this.a) t: {\n            var e = Gn(this.a),\n                n = this.a.va();\n            this.a.W();\n\n            if (!(e < 3 || 3 == e && !ut && !this.a.$())) {\n              this.A || 4 != e || 7 == n || be(), je(this);\n              var r = this.a.W();\n              this.N = r;\n              var i = this.a.$();\n\n              if (this.b = 200 == r, u = this.c, c = this.m, h = this.l, l = this.f, f = this.S, d = e, p = r, u.info(function () {\n                return \"XMLHTTP RESP (\" + l + \") [ attempt \" + f + \"]: \" + c + \"\\n\" + h + \"\\n\" + d + \" \" + p;\n              }), this.b) {\n                if (this.U && !this.C) {\n                  e: {\n                    if (this.a) {\n                      var o,\n                          s = this.a;\n\n                      if ((o = s.a ? s.a.getResponseHeader(\"X-HTTP-Initial-Response\") : null) && !z(o)) {\n                        var a = o;\n                        break e;\n                      }\n                    }\n\n                    a = null;\n                  }\n\n                  if (!a) {\n                    this.b = !1, this.h = 3, Ee(12), Ge(this), Ke(this);\n                    break t;\n                  }\n\n                  pe(this.c, this.f, a, \"Initial handshake response via X-HTTP-Initial-Response\"), this.C = !0, Qe(this, a);\n                }\n\n                this.I ? (Ue(this, e, i), ut && this.b && 3 == e && (le(this.J, this.R, \"tick\", this.ab), this.R.start())) : (pe(this.c, this.f, i, null), Qe(this, i)), 4 == e && Ge(this), this.b && !this.A && (4 == e ? ar(this.g, this) : (this.b = !1, qe(this)));\n              } else 400 == r && 0 < i.indexOf(\"Unknown SID\") ? (this.h = 3, Ee(12)) : (this.h = 0, Ee(13)), Ge(this), Ke(this);\n            }\n          }\n        } catch (t) {}\n\n        var u, c, h, l, f, d, p;\n      }, N.ab = function () {\n        var t, e;\n        this.a && (t = Gn(this.a), e = this.a.$(), this.D < e.length && (je(this), Ue(this, t, e), this.b && 4 != t && qe(this)));\n      }, N.cancel = function () {\n        this.A = !0, Ge(this);\n      }, N.$a = function () {\n        this.o = null;\n        var t,\n            e,\n            n = q();\n        0 <= n - this.T ? (t = this.c, e = this.l, t.info(function () {\n          return \"TIMEOUT: \" + e;\n        }), 2 != this.G && (be(), Ee(17)), Ge(this), this.h = 2, Ke(this)) : Be(this, this.T - n);\n      }, (N = ze.prototype).K = function () {\n        We(this);\n\n        for (var t = [], e = 0; e < this.a.length; e++) {\n          t.push(this.b[this.a[e]]);\n        }\n\n        return t;\n      }, N.L = function () {\n        return We(this), this.a.concat();\n      }, N.get = function (t, e) {\n        return Ye(this.b, t) ? this.b[t] : e;\n      }, N.set = function (t, e) {\n        Ye(this.b, t) || (this.c++, this.a.push(t)), this.b[t] = e;\n      }, N.forEach = function (t, e) {\n        for (var n = this.L(), r = 0; r < n.length; r++) {\n          var i = n[r],\n              o = this.get(i);\n          t.call(e, o, i, this);\n        }\n      };\n      var Xe = /^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;\n\n      function $e(t, e) {\n        var n;\n        this.c = this.j = this.f = \"\", this.h = null, this.i = this.g = \"\", this.a = !1, t instanceof $e ? (this.a = void 0 !== e ? e : t.a, Ze(this, t.f), this.j = t.j, tn(this, t.c), en(this, t.h), this.g = t.g, e = t.b, (n = new pn()).c = e.c, e.a && (n.a = new ze(e.a), n.b = e.b), nn(this, n), this.i = t.i) : t && (n = String(t).match(Xe)) ? (this.a = !!e, Ze(this, n[1] || \"\", !0), this.j = sn(n[2] || \"\"), tn(this, n[3] || \"\", !0), en(this, n[4]), this.g = sn(n[5] || \"\", !0), nn(this, n[6] || \"\", !0), this.i = sn(n[7] || \"\")) : (this.a = !!e, this.b = new pn(null, this.a));\n      }\n\n      function Je(t) {\n        return new $e(t);\n      }\n\n      function Ze(t, e, n) {\n        t.f = n ? sn(e, !0) : e, t.f && (t.f = t.f.replace(/:$/, \"\"));\n      }\n\n      function tn(t, e, n) {\n        t.c = n ? sn(e, !0) : e;\n      }\n\n      function en(t, e) {\n        if (e) {\n          if (e = Number(e), isNaN(e) || e < 0) throw Error(\"Bad port number \" + e);\n          t.h = e;\n        } else t.h = null;\n      }\n\n      function nn(t, e, n) {\n        var r, i;\n        e instanceof pn ? (t.b = e, r = t.b, (i = t.a) && !r.f && (yn(r), r.c = null, r.a.forEach(function (t, e) {\n          var n = e.toLowerCase();\n          e != n && (gn(this, e), vn(this, n, t));\n        }, r)), r.f = i) : (n || (e = an(e, fn)), t.b = new pn(e, t.a));\n      }\n\n      function rn(t, e, n) {\n        t.b.set(e, n);\n      }\n\n      function on(t) {\n        return rn(t, \"zx\", Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ q()).toString(36)), t;\n      }\n\n      function sn(t, e) {\n        return t ? e ? decodeURI(t.replace(/%25/g, \"%2525\")) : decodeURIComponent(t) : \"\";\n      }\n\n      function an(t, e, n) {\n        return \"string\" == typeof t ? (t = encodeURI(t).replace(e, un), t = n ? t.replace(/%25([0-9a-fA-F]{2})/g, \"%$1\") : t) : null;\n      }\n\n      function un(t) {\n        return \"%\" + ((t = t.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & t).toString(16);\n      }\n\n      $e.prototype.toString = function () {\n        var t = [],\n            e = this.f;\n        e && t.push(an(e, cn, !0), \":\");\n        var n = this.c;\n        return !n && \"file\" != e || (t.push(\"//\"), (e = this.j) && t.push(an(e, cn, !0), \"@\"), t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), null != (n = this.h) && t.push(\":\", String(n))), (n = this.g) && (this.c && \"/\" != n.charAt(0) && t.push(\"/\"), t.push(an(n, \"/\" == n.charAt(0) ? ln : hn, !0))), (n = this.b.toString()) && t.push(\"?\", n), (n = this.i) && t.push(\"#\", an(n, dn)), t.join(\"\");\n      };\n\n      var cn = /[#\\/\\?@]/g,\n          hn = /[#\\?:]/g,\n          ln = /[#\\?]/g,\n          fn = /[#\\?@]/g,\n          dn = /#/g;\n\n      function pn(t, e) {\n        this.b = this.a = null, this.c = t || null, this.f = !!e;\n      }\n\n      function yn(n) {\n        n.a || (n.a = new ze(), n.b = 0, n.c && function (t, e) {\n          if (t) {\n            t = t.split(\"&\");\n\n            for (var n = 0; n < t.length; n++) {\n              var r,\n                  i = t[n].indexOf(\"=\"),\n                  o = null;\n              0 <= i ? (r = t[n].substring(0, i), o = t[n].substring(i + 1)) : r = t[n], e(r, o ? decodeURIComponent(o.replace(/\\+/g, \" \")) : \"\");\n            }\n          }\n        }(n.c, function (t, e) {\n          n.add(decodeURIComponent(t.replace(/\\+/g, \" \")), e);\n        }));\n      }\n\n      function gn(t, e) {\n        yn(t), e = bn(t, e), Ye(t.a.b, e) && (t.c = null, t.b -= t.a.get(e).length, Ye((t = t.a).b, e) && (delete t.b[e], t.c--, t.a.length > 2 * t.c && We(t)));\n      }\n\n      function mn(t, e) {\n        return yn(t), e = bn(t, e), Ye(t.a.b, e);\n      }\n\n      function vn(t, e, n) {\n        gn(t, e), 0 < n.length && (t.c = null, t.a.set(bn(t, e), H(n)), t.b += n.length);\n      }\n\n      function bn(t, e) {\n        return e = String(e), e = t.f ? e.toLowerCase() : e;\n      }\n\n      (N = pn.prototype).add = function (t, e) {\n        yn(this), this.c = null, t = bn(this, t);\n        var n = this.a.get(t);\n        return n || this.a.set(t, n = []), n.push(e), this.b += 1, this;\n      }, N.forEach = function (n, r) {\n        yn(this), this.a.forEach(function (t, e) {\n          G(t, function (t) {\n            n.call(r, t, e, this);\n          }, this);\n        }, this);\n      }, N.L = function () {\n        yn(this);\n\n        for (var t = this.a.K(), e = this.a.L(), n = [], r = 0; r < e.length; r++) {\n          for (var i = t[r], o = 0; o < i.length; o++) {\n            n.push(e[r]);\n          }\n        }\n\n        return n;\n      }, N.K = function (t) {\n        yn(this);\n        var e = [];\n        if (\"string\" == typeof t) mn(this, t) && (e = Q(e, this.a.get(bn(this, t))));else {\n          t = this.a.K();\n\n          for (var n = 0; n < t.length; n++) {\n            e = Q(e, t[n]);\n          }\n        }\n        return e;\n      }, N.set = function (t, e) {\n        return yn(this), this.c = null, mn(this, t = bn(this, t)) && (this.b -= this.a.get(t).length), this.a.set(t, [e]), this.b += 1, this;\n      }, N.get = function (t, e) {\n        return t && 0 < (t = this.K(t)).length ? String(t[0]) : e;\n      }, N.toString = function () {\n        if (this.c) return this.c;\n        if (!this.a) return \"\";\n\n        for (var t = [], e = this.a.L(), n = 0; n < e.length; n++) {\n          for (var r = e[n], i = encodeURIComponent(String(r)), r = this.K(r), o = 0; o < r.length; o++) {\n            var s = i;\n            \"\" !== r[o] && (s += \"=\" + encodeURIComponent(String(r[o]))), t.push(s);\n          }\n        }\n\n        return this.c = t.join(\"&\");\n      };\n\n      var wn = function wn(t, e) {\n        this.b = t, this.a = e;\n      };\n\n      function En(t) {\n        this.g = t || Tn, t = k.PerformanceNavigationTiming ? 0 < (t = k.performance.getEntriesByType(\"navigation\")).length && (\"hq\" == t[0].nextHopProtocol || \"h2\" == t[0].nextHopProtocol) : !!(k.ja && k.ja.za && k.ja.za() && k.ja.za().Qb), this.f = t ? this.g : 1, this.a = null, 1 < this.f && (this.a = new Set()), this.b = null, this.c = [];\n      }\n\n      var Tn = 10;\n\n      function In(t) {\n        return t.b || t.a && t.a.size >= t.f;\n      }\n\n      function _n(t) {\n        return t.b ? 1 : t.a ? t.a.size : 0;\n      }\n\n      function Sn(t, e) {\n        return t.b ? t.b == e : t.a && t.a.has(e);\n      }\n\n      function An(t, e) {\n        t.a ? t.a.add(e) : t.b = e;\n      }\n\n      function Nn(t, e) {\n        t.b && t.b == e ? t.b = null : t.a && t.a.has(e) && t.a.delete(e);\n      }\n\n      function Dn(t) {\n        var e, n;\n        if (null != t.b) return t.c.concat(t.b.s);\n        if (null == t.a || 0 === t.a.size) return H(t.c);\n        var r = t.c;\n\n        try {\n          for (var i = A(t.a.values()), o = i.next(); !o.done; o = i.next()) {\n            var s = o.value,\n                r = r.concat(s.s);\n          }\n        } catch (t) {\n          e = {\n            error: t\n          };\n        } finally {\n          try {\n            o && !o.done && (n = i.return) && n.call(i);\n          } finally {\n            if (e) throw e.error;\n          }\n        }\n\n        return r;\n      }\n\n      function Cn() {}\n\n      function kn() {\n        this.a = new Cn();\n      }\n\n      function Rn(t, e, n, r, i) {\n        try {\n          e.onload = null, e.onerror = null, e.onabort = null, e.ontimeout = null, i(r);\n        } catch (t) {}\n      }\n\n      En.prototype.cancel = function () {\n        var e, t;\n        if (this.c = Dn(this), this.b) this.b.cancel(), this.b = null;else if (this.a && 0 !== this.a.size) {\n          try {\n            for (var n = A(this.a.values()), r = n.next(); !r.done; r = n.next()) {\n              r.value.cancel();\n            }\n          } catch (t) {\n            e = {\n              error: t\n            };\n          } finally {\n            try {\n              r && !r.done && (t = n.return) && t.call(n);\n            } finally {\n              if (e) throw e.error;\n            }\n          }\n\n          this.a.clear();\n        }\n      }, Cn.prototype.stringify = function (t) {\n        return k.JSON.stringify(t, void 0);\n      }, Cn.prototype.parse = function (t) {\n        return k.JSON.parse(t, void 0);\n      };\n      var xn = k.JSON.parse;\n\n      function On(t) {\n        Bt.call(this), this.headers = new ze(), this.l = t || null, this.b = !1, this.u = this.a = null, this.C = \"\", this.h = 0, this.f = \"\", this.g = this.B = this.m = this.A = !1, this.s = 0, this.o = null, this.I = Pn, this.F = this.G = !1;\n      }\n\n      B(On, Bt);\n      var Ln,\n          Pn = \"\",\n          Mn = /^https?$/i,\n          Fn = [\"POST\", \"PUT\"];\n\n      function Vn(t) {\n        return \"content-type\" == t.toLowerCase();\n      }\n\n      function Un(t, e) {\n        t.b = !1, t.a && (t.g = !0, t.a.abort(), t.g = !1), t.f = e, t.h = 5, qn(t), jn(t);\n      }\n\n      function qn(t) {\n        t.A || (t.A = !0, jt(t, \"complete\"), jt(t, \"error\"));\n      }\n\n      function Bn(t) {\n        if (t.b && void 0 !== C && (!t.u[1] || 4 != Gn(t) || 2 != t.W())) if (t.m && 4 == Gn(t)) ne(t.Aa, 0, t);else if (jt(t, \"readystatechange\"), 4 == Gn(t)) {\n          t.b = !1;\n\n          try {\n            var e,\n                n,\n                r,\n                i,\n                o = t.W();\n\n            t: switch (o) {\n              case 200:\n              case 201:\n              case 202:\n              case 204:\n              case 206:\n              case 304:\n              case 1223:\n                var s = !0;\n                break t;\n\n              default:\n                s = !1;\n            }\n\n            if ((e = s) || ((n = 0 === o) && (!(i = String(t.C).match(Xe)[1] || null) && k.self && k.self.location && (i = (r = k.self.location.protocol).substr(0, r.length - 1)), n = !Mn.test(i ? i.toLowerCase() : \"\")), e = n), e) jt(t, \"complete\"), jt(t, \"success\");else {\n              t.h = 6;\n\n              try {\n                var a = 2 < Gn(t) ? t.a.statusText : \"\";\n              } catch (o) {\n                a = \"\";\n              }\n\n              t.f = a + \" [\" + t.W() + \"]\", qn(t);\n            }\n          } finally {\n            jn(t);\n          }\n        }\n      }\n\n      function jn(t, e) {\n        if (t.a) {\n          Kn(t);\n          var n = t.a,\n              r = t.u[0] ? R : null;\n          t.a = null, t.u = null, e || jt(t, \"ready\");\n\n          try {\n            n.onreadystatechange = r;\n          } catch (t) {}\n        }\n      }\n\n      function Kn(t) {\n        t.a && t.F && (t.a.ontimeout = null), t.o && (k.clearTimeout(t.o), t.o = null);\n      }\n\n      function Gn(t) {\n        return t.a ? t.a.readyState : 0;\n      }\n\n      function Qn(t, e, n) {\n        t: {\n          for (r in n) {\n            var r = !1;\n            break t;\n          }\n\n          r = !0;\n        }\n\n        var i;\n        r || (i = \"\", Z(n, function (t, e) {\n          i += e, i += \":\", i += t, i += \"\\r\\n\";\n        }), n = i, \"string\" == typeof t ? null != n && encodeURIComponent(String(n)) : rn(t, e, n));\n      }\n\n      function Hn(t, e, n) {\n        return n && n.internalChannelParams && n.internalChannelParams[t] || e;\n      }\n\n      function zn(t) {\n        this.qa = 0, this.g = [], this.c = new de(), this.ha = this.ma = this.B = this.ga = this.a = this.oa = this.A = this.V = this.i = this.O = this.l = null, this.Pa = this.R = 0, this.Ma = Hn(\"failFast\", !1, t), this.G = this.m = this.j = this.h = this.f = null, this.S = !0, this.I = this.pa = this.P = -1, this.T = this.o = this.u = 0, this.Ia = Hn(\"baseRetryDelayMs\", 5e3, t), this.Sa = Hn(\"retryDelaySeedMs\", 1e4, t), this.Na = Hn(\"forwardChannelMaxRetries\", 2, t), this.na = Hn(\"forwardChannelRequestTimeoutMs\", 2e4, t), this.Oa = t && t.xmlHttpFactory || void 0, this.D = void 0, this.C = t && t.supportsCrossDomainXhr || !1, this.J = \"\", this.b = new En(t && t.concurrentRequestLimit), this.la = new kn(), this.ea = t && t.fastHandshake || !1, this.Ja = t && t.b || !1, t && t.f && (this.c.a = !1), t && t.forceLongPolling && (this.S = !1), this.U = !this.ea && this.S && t && t.detectBufferingProxy || !1, this.fa = void 0, this.N = 0, this.F = !1, this.s = null, (this.La = t && t.c || !1) && this.c.info(\"Opt-in to enable Chrome Origin Trials.\");\n      }\n\n      function Wn(t) {\n        var e, n;\n        Xn(t), 3 == t.v && (e = t.R++, rn(n = Je(t.B), \"SID\", t.J), rn(n, \"RID\", e), rn(n, \"TYPE\", \"terminate\"), tr(t, n), (e = new xe(t, t.c, e, void 0)).G = 2, e.i = on(Je(n)), n = !1, !(n = k.navigator && k.navigator.sendBeacon ? k.navigator.sendBeacon(e.i.toString(), \"\") : n) && k.Image && (new Image().src = e.i, n = !0), n || (e.a = fr(e.g, null), e.a.ba(e.i)), e.u = q(), qe(e)), hr(t);\n      }\n\n      function Yn(t) {\n        t.a && (ir(t), t.a.cancel(), t.a = null);\n      }\n\n      function Xn(t) {\n        Yn(t), t.j && (k.clearTimeout(t.j), t.j = null), sr(t), t.b.cancel(), t.h && (\"number\" == typeof t.h && k.clearTimeout(t.h), t.h = null);\n      }\n\n      function $n(t, e) {\n        t.g.push(new wn(t.Pa++, e)), 3 == t.v && Jn(t);\n      }\n\n      function Jn(t) {\n        In(t.b) || t.h || (t.h = !0, Xt(t.Ca, t), t.u = 0);\n      }\n\n      function Zn(t, e) {\n        var n = e ? e.f : t.R++,\n            r = Je(t.B);\n        rn(r, \"SID\", t.J), rn(r, \"RID\", n), rn(r, \"AID\", t.P), tr(t, r), t.i && t.l && Qn(r, t.i, t.l), n = new xe(t, t.c, n, t.u + 1), null === t.i && (n.B = t.l), e && (t.g = e.s.concat(t.g)), e = er(t, n, 1e3), n.setTimeout(Math.round(.5 * t.na) + Math.round(.5 * t.na * Math.random())), An(t.b, n), Fe(n, r, e);\n      }\n\n      function tr(t, n) {\n        t.f && He({}, function (t, e) {\n          rn(n, e, t);\n        });\n      }\n\n      function er(t, e, n) {\n        n = Math.min(t.g.length, n);\n        var r = t.f ? V(t.f.Ka, t.f, t) : null;\n\n        t: for (var i = t.g, o = -1;;) {\n          var s = [\"count=\" + n];\n          -1 == o ? 0 < n ? (o = i[0].b, s.push(\"ofs=\" + o)) : o = 0 : s.push(\"ofs=\" + o);\n\n          for (var a = !0, u = 0; u < n; u++) {\n            var c = i[u].b,\n                h = i[u].a;\n            if ((c -= o) < 0) o = Math.max(0, i[u].b - 100), a = !1;else try {\n              !function (t, r, e) {\n                var i = e || \"\";\n\n                try {\n                  He(t, function (t, e) {\n                    var n = t;\n                    O(t) && (n = Gt(t)), r.push(i + e + \"=\" + encodeURIComponent(n));\n                  });\n                } catch (t) {\n                  throw r.push(i + \"type=\" + encodeURIComponent(\"_badmap\")), t;\n                }\n              }(h, s, \"req\" + c + \"_\");\n            } catch (t) {\n              r && r(h);\n            }\n          }\n\n          if (a) {\n            r = s.join(\"&\");\n            break t;\n          }\n        }\n\n        return t = t.g.splice(0, n), e.s = t, r;\n      }\n\n      function nr(t) {\n        t.a || t.j || (t.T = 1, Xt(t.Ba, t), t.o = 0);\n      }\n\n      function rr(t) {\n        return !(t.a || t.j || 3 <= t.o) && (t.T++, t.j = Ie(V(t.Ba, t), ur(t, t.o)), t.o++, 1);\n      }\n\n      function ir(t) {\n        null != t.s && (k.clearTimeout(t.s), t.s = null);\n      }\n\n      function or(t) {\n        t.a = new xe(t, t.c, \"rpc\", t.T), null === t.i && (t.a.B = t.l), t.a.O = 0;\n        var e = Je(t.ma);\n        rn(e, \"RID\", \"rpc\"), rn(e, \"SID\", t.J), rn(e, \"CI\", t.G ? \"0\" : \"1\"), rn(e, \"AID\", t.P), tr(t, e), rn(e, \"TYPE\", \"xmlhttp\"), t.i && t.l && Qn(e, t.i, t.l), t.D && t.a.setTimeout(t.D);\n        var n = t.a;\n        t = t.ha, n.G = 1, n.i = on(Je(e)), n.j = null, n.I = !0, Ve(n, t);\n      }\n\n      function sr(t) {\n        null != t.m && (k.clearTimeout(t.m), t.m = null);\n      }\n\n      function ar(t, e) {\n        var n,\n            r,\n            i,\n            o = null;\n\n        if (t.a == e) {\n          sr(t), ir(t), t.a = null;\n          var s = 2;\n        } else {\n          if (!Sn(t.b, e)) return;\n          o = e.s, Nn(t.b, e), s = 1;\n        }\n\n        if (t.I = e.N, 0 != t.v) if (e.b) 1 == s ? (o = e.j ? e.j.length : 0, e = q() - e.u, n = t.u, jt(s = me(), new Te(s)), Jn(t)) : nr(t);else if (3 == (n = e.h) || 0 == n && 0 < t.I || (1 != s || (i = e, _n((r = t).b) >= r.b.f - (r.h ? 1 : 0) || (r.h ? (r.g = i.s.concat(r.g), 0) : 1 == r.v || 2 == r.v || r.u >= (r.Ma ? 0 : r.Na) || (r.h = Ie(V(r.Ca, r, i), ur(r, r.u)), r.u++, 0)))) && (2 != s || !rr(t))) switch (o && 0 < o.length && (e = t.b, e.c = e.c.concat(o)), n) {\n          case 1:\n            cr(t, 5);\n            break;\n\n          case 4:\n            cr(t, 10);\n            break;\n\n          case 3:\n            cr(t, 6);\n            break;\n\n          default:\n            cr(t, 2);\n        }\n      }\n\n      function ur(t, e) {\n        var n = t.Ia + Math.floor(Math.random() * t.Sa);\n        return t.f || (n *= 2), n * e;\n      }\n\n      function cr(t, e) {\n        var n, r, i, o;\n        t.c.info(\"Error code \" + e), 2 == e ? (r = null, t.f && (r = null), o = V(t.cb, t), r || (r = new $e(\"//www.google.com/images/cleardot.gif\"), k.location && \"http\" == k.location.protocol || Ze(r, \"https\"), on(r)), n = r.toString(), r = o, o = new de(), k.Image ? ((i = new Image()).onload = U(Rn, o, i, \"TestLoadImage: loaded\", !0, r), i.onerror = U(Rn, o, i, \"TestLoadImage: error\", !1, r), i.onabort = U(Rn, o, i, \"TestLoadImage: abort\", !1, r), i.ontimeout = U(Rn, o, i, \"TestLoadImage: timeout\", !1, r), k.setTimeout(function () {\n          i.ontimeout && i.ontimeout();\n        }, 1e4), i.src = n) : r(!1)) : Ee(2), t.v = 0, t.f && t.f.sa(e), hr(t), Xn(t);\n      }\n\n      function hr(t) {\n        t.v = 0, t.I = -1, t.f && (0 == Dn(t.b).length && 0 == t.g.length || (t.b.c.length = 0, H(t.g), t.g.length = 0), t.f.ra());\n      }\n\n      function lr(t, e, n) {\n        var r,\n            i,\n            o,\n            s,\n            a,\n            u = (s = n) instanceof $e ? Je(s) : new $e(s, void 0);\n        return \"\" != u.c ? (e && tn(u, e + \".\" + u.c), en(u, u.h)) : (a = k.location, r = a.protocol, i = e ? e + \".\" + a.hostname : a.hostname, o = +a.port, s = n, a = new $e(null, void 0), r && Ze(a, r), i && tn(a, i), o && en(a, o), s && (a.g = s), u = a), t.V && Z(t.V, function (t, e) {\n          rn(u, e, t);\n        }), e = t.A, n = t.oa, e && n && rn(u, e, n), rn(u, \"VER\", t.ia), tr(t, u), u;\n      }\n\n      function fr(t, e) {\n        if (e && !t.C) throw Error(\"Can't create secondary domain capable XhrIo object.\");\n        return (e = new On(t.Oa)).G = t.C, e;\n      }\n\n      function dr() {}\n\n      function pr() {\n        if (st && !(10 <= Number(gt))) throw Error(\"Environmental error: no available transport.\");\n      }\n\n      function yr(t, e) {\n        Bt.call(this), this.a = new zn(e), this.g = t, this.b = e && e.messageUrlParams || null, t = e && e.messageHeaders || null, e && e.clientProtocolHeaderRequired && (t ? t[\"X-Client-Protocol\"] = \"webchannel\" : t = {\n          \"X-Client-Protocol\": \"webchannel\"\n        }), this.a.l = t, t = e && e.initMessageHeaders || null, e && e.messageContentType && (t ? t[\"X-WebChannel-Content-Type\"] = e.messageContentType : t = {\n          \"X-WebChannel-Content-Type\": e.messageContentType\n        }), e && e.a && (t ? t[\"X-WebChannel-Client-Profile\"] = e.a : t = {\n          \"X-WebChannel-Client-Profile\": e.a\n        }), this.a.O = t, (t = e && e.httpHeadersOverwriteParam) && !z(t) && (this.a.i = t), this.o = e && e.supportsCrossDomainXhr || !1, this.m = e && e.sendRawJson || !1, (e = e && e.httpSessionIdParam) && !z(e) && (this.a.A = e, null !== (t = this.b) && e in t && e in (t = this.b) && delete t[e]), this.f = new vr(this);\n      }\n\n      function gr(t) {\n        Ce.call(this);\n        var e = t.__sm__;\n\n        if (e) {\n          t: {\n            for (var n in e) {\n              t = n;\n              break t;\n            }\n\n            t = void 0;\n          }\n\n          (this.c = t) ? (t = this.c, this.data = null !== e && t in e ? e[t] : void 0) : this.data = e;\n        } else this.data = t;\n      }\n\n      function mr() {\n        ke.call(this), this.status = 1;\n      }\n\n      function vr(t) {\n        this.a = t;\n      }\n\n      function br(t) {\n        this.f = t;\n      }\n\n      function wr(t) {\n        Bt.call(this), this.u = t, this.h = void 0, this.readyState = Er, this.status = 0, this.responseType = this.responseText = this.statusText = \"\", this.onreadystatechange = null, this.l = new Headers(), this.b = null, this.s = \"GET\", this.o = \"\", this.a = !1, this.m = this.f = this.g = null;\n      }\n\n      (N = On.prototype).ba = function (t, e, n, r) {\n        if (this.a) throw Error(\"[goog.net.XhrIo] Object is active with another request=\" + this.C + \"; newUri=\" + t);\n        e = e ? e.toUpperCase() : \"GET\", this.C = t, this.f = \"\", this.h = 0, this.A = !1, this.b = !0, this.a = (this.l || Oe).a(), this.u = this.l ? Ne(this.l) : Ne(Oe), this.a.onreadystatechange = V(this.Aa, this);\n\n        try {\n          this.B = !0, this.a.open(e, String(t), !0), this.B = !1;\n        } catch (t) {\n          return void Un(this, t);\n        }\n\n        t = n || \"\";\n        var i,\n            o = new ze(this.headers);\n        r && He(r, function (t, e) {\n          o.set(e, t);\n        }), r = function (t) {\n          t: {\n            for (var e = Vn, n = t.length, r = \"string\" == typeof t ? t.split(\"\") : t, i = 0; i < n; i++) {\n              if (i in r && e.call(void 0, r[i], i, t)) {\n                e = i;\n                break t;\n              }\n            }\n\n            e = -1;\n          }\n\n          return e < 0 ? null : \"string\" == typeof t ? t.charAt(e) : t[e];\n        }(o.L()), n = k.FormData && t instanceof k.FormData, 0 <= K(Fn, e) && !r && !n && o.set(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\"), o.forEach(function (t, e) {\n          this.a.setRequestHeader(e, t);\n        }, this), this.I && (this.a.responseType = this.I), \"withCredentials\" in this.a && this.a.withCredentials !== this.G && (this.a.withCredentials = this.G);\n\n        try {\n          Kn(this), 0 < this.s && ((this.F = (i = this.a, st && yt(9) && \"number\" == typeof i.timeout && void 0 !== i.ontimeout)) ? (this.a.timeout = this.s, this.a.ontimeout = V(this.ya, this)) : this.o = ne(this.ya, this.s, this)), this.m = !0, this.a.send(t), this.m = !1;\n        } catch (t) {\n          Un(this, t);\n        }\n      }, N.ya = function () {\n        void 0 !== C && this.a && (this.f = \"Timed out after \" + this.s + \"ms, aborting\", this.h = 8, jt(this, \"timeout\"), this.abort(8));\n      }, N.abort = function (t) {\n        this.a && this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1, this.h = t || 7, jt(this, \"complete\"), jt(this, \"abort\"), jn(this));\n      }, N.H = function () {\n        this.a && (this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1), jn(this, !0)), On.X.H.call(this);\n      }, N.Aa = function () {\n        this.j || (this.B || this.m || this.g ? Bn(this) : this.Za());\n      }, N.Za = function () {\n        Bn(this);\n      }, N.W = function () {\n        try {\n          return 2 < Gn(this) ? this.a.status : -1;\n        } catch (t) {\n          return -1;\n        }\n      }, N.$ = function () {\n        try {\n          return this.a ? this.a.responseText : \"\";\n        } catch (t) {\n          return \"\";\n        }\n      }, N.Qa = function (t) {\n        if (this.a) {\n          var e = this.a.responseText;\n          return t && 0 == e.indexOf(t) && (e = e.substring(t.length)), xn(e);\n        }\n      }, N.va = function () {\n        return this.h;\n      }, N.Ra = function () {\n        return \"string\" == typeof this.f ? this.f : String(this.f);\n      }, (N = zn.prototype).ia = 8, N.v = 1, N.Ca = function (t) {\n        if (this.h) if (this.h = null, 1 == this.v) {\n          if (!t) {\n            this.R = Math.floor(1e5 * Math.random()), t = this.R++;\n            var e,\n                n = new xe(this, this.c, t, void 0),\n                r = this.l;\n            if (this.O && (r ? nt(r = tt(r), this.O) : r = this.O), null === this.i && (n.B = r), this.ea) t: {\n              for (var i = e = 0; i < this.g.length; i++) {\n                var o = this.g[i];\n                if (\"__data__\" in o.a && \"string\" == typeof (o = o.a.__data__) ? o = o.length : o = void 0, void 0 === o) break;\n\n                if (4096 < (e += o)) {\n                  e = i;\n                  break t;\n                }\n\n                if (4096 === e || i === this.g.length - 1) {\n                  e = i + 1;\n                  break t;\n                }\n              }\n\n              e = 1e3;\n            } else e = 1e3;\n            e = er(this, n, e), rn(i = Je(this.B), \"RID\", t), rn(i, \"CVER\", 22), this.A && rn(i, \"X-HTTP-Session-Id\", this.A), tr(this, i), this.i && r && Qn(i, this.i, r), An(this.b, n), this.Ja && rn(i, \"TYPE\", \"init\"), this.ea ? (rn(i, \"$req\", e), rn(i, \"SID\", \"null\"), n.U = !0, Fe(n, i, null)) : Fe(n, i, e), this.v = 2;\n          }\n        } else 3 == this.v && (t ? Zn(this, t) : 0 == this.g.length || In(this.b) || Zn(this));\n      }, N.Ba = function () {\n        var t;\n        this.j = null, or(this), this.U && !(this.F || null == this.a || this.N <= 0) && (t = 2 * this.N, this.c.info(\"BP detection timer enabled: \" + t), this.s = Ie(V(this.Ya, this), t));\n      }, N.Ya = function () {\n        this.s && (this.s = null, this.c.info(\"BP detection timeout reached.\"), this.c.info(\"Buffering proxy detected and switch to long-polling!\"), this.G = !1, this.F = !0, Ee(10), Yn(this), or(this));\n      }, N.Xa = function () {\n        null != this.m && (this.m = null, Yn(this), rr(this), Ee(19));\n      }, N.cb = function (t) {\n        t ? (this.c.info(\"Successfully pinged google.com\"), Ee(2)) : (this.c.info(\"Failed to ping google.com\"), Ee(1));\n      }, (N = dr.prototype).ua = function () {}, N.ta = function () {}, N.sa = function () {}, N.ra = function () {}, N.Ka = function () {}, pr.prototype.a = function (t, e) {\n        return new yr(t, e);\n      }, B(yr, Bt), yr.prototype.h = function () {\n        this.a.f = this.f, this.o && (this.a.C = !0);\n        var t = this.a,\n            e = this.g,\n            n = this.b || void 0;\n        Ee(0), t.ga = e, t.V = n || {}, t.G = t.S, t.B = lr(t, null, t.ga), Jn(t);\n      }, yr.prototype.close = function () {\n        Wn(this.a);\n      }, yr.prototype.l = function (t) {\n        var e;\n        \"string\" == typeof t ? ((e = {}).__data__ = t, $n(this.a, e)) : this.m ? ((e = {}).__data__ = Gt(t), $n(this.a, e)) : $n(this.a, t);\n      }, yr.prototype.H = function () {\n        this.a.f = null, delete this.f, Wn(this.a), delete this.a, yr.X.H.call(this);\n      }, B(gr, Ce), B(mr, ke), B(vr, dr), vr.prototype.ua = function () {\n        jt(this.a, \"a\");\n      }, vr.prototype.ta = function (t) {\n        jt(this.a, new gr(t));\n      }, vr.prototype.sa = function (t) {\n        jt(this.a, new mr());\n      }, vr.prototype.ra = function () {\n        jt(this.a, \"b\");\n      }, B(br, Ae), br.prototype.a = function () {\n        return new wr(this.f);\n      }, br.prototype.c = (Ln = {}, function () {\n        return Ln;\n      }), B(wr, Bt);\n      var Er = 0;\n\n      function Tr(t) {\n        t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t));\n      }\n\n      function Ir(t) {\n        t.readyState = 4, t.g = null, t.f = null, t.m = null, _r(t);\n      }\n\n      function _r(t) {\n        t.onreadystatechange && t.onreadystatechange.call(t);\n      }\n\n      (N = wr.prototype).open = function (t, e) {\n        if (this.readyState != Er) throw this.abort(), Error(\"Error reopening a connection\");\n        this.s = t, this.o = e, this.readyState = 1, _r(this);\n      }, N.send = function (t) {\n        if (1 != this.readyState) throw this.abort(), Error(\"need to call open() first. \");\n        this.a = !0;\n        var e = {\n          headers: this.l,\n          method: this.s,\n          credentials: this.h,\n          cache: void 0\n        };\n        t && (e.body = t), this.u.fetch(new Request(this.o, e)).then(this.Wa.bind(this), this.ca.bind(this));\n      }, N.abort = function () {\n        this.responseText = \"\", this.l = new Headers(), this.status = 0, this.f && this.f.cancel(\"Request was aborted.\"), 1 <= this.readyState && this.a && 4 != this.readyState && (this.a = !1, Ir(this)), this.readyState = Er;\n      }, N.Wa = function (t) {\n        this.a && (this.g = t, this.b || (this.status = this.g.status, this.statusText = this.g.statusText, this.b = t.headers, this.readyState = 2, _r(this)), this.a && (this.readyState = 3, _r(this), this.a && (\"arraybuffer\" === this.responseType ? t.arrayBuffer().then(this.Ua.bind(this), this.ca.bind(this)) : void 0 !== k.ReadableStream && \"body\" in t ? (this.responseText = \"\", this.f = t.body.getReader(), this.m = new TextDecoder(), Tr(this)) : t.text().then(this.Va.bind(this), this.ca.bind(this)))));\n      }, N.Ta = function (t) {\n        var e;\n        this.a && ((e = this.m.decode(t.value || new Uint8Array(0), {\n          stream: !t.done\n        })) && (this.responseText += e), (t.done ? Ir : _r)(this), 3 == this.readyState && Tr(this));\n      }, N.Va = function (t) {\n        this.a && (this.responseText = t, Ir(this));\n      }, N.Ua = function () {\n        this.a && Ir(this);\n      }, N.ca = function () {\n        this.a && Ir(this);\n      }, N.setRequestHeader = function (t, e) {\n        this.l.append(t, e);\n      }, N.getResponseHeader = function (t) {\n        return this.b && this.b.get(t.toLowerCase()) || \"\";\n      }, N.getAllResponseHeaders = function () {\n        if (!this.b) return \"\";\n\n        for (var t = [], e = this.b.entries(), n = e.next(); !n.done;) {\n          n = n.value, t.push(n[0] + \": \" + n[1]), n = e.next();\n        }\n\n        return t.join(\"\\r\\n\");\n      }, Object.defineProperty(wr.prototype, \"withCredentials\", {\n        get: function get() {\n          return \"include\" === this.h;\n        },\n        set: function set(t) {\n          this.h = t ? \"include\" : \"same-origin\";\n        }\n      }), pr.prototype.createWebChannel = pr.prototype.a, yr.prototype.send = yr.prototype.l, yr.prototype.open = yr.prototype.h, _e.NO_ERROR = 0, _e.TIMEOUT = 8, _e.HTTP_ERROR = 6, Se.COMPLETE = \"complete\", (De.EventType = D).OPEN = \"a\", D.CLOSE = \"b\", D.ERROR = \"c\", D.MESSAGE = \"d\", Bt.prototype.listen = Bt.prototype.wa, On.prototype.listenOnce = On.prototype.xa, On.prototype.getLastError = On.prototype.Ra, On.prototype.getLastErrorCode = On.prototype.va, On.prototype.getStatus = On.prototype.W, On.prototype.getResponseJson = On.prototype.Qa, On.prototype.getResponseText = On.prototype.$, On.prototype.send = On.prototype.ba;\n      var Sr = me,\n          Ar = _e,\n          Nr = Se,\n          Dr = ye,\n          Cr = 10,\n          kr = 11,\n          Rr = br,\n          xr = De,\n          Or = On,\n          Lr = (Pr.prototype.t = function (t) {\n        return this.previousValue = Math.max(t, this.previousValue), this.previousValue;\n      }, Pr.prototype.next = function () {\n        var t = ++this.previousValue;\n        return this.i && this.i(t), t;\n      }, Pr);\n\n      function Pr(t, e) {\n        var n = this;\n        this.previousValue = t, e && (e.sequenceNumberHandler = function (t) {\n          return n.t(t);\n        }, this.i = function (t) {\n          return e.writeSequenceNumber(t);\n        });\n      }\n\n      Lr.o = -1;\n      var Mr,\n          Fr = {\n        OK: \"ok\",\n        CANCELLED: \"cancelled\",\n        UNKNOWN: \"unknown\",\n        INVALID_ARGUMENT: \"invalid-argument\",\n        DEADLINE_EXCEEDED: \"deadline-exceeded\",\n        NOT_FOUND: \"not-found\",\n        ALREADY_EXISTS: \"already-exists\",\n        PERMISSION_DENIED: \"permission-denied\",\n        UNAUTHENTICATED: \"unauthenticated\",\n        RESOURCE_EXHAUSTED: \"resource-exhausted\",\n        FAILED_PRECONDITION: \"failed-precondition\",\n        ABORTED: \"aborted\",\n        OUT_OF_RANGE: \"out-of-range\",\n        UNIMPLEMENTED: \"unimplemented\",\n        INTERNAL: \"internal\",\n        UNAVAILABLE: \"unavailable\",\n        DATA_LOSS: \"data-loss\"\n      },\n          Vr = (n(qr, Mr = Error), qr),\n          Ur = new I(\"@firebase/firestore\");\n\n      function qr(t, e) {\n        var n = this;\n        return (n = Mr.call(this, e) || this).code = t, n.message = e, n.name = \"FirebaseError\", n.toString = function () {\n          return n.name + \": [code=\" + n.code + \"]: \" + n.message;\n        }, n;\n      }\n\n      function Br() {\n        return Ur.logLevel;\n      }\n\n      function jr(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        Ur.logLevel <= p.DEBUG && (e = n.map(Qr), Ur.debug.apply(Ur, s([\"Firestore (8.6.5): \" + t], e)));\n      }\n\n      function Kr(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        Ur.logLevel <= p.ERROR && (e = n.map(Qr), Ur.error.apply(Ur, s([\"Firestore (8.6.5): \" + t], e)));\n      }\n\n      function Gr(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        Ur.logLevel <= p.WARN && (e = n.map(Qr), Ur.warn.apply(Ur, s([\"Firestore (8.6.5): \" + t], e)));\n      }\n\n      function Qr(e) {\n        if (\"string\" == typeof e) return e;\n\n        try {\n          return JSON.stringify(e);\n        } catch (t) {\n          return e;\n        }\n      }\n\n      function Hr(t) {\n        t = \"FIRESTORE (8.6.5) INTERNAL ASSERTION FAILED: \" + (t = void 0 === t ? \"Unexpected state\" : t);\n        throw Kr(t), new Error(t);\n      }\n\n      function zr(t) {\n        t || Hr();\n      }\n\n      var Wr = (Yr.u = function () {\n        for (var t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\", e = Math.floor(256 / t.length) * t.length, n = \"\"; n.length < 20;) {\n          for (var r = function (t) {\n            var e = \"undefined\" != typeof self && (self.crypto || self.msCrypto),\n                n = new Uint8Array(t);\n            if (e && \"function\" == typeof e.getRandomValues) e.getRandomValues(n);else for (var r = 0; r < t; r++) {\n              n[r] = Math.floor(256 * Math.random());\n            }\n            return n;\n          }(40), i = 0; i < r.length; ++i) {\n            n.length < 20 && r[i] < e && (n += t.charAt(r[i] % t.length));\n          }\n        }\n\n        return n;\n      }, Yr);\n\n      function Yr() {}\n\n      function Xr(t, e) {\n        return t < e ? -1 : e < t ? 1 : 0;\n      }\n\n      function $r(t, n, r) {\n        return t.length === n.length && t.every(function (t, e) {\n          return r(t, n[e]);\n        });\n      }\n\n      function Jr(t) {\n        return t + \"\\0\";\n      }\n\n      var Zr = (ni.now = function () {\n        return ni.fromMillis(Date.now());\n      }, ni.fromDate = function (t) {\n        return ni.fromMillis(t.getTime());\n      }, ni.fromMillis = function (t) {\n        var e = Math.floor(t / 1e3);\n        return new ni(e, Math.floor(1e6 * (t - 1e3 * e)));\n      }, ni.prototype.toDate = function () {\n        return new Date(this.toMillis());\n      }, ni.prototype.toMillis = function () {\n        return 1e3 * this.seconds + this.nanoseconds / 1e6;\n      }, ni.prototype._compareTo = function (t) {\n        return this.seconds === t.seconds ? Xr(this.nanoseconds, t.nanoseconds) : Xr(this.seconds, t.seconds);\n      }, ni.prototype.isEqual = function (t) {\n        return t.seconds === this.seconds && t.nanoseconds === this.nanoseconds;\n      }, ni.prototype.toString = function () {\n        return \"Timestamp(seconds=\" + this.seconds + \", nanoseconds=\" + this.nanoseconds + \")\";\n      }, ni.prototype.toJSON = function () {\n        return {\n          seconds: this.seconds,\n          nanoseconds: this.nanoseconds\n        };\n      }, ni.prototype.valueOf = function () {\n        var t = this.seconds - -62135596800;\n        return String(t).padStart(12, \"0\") + \".\" + String(this.nanoseconds).padStart(9, \"0\");\n      }, ni),\n          ti = (ei.fromTimestamp = function (t) {\n        return new ei(t);\n      }, ei.min = function () {\n        return new ei(new Zr(0, 0));\n      }, ei.prototype.compareTo = function (t) {\n        return this.timestamp._compareTo(t.timestamp);\n      }, ei.prototype.isEqual = function (t) {\n        return this.timestamp.isEqual(t.timestamp);\n      }, ei.prototype.toMicroseconds = function () {\n        return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;\n      }, ei.prototype.toString = function () {\n        return \"SnapshotVersion(\" + this.timestamp.toString() + \")\";\n      }, ei.prototype.toTimestamp = function () {\n        return this.timestamp;\n      }, ei);\n\n      function ei(t) {\n        this.timestamp = t;\n      }\n\n      function ni(t, e) {\n        if (this.seconds = t, (this.nanoseconds = e) < 0) throw new Vr(Fr.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n        if (1e9 <= e) throw new Vr(Fr.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n        if (t < -62135596800) throw new Vr(Fr.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n        if (253402300800 <= t) throw new Vr(Fr.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n      }\n\n      function ri(t) {\n        var e,\n            n = 0;\n\n        for (e in t) {\n          Object.prototype.hasOwnProperty.call(t, e) && n++;\n        }\n\n        return n;\n      }\n\n      function ii(t, e) {\n        for (var n in t) {\n          Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);\n        }\n      }\n\n      function oi(t) {\n        for (var e in t) {\n          if (Object.prototype.hasOwnProperty.call(t, e)) return !1;\n        }\n\n        return !0;\n      }\n\n      var si,\n          ai,\n          Se = (Object.defineProperty(mi.prototype, \"length\", {\n        get: function get() {\n          return this.len;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), mi.prototype.isEqual = function (t) {\n        return 0 === mi.comparator(this, t);\n      }, mi.prototype.child = function (t) {\n        var e = this.segments.slice(this.offset, this.limit());\n        return t instanceof mi ? t.forEach(function (t) {\n          e.push(t);\n        }) : e.push(t), this.construct(e);\n      }, mi.prototype.limit = function () {\n        return this.offset + this.length;\n      }, mi.prototype.popFirst = function (t) {\n        return this.construct(this.segments, this.offset + (t = void 0 === t ? 1 : t), this.length - t);\n      }, mi.prototype.popLast = function () {\n        return this.construct(this.segments, this.offset, this.length - 1);\n      }, mi.prototype.firstSegment = function () {\n        return this.segments[this.offset];\n      }, mi.prototype.lastSegment = function () {\n        return this.get(this.length - 1);\n      }, mi.prototype.get = function (t) {\n        return this.segments[this.offset + t];\n      }, mi.prototype.isEmpty = function () {\n        return 0 === this.length;\n      }, mi.prototype.isPrefixOf = function (t) {\n        if (t.length < this.length) return !1;\n\n        for (var e = 0; e < this.length; e++) {\n          if (this.get(e) !== t.get(e)) return !1;\n        }\n\n        return !0;\n      }, mi.prototype.isImmediateParentOf = function (t) {\n        if (this.length + 1 !== t.length) return !1;\n\n        for (var e = 0; e < this.length; e++) {\n          if (this.get(e) !== t.get(e)) return !1;\n        }\n\n        return !0;\n      }, mi.prototype.forEach = function (t) {\n        for (var e = this.offset, n = this.limit(); e < n; e++) {\n          t(this.segments[e]);\n        }\n      }, mi.prototype.toArray = function () {\n        return this.segments.slice(this.offset, this.limit());\n      }, mi.comparator = function (t, e) {\n        for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {\n          var i = t.get(r),\n              o = e.get(r);\n          if (i < o) return -1;\n          if (o < i) return 1;\n        }\n\n        return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;\n      }, mi),\n          ui = (n(gi, ai = Se), gi.prototype.construct = function (t, e, n) {\n        return new gi(t, e, n);\n      }, gi.prototype.canonicalString = function () {\n        return this.toArray().join(\"/\");\n      }, gi.prototype.toString = function () {\n        return this.canonicalString();\n      }, gi.fromString = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        for (var n = [], r = 0, i = t; r < i.length; r++) {\n          var o = i[r];\n          if (0 <= o.indexOf(\"//\")) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid segment (\" + o + \"). Paths must not contain // in them.\");\n          n.push.apply(n, o.split(\"/\").filter(function (t) {\n            return 0 < t.length;\n          }));\n        }\n\n        return new gi(n);\n      }, gi.emptyPath = function () {\n        return new gi([]);\n      }, gi),\n          ci = /^[_a-zA-Z][_a-zA-Z0-9]*$/,\n          hi = (n(yi, si = Se), yi.prototype.construct = function (t, e, n) {\n        return new yi(t, e, n);\n      }, yi.isValidIdentifier = function (t) {\n        return ci.test(t);\n      }, yi.prototype.canonicalString = function () {\n        return this.toArray().map(function (t) {\n          return t = t.replace(/\\\\/g, \"\\\\\\\\\").replace(/`/g, \"\\\\`\"), t = !yi.isValidIdentifier(t) ? \"`\" + t + \"`\" : t;\n        }).join(\".\");\n      }, yi.prototype.toString = function () {\n        return this.canonicalString();\n      }, yi.prototype.isKeyField = function () {\n        return 1 === this.length && \"__name__\" === this.get(0);\n      }, yi.keyField = function () {\n        return new yi([\"__name__\"]);\n      }, yi.fromServerFormat = function (t) {\n        for (var e = [], n = \"\", r = 0, i = function i() {\n          if (0 === n.length) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid field path (\" + t + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");\n          e.push(n), n = \"\";\n        }, o = !1; r < t.length;) {\n          var s = t[r];\n\n          if (\"\\\\\" === s) {\n            if (r + 1 === t.length) throw new Vr(Fr.INVALID_ARGUMENT, \"Path has trailing escape character: \" + t);\n            var a = t[r + 1];\n            if (\"\\\\\" !== a && \".\" !== a && \"`\" !== a) throw new Vr(Fr.INVALID_ARGUMENT, \"Path has invalid escape sequence: \" + t);\n            n += a, r += 2;\n          } else \"`\" === s ? o = !o : \".\" !== s || o ? n += s : i(), r++;\n        }\n\n        if (i(), o) throw new Vr(Fr.INVALID_ARGUMENT, \"Unterminated ` in path: \" + t);\n        return new yi(e);\n      }, yi.emptyPath = function () {\n        return new yi([]);\n      }, yi),\n          li = (pi.prototype.covers = function (t) {\n        for (var e = 0, n = this.fields; e < n.length; e++) {\n          if (n[e].isPrefixOf(t)) return !0;\n        }\n\n        return !1;\n      }, pi.prototype.isEqual = function (t) {\n        return $r(this.fields, t.fields, function (t, e) {\n          return t.isEqual(e);\n        });\n      }, pi),\n          fi = (di.fromBase64String = function (t) {\n        return new di(atob(t));\n      }, di.fromUint8Array = function (t) {\n        return new di(function (t) {\n          for (var e = \"\", n = 0; n < t.length; ++n) {\n            e += String.fromCharCode(t[n]);\n          }\n\n          return e;\n        }(t));\n      }, di.prototype.toBase64 = function () {\n        return t = this.binaryString, btoa(t);\n        var t;\n      }, di.prototype.toUint8Array = function () {\n        return function (t) {\n          for (var e = new Uint8Array(t.length), n = 0; n < t.length; n++) {\n            e[n] = t.charCodeAt(n);\n          }\n\n          return e;\n        }(this.binaryString);\n      }, di.prototype.approximateByteSize = function () {\n        return 2 * this.binaryString.length;\n      }, di.prototype.compareTo = function (t) {\n        return Xr(this.binaryString, t.binaryString);\n      }, di.prototype.isEqual = function (t) {\n        return this.binaryString === t.binaryString;\n      }, di);\n\n      function di(t) {\n        this.binaryString = t;\n      }\n\n      function pi(t) {\n        (this.fields = t).sort(hi.comparator);\n      }\n\n      function yi() {\n        return null !== si && si.apply(this, arguments) || this;\n      }\n\n      function gi() {\n        return null !== ai && ai.apply(this, arguments) || this;\n      }\n\n      function mi(t, e, n) {\n        void 0 === e ? e = 0 : e > t.length && Hr(), void 0 === n ? n = t.length - e : n > t.length - e && Hr(), this.segments = t, this.offset = e, this.len = n;\n      }\n\n      fi.EMPTY_BYTE_STRING = new fi(\"\");\n      var vi = new RegExp(/^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.(\\d+))?Z$/);\n\n      function bi(t) {\n        if (zr(!!t), \"string\" != typeof t) return {\n          seconds: wi(t.seconds),\n          nanos: wi(t.nanos)\n        };\n        var e = 0,\n            n = vi.exec(t);\n        zr(!!n), n[1] && (n = ((n = n[1]) + \"000000000\").substr(0, 9), e = Number(n));\n        t = new Date(t);\n        return {\n          seconds: Math.floor(t.getTime() / 1e3),\n          nanos: e\n        };\n      }\n\n      function wi(t) {\n        return \"number\" == typeof t ? t : \"string\" == typeof t ? Number(t) : 0;\n      }\n\n      function Ei(t) {\n        return \"string\" == typeof t ? fi.fromBase64String(t) : fi.fromUint8Array(t);\n      }\n\n      function Ti(t) {\n        return \"server_timestamp\" === (null === (t = ((null === (t = null == t ? void 0 : t.mapValue) || void 0 === t ? void 0 : t.fields) || {}).__type__) || void 0 === t ? void 0 : t.stringValue);\n      }\n\n      function Ii(t) {\n        t = bi(t.mapValue.fields.__local_write_time__.timestampValue);\n        return new Zr(t.seconds, t.nanos);\n      }\n\n      function _i(t) {\n        return null == t;\n      }\n\n      function Si(t) {\n        return 0 === t && 1 / t == -1 / 0;\n      }\n\n      function Ai(t) {\n        return \"number\" == typeof t && Number.isInteger(t) && !Si(t) && t <= Number.MAX_SAFE_INTEGER && t >= Number.MIN_SAFE_INTEGER;\n      }\n\n      var Ni = (Di.fromPath = function (t) {\n        return new Di(ui.fromString(t));\n      }, Di.fromName = function (t) {\n        return new Di(ui.fromString(t).popFirst(5));\n      }, Di.prototype.hasCollectionId = function (t) {\n        return 2 <= this.path.length && this.path.get(this.path.length - 2) === t;\n      }, Di.prototype.isEqual = function (t) {\n        return null !== t && 0 === ui.comparator(this.path, t.path);\n      }, Di.prototype.toString = function () {\n        return this.path.toString();\n      }, Di.comparator = function (t, e) {\n        return ui.comparator(t.path, e.path);\n      }, Di.isDocumentKey = function (t) {\n        return t.length % 2 == 0;\n      }, Di.fromSegments = function (t) {\n        return new Di(new ui(t.slice()));\n      }, Di);\n\n      function Di(t) {\n        this.path = t;\n      }\n\n      function Ci(t) {\n        return \"nullValue\" in t ? 0 : \"booleanValue\" in t ? 1 : \"integerValue\" in t || \"doubleValue\" in t ? 2 : \"timestampValue\" in t ? 3 : \"stringValue\" in t ? 5 : \"bytesValue\" in t ? 6 : \"referenceValue\" in t ? 7 : \"geoPointValue\" in t ? 8 : \"arrayValue\" in t ? 9 : \"mapValue\" in t ? Ti(t) ? 4 : 10 : Hr();\n      }\n\n      function ki(r, i) {\n        var t,\n            e,\n            n = Ci(r);\n        if (n !== Ci(i)) return !1;\n\n        switch (n) {\n          case 0:\n            return !0;\n\n          case 1:\n            return r.booleanValue === i.booleanValue;\n\n          case 4:\n            return Ii(r).isEqual(Ii(i));\n\n          case 3:\n            return function (t) {\n              if (\"string\" == typeof r.timestampValue && \"string\" == typeof t.timestampValue && r.timestampValue.length === t.timestampValue.length) return r.timestampValue === t.timestampValue;\n              var e = bi(r.timestampValue),\n                  t = bi(t.timestampValue);\n              return e.seconds === t.seconds && e.nanos === t.nanos;\n            }(i);\n\n          case 5:\n            return r.stringValue === i.stringValue;\n\n          case 6:\n            return e = i, Ei(r.bytesValue).isEqual(Ei(e.bytesValue));\n\n          case 7:\n            return r.referenceValue === i.referenceValue;\n\n          case 8:\n            return t = i, wi((e = r).geoPointValue.latitude) === wi(t.geoPointValue.latitude) && wi(e.geoPointValue.longitude) === wi(t.geoPointValue.longitude);\n\n          case 2:\n            return function (t, e) {\n              if (\"integerValue\" in t && \"integerValue\" in e) return wi(t.integerValue) === wi(e.integerValue);\n\n              if (\"doubleValue\" in t && \"doubleValue\" in e) {\n                t = wi(t.doubleValue), e = wi(e.doubleValue);\n                return t === e ? Si(t) === Si(e) : isNaN(t) && isNaN(e);\n              }\n\n              return !1;\n            }(r, i);\n\n          case 9:\n            return $r(r.arrayValue.values || [], i.arrayValue.values || [], ki);\n\n          case 10:\n            return function () {\n              var t,\n                  e = r.mapValue.fields || {},\n                  n = i.mapValue.fields || {};\n              if (ri(e) !== ri(n)) return !1;\n\n              for (t in e) {\n                if (e.hasOwnProperty(t) && (void 0 === n[t] || !ki(e[t], n[t]))) return !1;\n              }\n\n              return !0;\n            }();\n\n          default:\n            return Hr();\n        }\n      }\n\n      function Ri(t, e) {\n        return void 0 !== (t.values || []).find(function (t) {\n          return ki(t, e);\n        });\n      }\n\n      function xi(t, e) {\n        var n,\n            r,\n            i,\n            o = Ci(t),\n            s = Ci(e);\n        if (o !== s) return Xr(o, s);\n\n        switch (o) {\n          case 0:\n            return 0;\n\n          case 1:\n            return Xr(t.booleanValue, e.booleanValue);\n\n          case 2:\n            return r = e, i = wi(t.integerValue || t.doubleValue), r = wi(r.integerValue || r.doubleValue), i < r ? -1 : r < i ? 1 : i === r ? 0 : isNaN(i) ? isNaN(r) ? 0 : -1 : 1;\n\n          case 3:\n            return Oi(t.timestampValue, e.timestampValue);\n\n          case 4:\n            return Oi(Ii(t), Ii(e));\n\n          case 5:\n            return Xr(t.stringValue, e.stringValue);\n\n          case 6:\n            return function (t, e) {\n              t = Ei(t), e = Ei(e);\n              return t.compareTo(e);\n            }(t.bytesValue, e.bytesValue);\n\n          case 7:\n            return function (t, e) {\n              for (var n = t.split(\"/\"), r = e.split(\"/\"), i = 0; i < n.length && i < r.length; i++) {\n                var o = Xr(n[i], r[i]);\n                if (0 !== o) return o;\n              }\n\n              return Xr(n.length, r.length);\n            }(t.referenceValue, e.referenceValue);\n\n          case 8:\n            return n = t.geoPointValue, i = e.geoPointValue, 0 !== (r = Xr(wi(n.latitude), wi(i.latitude))) ? r : Xr(wi(n.longitude), wi(i.longitude));\n\n          case 9:\n            return function (t, e) {\n              for (var n = t.values || [], r = e.values || [], i = 0; i < n.length && i < r.length; ++i) {\n                var o = xi(n[i], r[i]);\n                if (o) return o;\n              }\n\n              return Xr(n.length, r.length);\n            }(t.arrayValue, e.arrayValue);\n\n          case 10:\n            return function (t, e) {\n              var n = t.fields || {},\n                  r = Object.keys(n),\n                  i = e.fields || {},\n                  o = Object.keys(i);\n              r.sort(), o.sort();\n\n              for (var s = 0; s < r.length && s < o.length; ++s) {\n                var a = Xr(r[s], o[s]);\n                if (0 !== a) return a;\n                a = xi(n[r[s]], i[o[s]]);\n                if (0 !== a) return a;\n              }\n\n              return Xr(r.length, o.length);\n            }(t.mapValue, e.mapValue);\n\n          default:\n            throw Hr();\n        }\n      }\n\n      function Oi(t, e) {\n        if (\"string\" == typeof t && \"string\" == typeof e && t.length === e.length) return Xr(t, e);\n        var n = bi(t),\n            t = bi(e),\n            e = Xr(n.seconds, t.seconds);\n        return 0 !== e ? e : Xr(n.nanos, t.nanos);\n      }\n\n      function Li(t) {\n        return function s(t) {\n          return \"nullValue\" in t ? \"null\" : \"booleanValue\" in t ? \"\" + t.booleanValue : \"integerValue\" in t ? \"\" + t.integerValue : \"doubleValue\" in t ? \"\" + t.doubleValue : \"timestampValue\" in t ? function (t) {\n            t = bi(t);\n            return \"time(\" + t.seconds + \",\" + t.nanos + \")\";\n          }(t.timestampValue) : \"stringValue\" in t ? t.stringValue : \"bytesValue\" in t ? Ei(t.bytesValue).toBase64() : \"referenceValue\" in t ? (e = t.referenceValue, Ni.fromName(e).toString()) : \"geoPointValue\" in t ? \"geo(\" + (e = t.geoPointValue).latitude + \",\" + e.longitude + \")\" : \"arrayValue\" in t ? function (t) {\n            for (var e = \"[\", n = !0, r = 0, i = t.values || []; r < i.length; r++) {\n              n ? n = !1 : e += \",\", e += s(i[r]);\n            }\n\n            return e + \"]\";\n          }(t.arrayValue) : \"mapValue\" in t ? function (t) {\n            for (var e = \"{\", n = !0, r = 0, i = Object.keys(t.fields || {}).sort(); r < i.length; r++) {\n              var o = i[r];\n              n ? n = !1 : e += \",\", e += o + \":\" + s(t.fields[o]);\n            }\n\n            return e + \"}\";\n          }(t.mapValue) : Hr();\n          var e;\n        }(t);\n      }\n\n      function Pi(t, e) {\n        return {\n          referenceValue: \"projects/\" + t.projectId + \"/databases/\" + t.database + \"/documents/\" + e.path.canonicalString()\n        };\n      }\n\n      function Mi(t) {\n        return t && \"integerValue\" in t;\n      }\n\n      function Fi(t) {\n        return !!t && \"arrayValue\" in t;\n      }\n\n      function Vi(t) {\n        return t && \"nullValue\" in t;\n      }\n\n      function Ui(t) {\n        return t && \"doubleValue\" in t && isNaN(Number(t.doubleValue));\n      }\n\n      function qi(t) {\n        return t && \"mapValue\" in t;\n      }\n\n      function Bi(t) {\n        if (t.geoPointValue) return {\n          geoPointValue: Object.assign({}, t.geoPointValue)\n        };\n        if (t.timestampValue) return {\n          timestampValue: Object.assign({}, bi(t.timestampValue))\n        };\n\n        if (t.mapValue) {\n          var n = {\n            mapValue: {\n              fields: {}\n            }\n          };\n          return ii(t.mapValue.fields, function (t, e) {\n            return n.mapValue.fields[t] = Bi(e);\n          }), n;\n        }\n\n        if (t.arrayValue) {\n          for (var e = {\n            arrayValue: {\n              values: []\n            }\n          }, r = 0; r < (t.arrayValue.values || []).length; ++r) {\n            e.arrayValue.values[r] = Bi(t.arrayValue.values[r]);\n          }\n\n          return e;\n        }\n\n        return Object.assign({}, t);\n      }\n\n      var ji = (Ki.empty = function () {\n        return new Ki({\n          mapValue: {}\n        });\n      }, Ki.prototype.field = function (t) {\n        if (t.isEmpty()) return this.value;\n\n        for (var e = this.value, n = 0; n < t.length - 1; ++n) {\n          if (!qi(e = (e.mapValue.fields || {})[t.get(n)])) return null;\n        }\n\n        return (e = (e.mapValue.fields || {})[t.lastSegment()]) || null;\n      }, Ki.prototype.set = function (t, e) {\n        this.getFieldsMap(t.popLast())[t.lastSegment()] = Bi(e);\n      }, Ki.prototype.setAll = function (t) {\n        var r = this,\n            i = hi.emptyPath(),\n            o = {},\n            s = [];\n        t.forEach(function (t, e) {\n          var n;\n          i.isImmediateParentOf(e) || (n = r.getFieldsMap(i), r.applyChanges(n, o, s), o = {}, s = [], i = e.popLast()), t ? o[e.lastSegment()] = Bi(t) : s.push(e.lastSegment());\n        });\n        t = this.getFieldsMap(i);\n        this.applyChanges(t, o, s);\n      }, Ki.prototype.delete = function (t) {\n        var e = this.field(t.popLast());\n        qi(e) && e.mapValue.fields && delete e.mapValue.fields[t.lastSegment()];\n      }, Ki.prototype.isEqual = function (t) {\n        return ki(this.value, t.value);\n      }, Ki.prototype.getFieldsMap = function (t) {\n        var e = this.value;\n        e.mapValue.fields || (e.mapValue = {\n          fields: {}\n        });\n\n        for (var n = 0; n < t.length; ++n) {\n          var r = e.mapValue.fields[t.get(n)];\n          qi(r) && r.mapValue.fields || (r = {\n            mapValue: {\n              fields: {}\n            }\n          }, e.mapValue.fields[t.get(n)] = r), e = r;\n        }\n\n        return e.mapValue.fields;\n      }, Ki.prototype.applyChanges = function (n, t, e) {\n        ii(t, function (t, e) {\n          return n[t] = e;\n        });\n\n        for (var r = 0, i = e; r < i.length; r++) {\n          var o = i[r];\n          delete n[o];\n        }\n      }, Ki.prototype.clone = function () {\n        return new Ki(Bi(this.value));\n      }, Ki);\n\n      function Ki(t) {\n        this.value = t;\n      }\n\n      var Gi = (Hi.newInvalidDocument = function (t) {\n        return new Hi(t, 0, ti.min(), ji.empty(), 0);\n      }, Hi.newFoundDocument = function (t, e, n) {\n        return new Hi(t, 1, e, n, 0);\n      }, Hi.newNoDocument = function (t, e) {\n        return new Hi(t, 2, e, ji.empty(), 0);\n      }, Hi.newUnknownDocument = function (t, e) {\n        return new Hi(t, 3, e, ji.empty(), 2);\n      }, Hi.prototype.convertToFoundDocument = function (t, e) {\n        return this.version = t, this.documentType = 1, this.data = e, this.documentState = 0, this;\n      }, Hi.prototype.convertToNoDocument = function (t) {\n        return this.version = t, this.documentType = 2, this.data = ji.empty(), this.documentState = 0, this;\n      }, Hi.prototype.convertToUnknownDocument = function (t) {\n        return this.version = t, this.documentType = 3, this.data = ji.empty(), this.documentState = 2, this;\n      }, Hi.prototype.setHasCommittedMutations = function () {\n        return this.documentState = 2, this;\n      }, Hi.prototype.setHasLocalMutations = function () {\n        return this.documentState = 1, this;\n      }, Object.defineProperty(Hi.prototype, \"hasLocalMutations\", {\n        get: function get() {\n          return 1 === this.documentState;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Hi.prototype, \"hasCommittedMutations\", {\n        get: function get() {\n          return 2 === this.documentState;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Hi.prototype, \"hasPendingWrites\", {\n        get: function get() {\n          return this.hasLocalMutations || this.hasCommittedMutations;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Hi.prototype.isValidDocument = function () {\n        return 0 !== this.documentType;\n      }, Hi.prototype.isFoundDocument = function () {\n        return 1 === this.documentType;\n      }, Hi.prototype.isNoDocument = function () {\n        return 2 === this.documentType;\n      }, Hi.prototype.isUnknownDocument = function () {\n        return 3 === this.documentType;\n      }, Hi.prototype.isEqual = function (t) {\n        return t instanceof Hi && this.key.isEqual(t.key) && this.version.isEqual(t.version) && this.documentType === t.documentType && this.documentState === t.documentState && this.data.isEqual(t.data);\n      }, Hi.prototype.clone = function () {\n        return new Hi(this.key, this.documentType, this.version, this.data.clone(), this.documentState);\n      }, Hi.prototype.toString = function () {\n        return \"Document(\" + this.key + \", \" + this.version + \", \" + JSON.stringify(this.data.value) + \", {documentType: \" + this.documentType + \"}), {documentState: \" + this.documentState + \"})\";\n      }, Hi),\n          Qi = function Qi(t, e, n, r, i, o, s) {\n        void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === s && (s = null), this.path = t, this.collectionGroup = e, this.orderBy = n, this.filters = r, this.limit = i, this.startAt = o, this.endAt = s, this.h = null;\n      };\n\n      function Hi(t, e, n, r, i) {\n        this.key = t, this.documentType = e, this.version = n, this.data = r, this.documentState = i;\n      }\n\n      function zi(t, e, n, r, i, o, s) {\n        return new Qi(t, e = void 0 === e ? null : e, n = void 0 === n ? [] : n, r = void 0 === r ? [] : r, i = void 0 === i ? null : i, o = void 0 === o ? null : o, s = void 0 === s ? null : s);\n      }\n\n      function Wi(t) {\n        var e = t;\n        return null === e.h && (t = e.path.canonicalString(), null !== e.collectionGroup && (t += \"|cg:\" + e.collectionGroup), t += \"|f:\", t += e.filters.map(function (t) {\n          return (t = t).field.canonicalString() + t.op.toString() + Li(t.value);\n        }).join(\",\"), t += \"|ob:\", t += e.orderBy.map(function (t) {\n          return (t = t).field.canonicalString() + t.dir;\n        }).join(\",\"), _i(e.limit) || (t += \"|l:\", t += e.limit), e.startAt && (t += \"|lb:\", t += _o(e.startAt)), e.endAt && (t += \"|ub:\", t += _o(e.endAt)), e.h = t), e.h;\n      }\n\n      function Yi(t, e) {\n        if (t.limit !== e.limit) return !1;\n        if (t.orderBy.length !== e.orderBy.length) return !1;\n\n        for (var n, r, i = 0; i < t.orderBy.length; i++) {\n          if (n = t.orderBy[i], r = e.orderBy[i], n.dir !== r.dir || !n.field.isEqual(r.field)) return !1;\n        }\n\n        if (t.filters.length !== e.filters.length) return !1;\n\n        for (var o, s, a = 0; a < t.filters.length; a++) {\n          if (o = t.filters[a], s = e.filters[a], o.op !== s.op || !o.field.isEqual(s.field) || !ki(o.value, s.value)) return !1;\n        }\n\n        return t.collectionGroup === e.collectionGroup && !!t.path.isEqual(e.path) && !!No(t.startAt, e.startAt) && No(t.endAt, e.endAt);\n      }\n\n      function Xi(t) {\n        return Ni.isDocumentKey(t.path) && null === t.collectionGroup && 0 === t.filters.length;\n      }\n\n      var $i,\n          Ji = (n(Zi, $i = function $i() {}), Zi.create = function (t, e, n) {\n        return t.isKeyField() ? \"in\" === e || \"not-in\" === e ? this.l(t, e, n) : new ro(t, e, n) : \"array-contains\" === e ? new yo(t, n) : \"in\" === e ? new go(t, n) : \"not-in\" === e ? new mo(t, n) : \"array-contains-any\" === e ? new vo(t, n) : new Zi(t, e, n);\n      }, Zi.l = function (t, e, n) {\n        return new (\"in\" === e ? io : oo)(t, n);\n      }, Zi.prototype.matches = function (t) {\n        t = t.data.field(this.field);\n        return \"!=\" === this.op ? null !== t && this.m(xi(t, this.value)) : null !== t && Ci(this.value) === Ci(t) && this.m(xi(t, this.value));\n      }, Zi.prototype.m = function (t) {\n        switch (this.op) {\n          case \"<\":\n            return t < 0;\n\n          case \"<=\":\n            return t <= 0;\n\n          case \"==\":\n            return 0 === t;\n\n          case \"!=\":\n            return 0 !== t;\n\n          case \">\":\n            return 0 < t;\n\n          case \">=\":\n            return 0 <= t;\n\n          default:\n            return Hr();\n        }\n      }, Zi.prototype.g = function () {\n        return 0 <= [\"<\", \"<=\", \">\", \">=\", \"!=\", \"not-in\"].indexOf(this.op);\n      }, Zi);\n\n      function Zi(t, e, n) {\n        var r = this;\n        return (r = $i.call(this) || this).field = t, r.op = e, r.value = n, r;\n      }\n\n      var to,\n          eo,\n          no,\n          ro = (n(uo, no = Ji), uo.prototype.matches = function (t) {\n        t = Ni.comparator(t.key, this.key);\n        return this.m(t);\n      }, uo),\n          io = (n(ao, eo = Ji), ao.prototype.matches = function (e) {\n        return this.keys.some(function (t) {\n          return t.isEqual(e.key);\n        });\n      }, ao),\n          oo = (n(so, to = Ji), so.prototype.matches = function (e) {\n        return !this.keys.some(function (t) {\n          return t.isEqual(e.key);\n        });\n      }, so);\n\n      function so(t, e) {\n        var n = this;\n        return (n = to.call(this, t, \"not-in\", e) || this).keys = co(0, e), n;\n      }\n\n      function ao(t, e) {\n        var n = this;\n        return (n = eo.call(this, t, \"in\", e) || this).keys = co(0, e), n;\n      }\n\n      function uo(t, e, n) {\n        var r = this;\n        return (r = no.call(this, t, e, n) || this).key = Ni.fromName(n.referenceValue), r;\n      }\n\n      function co(t, e) {\n        return ((null === (e = e.arrayValue) || void 0 === e ? void 0 : e.values) || []).map(function (t) {\n          return Ni.fromName(t.referenceValue);\n        });\n      }\n\n      var ho,\n          lo,\n          fo,\n          po,\n          yo = (n(Io, po = Ji), Io.prototype.matches = function (t) {\n        t = t.data.field(this.field);\n        return Fi(t) && Ri(t.arrayValue, this.value);\n      }, Io),\n          go = (n(To, fo = Ji), To.prototype.matches = function (t) {\n        t = t.data.field(this.field);\n        return null !== t && Ri(this.value.arrayValue, t);\n      }, To),\n          mo = (n(Eo, lo = Ji), Eo.prototype.matches = function (t) {\n        if (Ri(this.value.arrayValue, {\n          nullValue: \"NULL_VALUE\"\n        })) return !1;\n        t = t.data.field(this.field);\n        return null !== t && !Ri(this.value.arrayValue, t);\n      }, Eo),\n          vo = (n(wo, ho = Ji), wo.prototype.matches = function (t) {\n        var e = this,\n            t = t.data.field(this.field);\n        return !(!Fi(t) || !t.arrayValue.values) && t.arrayValue.values.some(function (t) {\n          return Ri(e.value.arrayValue, t);\n        });\n      }, wo),\n          bo = function bo(t, e) {\n        this.position = t, this.before = e;\n      };\n\n      function wo(t, e) {\n        return ho.call(this, t, \"array-contains-any\", e) || this;\n      }\n\n      function Eo(t, e) {\n        return lo.call(this, t, \"not-in\", e) || this;\n      }\n\n      function To(t, e) {\n        return fo.call(this, t, \"in\", e) || this;\n      }\n\n      function Io(t, e) {\n        return po.call(this, t, \"array-contains\", e) || this;\n      }\n\n      function _o(t) {\n        return (t.before ? \"b\" : \"a\") + \":\" + t.position.map(Li).join(\",\");\n      }\n\n      var So = function So(t, e) {\n        void 0 === e && (e = \"asc\"), this.field = t, this.dir = e;\n      };\n\n      function Ao(t, e, n) {\n        for (var r = 0, i = 0; i < t.position.length; i++) {\n          var o = e[i],\n              s = t.position[i],\n              r = o.field.isKeyField() ? Ni.comparator(Ni.fromName(s.referenceValue), n.key) : xi(s, n.data.field(o.field));\n          if (\"desc\" === o.dir && (r *= -1), 0 !== r) break;\n        }\n\n        return t.before ? r <= 0 : r < 0;\n      }\n\n      function No(t, e) {\n        if (null === t) return null === e;\n        if (null === e) return !1;\n        if (t.before !== e.before || t.position.length !== e.position.length) return !1;\n\n        for (var n = 0; n < t.position.length; n++) {\n          if (!ki(t.position[n], e.position[n])) return !1;\n        }\n\n        return !0;\n      }\n\n      var Do = function Do(t, e, n, r, i, o, s, a) {\n        void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = \"F\"), void 0 === s && (s = null), void 0 === a && (a = null), this.path = t, this.collectionGroup = e, this.explicitOrderBy = n, this.filters = r, this.limit = i, this.limitType = o, this.startAt = s, this.endAt = a, this.p = null, this.T = null, this.startAt, this.endAt;\n      };\n\n      function Co(t, e, n, r, i, o, s, a) {\n        return new Do(t, e, n, r, i, o, s, a);\n      }\n\n      function ko(t) {\n        return new Do(t);\n      }\n\n      function Ro(t) {\n        return !_i(t.limit) && \"F\" === t.limitType;\n      }\n\n      function xo(t) {\n        return !_i(t.limit) && \"L\" === t.limitType;\n      }\n\n      function Oo(t) {\n        return 0 < t.explicitOrderBy.length ? t.explicitOrderBy[0].field : null;\n      }\n\n      function Lo(t) {\n        for (var e = 0, n = t.filters; e < n.length; e++) {\n          var r = n[e];\n          if (r.g()) return r.field;\n        }\n\n        return null;\n      }\n\n      function Po(t) {\n        return null !== t.collectionGroup;\n      }\n\n      function Mo(t) {\n        var e = t;\n\n        if (null === e.p) {\n          e.p = [];\n          var n = Lo(e),\n              t = Oo(e);\n          if (null !== n && null === t) n.isKeyField() || e.p.push(new So(n)), e.p.push(new So(hi.keyField(), \"asc\"));else {\n            for (var r = !1, i = 0, o = e.explicitOrderBy; i < o.length; i++) {\n              var s = o[i];\n              e.p.push(s), s.field.isKeyField() && (r = !0);\n            }\n\n            r || (n = 0 < e.explicitOrderBy.length ? e.explicitOrderBy[e.explicitOrderBy.length - 1].dir : \"asc\", e.p.push(new So(hi.keyField(), n)));\n          }\n        }\n\n        return e.p;\n      }\n\n      function Fo(t) {\n        var e = t;\n        if (!e.T) if (\"F\" === e.limitType) e.T = zi(e.path, e.collectionGroup, Mo(e), e.filters, e.limit, e.startAt, e.endAt);else {\n          for (var n = [], r = 0, i = Mo(e); r < i.length; r++) {\n            var o = i[r],\n                s = \"desc\" === o.dir ? \"asc\" : \"desc\";\n            n.push(new So(o.field, s));\n          }\n\n          var a = e.endAt ? new bo(e.endAt.position, !e.endAt.before) : null,\n              t = e.startAt ? new bo(e.startAt.position, !e.startAt.before) : null;\n          e.T = zi(e.path, e.collectionGroup, n, e.filters, e.limit, a, t);\n        }\n        return e.T;\n      }\n\n      function Vo(t, e, n) {\n        return new Do(t.path, t.collectionGroup, t.explicitOrderBy.slice(), t.filters.slice(), e, n, t.startAt, t.endAt);\n      }\n\n      function Uo(t, e) {\n        return Yi(Fo(t), Fo(e)) && t.limitType === e.limitType;\n      }\n\n      function qo(t) {\n        return Wi(Fo(t)) + \"|lt:\" + t.limitType;\n      }\n\n      function Bo(t) {\n        return \"Query(target=\" + (e = Fo(t), n = e.path.canonicalString(), null !== e.collectionGroup && (n += \" collectionGroup=\" + e.collectionGroup), 0 < e.filters.length && (n += \", filters: [\" + e.filters.map(function (t) {\n          return (t = t).field.canonicalString() + \" \" + t.op + \" \" + Li(t.value);\n        }).join(\", \") + \"]\"), _i(e.limit) || (n += \", limit: \" + e.limit), 0 < e.orderBy.length && (n += \", orderBy: [\" + e.orderBy.map(function (t) {\n          return (t = t).field.canonicalString() + \" (\" + t.dir + \")\";\n        }).join(\", \") + \"]\"), e.startAt && (n += \", startAt: \" + _o(e.startAt)), e.endAt && (n += \", endAt: \" + _o(e.endAt)), \"Target(\" + n + \")\") + \"; limitType=\" + t.limitType + \")\";\n        var e, n;\n      }\n\n      function jo(i, t) {\n        return t.isFoundDocument() && (e = i, n = t.key.path, null !== e.collectionGroup ? t.key.hasCollectionId(e.collectionGroup) && e.path.isPrefixOf(n) : Ni.isDocumentKey(e.path) ? e.path.isEqual(n) : e.path.isImmediateParentOf(n)) && function (t) {\n          for (var e = 0, n = i.explicitOrderBy; e < n.length; e++) {\n            var r = n[e];\n            if (!r.field.isKeyField() && null === t.data.field(r.field)) return;\n          }\n\n          return 1;\n        }(t) && function (t) {\n          for (var e = 0, n = i.filters; e < n.length; e++) {\n            if (!n[e].matches(t)) return;\n          }\n\n          return 1;\n        }(t) && (n = t, (!(t = i).startAt || Ao(t.startAt, Mo(t), n)) && (!t.endAt || !Ao(t.endAt, Mo(t), n)));\n        var e, n;\n      }\n\n      function Ko(a) {\n        return function (t, e) {\n          for (var n = !1, r = 0, i = Mo(a); r < i.length; r++) {\n            var o = i[r],\n                s = function (t, r, e) {\n              var n = t.field.isKeyField() ? Ni.comparator(r.key, e.key) : function (t, e) {\n                var n = r.data.field(t),\n                    t = e.data.field(t);\n                return null !== n && null !== t ? xi(n, t) : Hr();\n              }(t.field, e);\n\n              switch (t.dir) {\n                case \"asc\":\n                  return n;\n\n                case \"desc\":\n                  return -1 * n;\n\n                default:\n                  return Hr();\n              }\n            }(o, t, e);\n\n            if (0 !== s) return s;\n            n = n || o.field.isKeyField();\n          }\n\n          return 0;\n        };\n      }\n\n      function Go(t, e) {\n        if (t.I) {\n          if (isNaN(e)) return {\n            doubleValue: \"NaN\"\n          };\n          if (e === 1 / 0) return {\n            doubleValue: \"Infinity\"\n          };\n          if (e === -1 / 0) return {\n            doubleValue: \"-Infinity\"\n          };\n        }\n\n        return {\n          doubleValue: Si(e) ? \"-0\" : e\n        };\n      }\n\n      function Qo(t) {\n        return {\n          integerValue: \"\" + t\n        };\n      }\n\n      function Ho(t, e) {\n        return Ai(e) ? Qo(e) : Go(t, e);\n      }\n\n      I = function I() {\n        this._ = void 0;\n      };\n\n      function zo(t, e) {\n        return t instanceof ss ? Mi(t = e) || t && \"doubleValue\" in t ? e : {\n          integerValue: 0\n        } : null;\n      }\n\n      var Wo,\n          Yo,\n          Xo = (n(Zo, Yo = I), Zo),\n          $o = (n(Jo, Wo = I), Jo);\n\n      function Jo(t) {\n        var e = this;\n        return (e = Wo.call(this) || this).elements = t, e;\n      }\n\n      function Zo() {\n        return null !== Yo && Yo.apply(this, arguments) || this;\n      }\n\n      function ts(t, e) {\n        for (var n = cs(e), r = 0, i = t.elements; r < i.length; r++) {\n          !function (e) {\n            n.some(function (t) {\n              return ki(t, e);\n            }) || n.push(e);\n          }(i[r]);\n        }\n\n        return {\n          arrayValue: {\n            values: n\n          }\n        };\n      }\n\n      var es,\n          ns = (n(rs, es = I), rs);\n\n      function rs(t) {\n        var e = this;\n        return (e = es.call(this) || this).elements = t, e;\n      }\n\n      function is(t, e) {\n        for (var n = cs(e), r = 0, i = t.elements; r < i.length; r++) {\n          !function (e) {\n            n = n.filter(function (t) {\n              return !ki(t, e);\n            });\n          }(i[r]);\n        }\n\n        return {\n          arrayValue: {\n            values: n\n          }\n        };\n      }\n\n      var os,\n          ss = (n(as, os = I), as);\n\n      function as(t, e) {\n        var n = this;\n        return (n = os.call(this) || this).R = t, n.A = e, n;\n      }\n\n      function us(t) {\n        return wi(t.integerValue || t.doubleValue);\n      }\n\n      function cs(t) {\n        return Fi(t) && t.arrayValue.values ? t.arrayValue.values.slice() : [];\n      }\n\n      function hs(t, e) {\n        this.version = t, this.transformResults = e;\n      }\n\n      var ls = function ls(t, e) {\n        this.field = t, this.transform = e;\n      },\n          fs = (ds.none = function () {\n        return new ds();\n      }, ds.exists = function (t) {\n        return new ds(void 0, t);\n      }, ds.updateTime = function (t) {\n        return new ds(t);\n      }, Object.defineProperty(ds.prototype, \"isNone\", {\n        get: function get() {\n          return void 0 === this.updateTime && void 0 === this.exists;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ds.prototype.isEqual = function (t) {\n        return this.exists === t.exists && (this.updateTime ? !!t.updateTime && this.updateTime.isEqual(t.updateTime) : !t.updateTime);\n      }, ds);\n\n      function ds(t, e) {\n        this.updateTime = t, this.exists = e;\n      }\n\n      function ps(t, e) {\n        return void 0 !== t.updateTime ? e.isFoundDocument() && e.version.isEqual(t.updateTime) : void 0 === t.exists || t.exists === e.isFoundDocument();\n      }\n\n      Se = function Se() {};\n\n      function ys(t, e, n) {\n        var r, i, o, s;\n        t instanceof ws ? (i = e, o = n, ps((r = t).precondition, i) && (s = r.value.clone(), o = As(r.fieldTransforms, o, i), s.setAll(o), i.convertToFoundDocument(ms(i), s).setHasLocalMutations())) : t instanceof Es ? (o = e, i = n, ps((s = t).precondition, o) && (n = As(s.fieldTransforms, i, o), (i = o.data).setAll(_s(s)), i.setAll(n), o.convertToFoundDocument(ms(o), i).setHasLocalMutations())) : (e = e, ps(t.precondition, e) && e.convertToNoDocument(ti.min()));\n      }\n\n      function gs(t, e) {\n        return t.type === e.type && !!t.key.isEqual(e.key) && !!t.precondition.isEqual(e.precondition) && (n = t.fieldTransforms, r = e.fieldTransforms, !!(void 0 === n && void 0 === r || n && r && $r(n, r, function (t, e) {\n          return e = e, (t = t).field.isEqual(e.field) && (t = t.transform, e = e.transform, t instanceof $o && e instanceof $o || t instanceof ns && e instanceof ns ? $r(t.elements, e.elements, ki) : t instanceof ss && e instanceof ss ? ki(t.A, e.A) : t instanceof Xo && e instanceof Xo);\n        }))) && (0 === t.type ? t.value.isEqual(e.value) : 1 !== t.type || t.data.isEqual(e.data) && t.fieldMask.isEqual(e.fieldMask));\n        var n, r;\n      }\n\n      function ms(t) {\n        return t.isFoundDocument() ? t.version : ti.min();\n      }\n\n      var vs,\n          bs,\n          ws = (n(Is, bs = Se), Is),\n          Es = (n(Ts, vs = Se), Ts);\n\n      function Ts(t, e, n, r, i) {\n        void 0 === i && (i = []);\n        var o = this;\n        return (o = vs.call(this) || this).key = t, o.data = e, o.fieldMask = n, o.precondition = r, o.fieldTransforms = i, o.type = 1, o;\n      }\n\n      function Is(t, e, n, r) {\n        void 0 === r && (r = []);\n        var i = this;\n        return (i = bs.call(this) || this).key = t, i.value = e, i.precondition = n, i.fieldTransforms = r, i.type = 0, i;\n      }\n\n      function _s(n) {\n        var r = new Map();\n        return n.fieldMask.fields.forEach(function (t) {\n          var e;\n          t.isEmpty() || (e = n.data.field(t), r.set(t, e));\n        }), r;\n      }\n\n      function Ss(t, e, n) {\n        var r = new Map();\n        zr(t.length === n.length);\n\n        for (var i = 0; i < n.length; i++) {\n          var o = t[i],\n              s = o.transform,\n              a = e.data.field(o.field);\n          r.set(o.field, (o = s, s = a, a = n[i], o instanceof $o ? ts(o, s) : o instanceof ns ? is(o, s) : a));\n        }\n\n        return r;\n      }\n\n      function As(t, e, n) {\n        for (var r, i = new Map(), o = 0, s = t; o < s.length; o++) {\n          var a = s[o],\n              u = a.transform,\n              c = n.data.field(a.field);\n          i.set(a.field, (r = c, a = e, c = void 0, (u = u) instanceof Xo ? (c = {\n            fields: {\n              __type__: {\n                stringValue: \"server_timestamp\"\n              },\n              __local_write_time__: {\n                timestampValue: {\n                  seconds: a.seconds,\n                  nanos: a.nanoseconds\n                }\n              }\n            }\n          }, r && (c.fields.__previous_value__ = r), {\n            mapValue: c\n          }) : u instanceof $o ? ts(u, r) : u instanceof ns ? is(u, r) : (u = zo(c = u, r), r = us(u) + us(c.A), Mi(u) && Mi(c.A) ? Qo(r) : Go(c.R, r))));\n        }\n\n        return i;\n      }\n\n      function Ns(t) {\n        this.count = t;\n      }\n\n      var Ds,\n          Cs,\n          ks,\n          Rs = (n(Ls, ks = Se), Ls),\n          xs = (n(Os, Cs = Se), Os);\n\n      function Os(t, e) {\n        var n = this;\n        return (n = Cs.call(this) || this).key = t, n.precondition = e, n.type = 3, n.fieldTransforms = [], n;\n      }\n\n      function Ls(t, e) {\n        var n = this;\n        return (n = ks.call(this) || this).key = t, n.precondition = e, n.type = 2, n.fieldTransforms = [], n;\n      }\n\n      function Ps(t) {\n        switch (t) {\n          case Fr.OK:\n            return Hr(), 0;\n\n          case Fr.CANCELLED:\n          case Fr.UNKNOWN:\n          case Fr.DEADLINE_EXCEEDED:\n          case Fr.RESOURCE_EXHAUSTED:\n          case Fr.INTERNAL:\n          case Fr.UNAVAILABLE:\n          case Fr.UNAUTHENTICATED:\n            return;\n\n          case Fr.INVALID_ARGUMENT:\n          case Fr.NOT_FOUND:\n          case Fr.ALREADY_EXISTS:\n          case Fr.PERMISSION_DENIED:\n          case Fr.FAILED_PRECONDITION:\n          case Fr.ABORTED:\n          case Fr.OUT_OF_RANGE:\n          case Fr.UNIMPLEMENTED:\n          case Fr.DATA_LOSS:\n            return 1;\n\n          default:\n            return Hr(), 0;\n        }\n      }\n\n      function Ms(t) {\n        if (void 0 === t) return Kr(\"GRPC error has no .code\"), Fr.UNKNOWN;\n\n        switch (t) {\n          case Ds.OK:\n            return Fr.OK;\n\n          case Ds.CANCELLED:\n            return Fr.CANCELLED;\n\n          case Ds.UNKNOWN:\n            return Fr.UNKNOWN;\n\n          case Ds.DEADLINE_EXCEEDED:\n            return Fr.DEADLINE_EXCEEDED;\n\n          case Ds.RESOURCE_EXHAUSTED:\n            return Fr.RESOURCE_EXHAUSTED;\n\n          case Ds.INTERNAL:\n            return Fr.INTERNAL;\n\n          case Ds.UNAVAILABLE:\n            return Fr.UNAVAILABLE;\n\n          case Ds.UNAUTHENTICATED:\n            return Fr.UNAUTHENTICATED;\n\n          case Ds.INVALID_ARGUMENT:\n            return Fr.INVALID_ARGUMENT;\n\n          case Ds.NOT_FOUND:\n            return Fr.NOT_FOUND;\n\n          case Ds.ALREADY_EXISTS:\n            return Fr.ALREADY_EXISTS;\n\n          case Ds.PERMISSION_DENIED:\n            return Fr.PERMISSION_DENIED;\n\n          case Ds.FAILED_PRECONDITION:\n            return Fr.FAILED_PRECONDITION;\n\n          case Ds.ABORTED:\n            return Fr.ABORTED;\n\n          case Ds.OUT_OF_RANGE:\n            return Fr.OUT_OF_RANGE;\n\n          case Ds.UNIMPLEMENTED:\n            return Fr.UNIMPLEMENTED;\n\n          case Ds.DATA_LOSS:\n            return Fr.DATA_LOSS;\n\n          default:\n            return Hr();\n        }\n      }\n\n      (I = Ds = Ds || {})[I.OK = 0] = \"OK\", I[I.CANCELLED = 1] = \"CANCELLED\", I[I.UNKNOWN = 2] = \"UNKNOWN\", I[I.INVALID_ARGUMENT = 3] = \"INVALID_ARGUMENT\", I[I.DEADLINE_EXCEEDED = 4] = \"DEADLINE_EXCEEDED\", I[I.NOT_FOUND = 5] = \"NOT_FOUND\", I[I.ALREADY_EXISTS = 6] = \"ALREADY_EXISTS\", I[I.PERMISSION_DENIED = 7] = \"PERMISSION_DENIED\", I[I.UNAUTHENTICATED = 16] = \"UNAUTHENTICATED\", I[I.RESOURCE_EXHAUSTED = 8] = \"RESOURCE_EXHAUSTED\", I[I.FAILED_PRECONDITION = 9] = \"FAILED_PRECONDITION\", I[I.ABORTED = 10] = \"ABORTED\", I[I.OUT_OF_RANGE = 11] = \"OUT_OF_RANGE\", I[I.UNIMPLEMENTED = 12] = \"UNIMPLEMENTED\", I[I.INTERNAL = 13] = \"INTERNAL\", I[I.UNAVAILABLE = 14] = \"UNAVAILABLE\", I[I.DATA_LOSS = 15] = \"DATA_LOSS\";\n      var Fs = (js.prototype.insert = function (t, e) {\n        return new js(this.comparator, this.root.insert(t, e, this.comparator).copy(null, null, Us.BLACK, null, null));\n      }, js.prototype.remove = function (t) {\n        return new js(this.comparator, this.root.remove(t, this.comparator).copy(null, null, Us.BLACK, null, null));\n      }, js.prototype.get = function (t) {\n        for (var e = this.root; !e.isEmpty();) {\n          var n = this.comparator(t, e.key);\n          if (0 === n) return e.value;\n          n < 0 ? e = e.left : 0 < n && (e = e.right);\n        }\n\n        return null;\n      }, js.prototype.indexOf = function (t) {\n        for (var e = 0, n = this.root; !n.isEmpty();) {\n          var r = this.comparator(t, n.key);\n          if (0 === r) return e + n.left.size;\n          n = r < 0 ? n.left : (e += n.left.size + 1, n.right);\n        }\n\n        return -1;\n      }, js.prototype.isEmpty = function () {\n        return this.root.isEmpty();\n      }, Object.defineProperty(js.prototype, \"size\", {\n        get: function get() {\n          return this.root.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), js.prototype.minKey = function () {\n        return this.root.minKey();\n      }, js.prototype.maxKey = function () {\n        return this.root.maxKey();\n      }, js.prototype.inorderTraversal = function (t) {\n        return this.root.inorderTraversal(t);\n      }, js.prototype.forEach = function (n) {\n        this.inorderTraversal(function (t, e) {\n          return n(t, e), !1;\n        });\n      }, js.prototype.toString = function () {\n        var n = [];\n        return this.inorderTraversal(function (t, e) {\n          return n.push(t + \":\" + e), !1;\n        }), \"{\" + n.join(\", \") + \"}\";\n      }, js.prototype.reverseTraversal = function (t) {\n        return this.root.reverseTraversal(t);\n      }, js.prototype.getIterator = function () {\n        return new Vs(this.root, null, this.comparator, !1);\n      }, js.prototype.getIteratorFrom = function (t) {\n        return new Vs(this.root, t, this.comparator, !1);\n      }, js.prototype.getReverseIterator = function () {\n        return new Vs(this.root, null, this.comparator, !0);\n      }, js.prototype.getReverseIteratorFrom = function (t) {\n        return new Vs(this.root, t, this.comparator, !0);\n      }, js),\n          Vs = (Bs.prototype.getNext = function () {\n        var t = this.nodeStack.pop(),\n            e = {\n          key: t.key,\n          value: t.value\n        };\n        if (this.isReverse) for (t = t.left; !t.isEmpty();) {\n          this.nodeStack.push(t), t = t.right;\n        } else for (t = t.right; !t.isEmpty();) {\n          this.nodeStack.push(t), t = t.left;\n        }\n        return e;\n      }, Bs.prototype.hasNext = function () {\n        return 0 < this.nodeStack.length;\n      }, Bs.prototype.peek = function () {\n        if (0 === this.nodeStack.length) return null;\n        var t = this.nodeStack[this.nodeStack.length - 1];\n        return {\n          key: t.key,\n          value: t.value\n        };\n      }, Bs),\n          Us = (qs.prototype.copy = function (t, e, n, r, i) {\n        return new qs(null != t ? t : this.key, null != e ? e : this.value, null != n ? n : this.color, null != r ? r : this.left, null != i ? i : this.right);\n      }, qs.prototype.isEmpty = function () {\n        return !1;\n      }, qs.prototype.inorderTraversal = function (t) {\n        return this.left.inorderTraversal(t) || t(this.key, this.value) || this.right.inorderTraversal(t);\n      }, qs.prototype.reverseTraversal = function (t) {\n        return this.right.reverseTraversal(t) || t(this.key, this.value) || this.left.reverseTraversal(t);\n      }, qs.prototype.min = function () {\n        return this.left.isEmpty() ? this : this.left.min();\n      }, qs.prototype.minKey = function () {\n        return this.min().key;\n      }, qs.prototype.maxKey = function () {\n        return this.right.isEmpty() ? this.key : this.right.maxKey();\n      }, qs.prototype.insert = function (t, e, n) {\n        var r = this,\n            i = n(t, r.key);\n        return (r = i < 0 ? r.copy(null, null, null, r.left.insert(t, e, n), null) : 0 === i ? r.copy(null, e, null, null, null) : r.copy(null, null, null, null, r.right.insert(t, e, n))).fixUp();\n      }, qs.prototype.removeMin = function () {\n        if (this.left.isEmpty()) return qs.EMPTY;\n        var t = this;\n        return (t = (t = !t.left.isRed() && !t.left.left.isRed() ? t.moveRedLeft() : t).copy(null, null, null, t.left.removeMin(), null)).fixUp();\n      }, qs.prototype.remove = function (t, e) {\n        var n,\n            r = this;\n        if (e(t, r.key) < 0) r = (r = !(r.left.isEmpty() || r.left.isRed() || r.left.left.isRed()) ? r.moveRedLeft() : r).copy(null, null, null, r.left.remove(t, e), null);else {\n          if (0 === e(t, (r = !((r = r.left.isRed() ? r.rotateRight() : r).right.isEmpty() || r.right.isRed() || r.right.left.isRed()) ? r.moveRedRight() : r).key)) {\n            if (r.right.isEmpty()) return qs.EMPTY;\n            n = r.right.min(), r = r.copy(n.key, n.value, null, null, r.right.removeMin());\n          }\n\n          r = r.copy(null, null, null, null, r.right.remove(t, e));\n        }\n        return r.fixUp();\n      }, qs.prototype.isRed = function () {\n        return this.color;\n      }, qs.prototype.fixUp = function () {\n        var t = this;\n        return t = (t = (t = t.right.isRed() && !t.left.isRed() ? t.rotateLeft() : t).left.isRed() && t.left.left.isRed() ? t.rotateRight() : t).left.isRed() && t.right.isRed() ? t.colorFlip() : t;\n      }, qs.prototype.moveRedLeft = function () {\n        var t = this.colorFlip();\n        return t = t.right.left.isRed() ? (t = (t = t.copy(null, null, null, null, t.right.rotateRight())).rotateLeft()).colorFlip() : t;\n      }, qs.prototype.moveRedRight = function () {\n        var t = this.colorFlip();\n        return t = t.left.left.isRed() ? (t = t.rotateRight()).colorFlip() : t;\n      }, qs.prototype.rotateLeft = function () {\n        var t = this.copy(null, null, qs.RED, null, this.right.left);\n        return this.right.copy(null, null, this.color, t, null);\n      }, qs.prototype.rotateRight = function () {\n        var t = this.copy(null, null, qs.RED, this.left.right, null);\n        return this.left.copy(null, null, this.color, null, t);\n      }, qs.prototype.colorFlip = function () {\n        var t = this.left.copy(null, null, !this.left.color, null, null),\n            e = this.right.copy(null, null, !this.right.color, null, null);\n        return this.copy(null, null, !this.color, t, e);\n      }, qs.prototype.checkMaxDepth = function () {\n        var t = this.check();\n        return Math.pow(2, t) <= this.size + 1;\n      }, qs.prototype.check = function () {\n        if (this.isRed() && this.left.isRed()) throw Hr();\n        if (this.right.isRed()) throw Hr();\n        var t = this.left.check();\n        if (t !== this.right.check()) throw Hr();\n        return t + (this.isRed() ? 0 : 1);\n      }, qs);\n\n      function qs(t, e, n, r, i) {\n        this.key = t, this.value = e, this.color = null != n ? n : qs.RED, this.left = null != r ? r : qs.EMPTY, this.right = null != i ? i : qs.EMPTY, this.size = this.left.size + 1 + this.right.size;\n      }\n\n      function Bs(t, e, n, r) {\n        this.isReverse = r, this.nodeStack = [];\n\n        for (var i = 1; !t.isEmpty();) {\n          if (i = e ? n(t.key, e) : 1, r && (i *= -1), i < 0) t = this.isReverse ? t.left : t.right;else {\n            if (0 === i) {\n              this.nodeStack.push(t);\n              break;\n            }\n\n            this.nodeStack.push(t), t = this.isReverse ? t.right : t.left;\n          }\n        }\n      }\n\n      function js(t, e) {\n        this.comparator = t, this.root = e || Us.EMPTY;\n      }\n\n      function Ks() {\n        this.size = 0;\n      }\n\n      Us.EMPTY = null, Us.RED = !0, Us.BLACK = !1, Us.EMPTY = (Object.defineProperty(Ks.prototype, \"key\", {\n        get: function get() {\n          throw Hr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ks.prototype, \"value\", {\n        get: function get() {\n          throw Hr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ks.prototype, \"color\", {\n        get: function get() {\n          throw Hr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ks.prototype, \"left\", {\n        get: function get() {\n          throw Hr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ks.prototype, \"right\", {\n        get: function get() {\n          throw Hr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ks.prototype.copy = function (t, e, n, r, i) {\n        return this;\n      }, Ks.prototype.insert = function (t, e, n) {\n        return new Us(t, e);\n      }, Ks.prototype.remove = function (t, e) {\n        return this;\n      }, Ks.prototype.isEmpty = function () {\n        return !0;\n      }, Ks.prototype.inorderTraversal = function (t) {\n        return !1;\n      }, Ks.prototype.reverseTraversal = function (t) {\n        return !1;\n      }, Ks.prototype.minKey = function () {\n        return null;\n      }, Ks.prototype.maxKey = function () {\n        return null;\n      }, Ks.prototype.isRed = function () {\n        return !1;\n      }, Ks.prototype.checkMaxDepth = function () {\n        return !0;\n      }, Ks.prototype.check = function () {\n        return 0;\n      }, new Ks());\n      var Gs = (Ws.prototype.has = function (t) {\n        return null !== this.data.get(t);\n      }, Ws.prototype.first = function () {\n        return this.data.minKey();\n      }, Ws.prototype.last = function () {\n        return this.data.maxKey();\n      }, Object.defineProperty(Ws.prototype, \"size\", {\n        get: function get() {\n          return this.data.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ws.prototype.indexOf = function (t) {\n        return this.data.indexOf(t);\n      }, Ws.prototype.forEach = function (n) {\n        this.data.inorderTraversal(function (t, e) {\n          return n(t), !1;\n        });\n      }, Ws.prototype.forEachInRange = function (t, e) {\n        for (var n = this.data.getIteratorFrom(t[0]); n.hasNext();) {\n          var r = n.getNext();\n          if (0 <= this.comparator(r.key, t[1])) return;\n          e(r.key);\n        }\n      }, Ws.prototype.forEachWhile = function (t, e) {\n        for (var n = void 0 !== e ? this.data.getIteratorFrom(e) : this.data.getIterator(); n.hasNext();) {\n          if (!t(n.getNext().key)) return;\n        }\n      }, Ws.prototype.firstAfterOrEqual = function (t) {\n        t = this.data.getIteratorFrom(t);\n        return t.hasNext() ? t.getNext().key : null;\n      }, Ws.prototype.getIterator = function () {\n        return new Qs(this.data.getIterator());\n      }, Ws.prototype.getIteratorFrom = function (t) {\n        return new Qs(this.data.getIteratorFrom(t));\n      }, Ws.prototype.add = function (t) {\n        return this.copy(this.data.remove(t).insert(t, !0));\n      }, Ws.prototype.delete = function (t) {\n        return this.has(t) ? this.copy(this.data.remove(t)) : this;\n      }, Ws.prototype.isEmpty = function () {\n        return this.data.isEmpty();\n      }, Ws.prototype.unionWith = function (t) {\n        var e = this;\n        return e.size < t.size && (e = t, t = this), t.forEach(function (t) {\n          e = e.add(t);\n        }), e;\n      }, Ws.prototype.isEqual = function (t) {\n        if (!(t instanceof Ws)) return !1;\n        if (this.size !== t.size) return !1;\n\n        for (var e = this.data.getIterator(), n = t.data.getIterator(); e.hasNext();) {\n          var r = e.getNext().key,\n              i = n.getNext().key;\n          if (0 !== this.comparator(r, i)) return !1;\n        }\n\n        return !0;\n      }, Ws.prototype.toArray = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          e.push(t);\n        }), e;\n      }, Ws.prototype.toString = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          return e.push(t);\n        }), \"SortedSet(\" + e.toString() + \")\";\n      }, Ws.prototype.copy = function (t) {\n        var e = new Ws(this.comparator);\n        return e.data = t, e;\n      }, Ws),\n          Qs = (zs.prototype.getNext = function () {\n        return this.iter.getNext().key;\n      }, zs.prototype.hasNext = function () {\n        return this.iter.hasNext();\n      }, zs),\n          Hs = new Fs(Ni.comparator);\n\n      function zs(t) {\n        this.iter = t;\n      }\n\n      function Ws(t) {\n        this.comparator = t, this.data = new Fs(this.comparator);\n      }\n\n      var Ys = new Fs(Ni.comparator);\n      var Xs = new Fs(Ni.comparator);\n      var $s = new Gs(Ni.comparator);\n\n      function Js() {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        for (var n = $s, r = 0, i = t; r < i.length; r++) {\n          var o = i[r],\n              n = n.add(o);\n        }\n\n        return n;\n      }\n\n      var Zs = new Gs(Xr);\n\n      var ta = (ha.createSynthesizedRemoteEventForCurrentChange = function (t, e) {\n        var n = new Map();\n        return n.set(t, ea.createSynthesizedTargetChangeForCurrentChange(t, e)), new ha(ti.min(), n, Zs, Hs, Js());\n      }, ha),\n          ea = (ca.createSynthesizedTargetChangeForCurrentChange = function (t, e) {\n        return new ca(fi.EMPTY_BYTE_STRING, e, Js(), Js(), Js());\n      }, ca),\n          na = function na(t, e, n, r) {\n        this.v = t, this.removedTargetIds = e, this.key = n, this.P = r;\n      },\n          ra = function ra(t, e) {\n        this.targetId = t, this.V = e;\n      },\n          ia = function ia(t, e, n, r) {\n        void 0 === n && (n = fi.EMPTY_BYTE_STRING), void 0 === r && (r = null), this.state = t, this.targetIds = e, this.resumeToken = n, this.cause = r;\n      },\n          oa = (Object.defineProperty(ua.prototype, \"current\", {\n        get: function get() {\n          return this.N;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(ua.prototype, \"resumeToken\", {\n        get: function get() {\n          return this.C;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(ua.prototype, \"k\", {\n        get: function get() {\n          return 0 !== this.S;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(ua.prototype, \"$\", {\n        get: function get() {\n          return this.F;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ua.prototype.O = function (t) {\n        0 < t.approximateByteSize() && (this.F = !0, this.C = t);\n      }, ua.prototype.M = function () {\n        var n = Js(),\n            r = Js(),\n            i = Js();\n        return this.D.forEach(function (t, e) {\n          switch (e) {\n            case 0:\n              n = n.add(t);\n              break;\n\n            case 2:\n              r = r.add(t);\n              break;\n\n            case 1:\n              i = i.add(t);\n              break;\n\n            default:\n              Hr();\n          }\n        }), new ea(this.C, this.N, n, r, i);\n      }, ua.prototype.L = function () {\n        this.F = !1, this.D = fa();\n      }, ua.prototype.B = function (t, e) {\n        this.F = !0, this.D = this.D.insert(t, e);\n      }, ua.prototype.q = function (t) {\n        this.F = !0, this.D = this.D.remove(t);\n      }, ua.prototype.U = function () {\n        this.S += 1;\n      }, ua.prototype.K = function () {\n        --this.S;\n      }, ua.prototype.j = function () {\n        this.F = !0, this.N = !0;\n      }, ua),\n          sa = (aa.prototype.X = function (t) {\n        for (var e = 0, n = t.v; e < n.length; e++) {\n          var r = n[e];\n          t.P && t.P.isFoundDocument() ? this.Z(r, t.P) : this.tt(r, t.key, t.P);\n        }\n\n        for (var i = 0, o = t.removedTargetIds; i < o.length; i++) {\n          r = o[i], this.tt(r, t.key, t.P);\n        }\n      }, aa.prototype.et = function (n) {\n        var r = this;\n        this.forEachTarget(n, function (t) {\n          var e = r.nt(t);\n\n          switch (n.state) {\n            case 0:\n              r.st(t) && e.O(n.resumeToken);\n              break;\n\n            case 1:\n              e.K(), e.k || e.L(), e.O(n.resumeToken);\n              break;\n\n            case 2:\n              e.K(), e.k || r.removeTarget(t);\n              break;\n\n            case 3:\n              r.st(t) && (e.j(), e.O(n.resumeToken));\n              break;\n\n            case 4:\n              r.st(t) && (r.it(t), e.O(n.resumeToken));\n              break;\n\n            default:\n              Hr();\n          }\n        });\n      }, aa.prototype.forEachTarget = function (t, n) {\n        var r = this;\n        0 < t.targetIds.length ? t.targetIds.forEach(n) : this.G.forEach(function (t, e) {\n          r.st(e) && n(e);\n        });\n      }, aa.prototype.rt = function (t) {\n        var e = t.targetId,\n            n = t.V.count,\n            t = this.ot(e);\n        t && (Xi(t = t.target) ? 0 === n ? (t = new Ni(t.path), this.tt(e, t, Gi.newNoDocument(t, ti.min()))) : zr(1 === n) : this.ct(e) !== n && (this.it(e), this.Y = this.Y.add(e)));\n      }, aa.prototype.ut = function (r) {\n        var i = this,\n            o = new Map();\n        this.G.forEach(function (t, e) {\n          var n = i.ot(e);\n          n && (t.current && Xi(n.target) && (n = new Ni(n.target.path), null !== i.H.get(n) || i.at(e, n) || i.tt(e, n, Gi.newNoDocument(n, r))), t.$ && (o.set(e, t.M()), t.L()));\n        });\n        var s = Js();\n        this.J.forEach(function (t, e) {\n          var n = !0;\n          e.forEachWhile(function (t) {\n            t = i.ot(t);\n            return !t || 2 === t.purpose || (n = !1);\n          }), n && (s = s.add(t));\n        });\n        var t = new ta(r, o, this.Y, this.H, s);\n        return this.H = Hs, this.J = la(), this.Y = new Gs(Xr), t;\n      }, aa.prototype.Z = function (t, e) {\n        var n;\n        this.st(t) && (n = this.at(t, e.key) ? 2 : 0, this.nt(t).B(e.key, n), this.H = this.H.insert(e.key, e), this.J = this.J.insert(e.key, this.ht(e.key).add(t)));\n      }, aa.prototype.tt = function (t, e, n) {\n        var r;\n        this.st(t) && (r = this.nt(t), this.at(t, e) ? r.B(e, 1) : r.q(e), this.J = this.J.insert(e, this.ht(e).delete(t)), n && (this.H = this.H.insert(e, n)));\n      }, aa.prototype.removeTarget = function (t) {\n        this.G.delete(t);\n      }, aa.prototype.ct = function (t) {\n        var e = this.nt(t).M();\n        return this.W.getRemoteKeysForTarget(t).size + e.addedDocuments.size - e.removedDocuments.size;\n      }, aa.prototype.U = function (t) {\n        this.nt(t).U();\n      }, aa.prototype.nt = function (t) {\n        var e = this.G.get(t);\n        return e || (e = new oa(), this.G.set(t, e)), e;\n      }, aa.prototype.ht = function (t) {\n        var e = this.J.get(t);\n        return e || (e = new Gs(Xr), this.J = this.J.insert(t, e)), e;\n      }, aa.prototype.st = function (t) {\n        var e = null !== this.ot(t);\n        return e || jr(\"WatchChangeAggregator\", \"Detected inactive target\", t), e;\n      }, aa.prototype.ot = function (t) {\n        var e = this.G.get(t);\n        return e && e.k ? null : this.W.lt(t);\n      }, aa.prototype.it = function (e) {\n        var n = this;\n        this.G.set(e, new oa()), this.W.getRemoteKeysForTarget(e).forEach(function (t) {\n          n.tt(e, t, null);\n        });\n      }, aa.prototype.at = function (t, e) {\n        return this.W.getRemoteKeysForTarget(t).has(e);\n      }, aa);\n\n      function aa(t) {\n        this.W = t, this.G = new Map(), this.H = Hs, this.J = la(), this.Y = new Gs(Xr);\n      }\n\n      function ua() {\n        this.S = 0, this.D = fa(), this.C = fi.EMPTY_BYTE_STRING, this.N = !1, this.F = !0;\n      }\n\n      function ca(t, e, n, r, i) {\n        this.resumeToken = t, this.current = e, this.addedDocuments = n, this.modifiedDocuments = r, this.removedDocuments = i;\n      }\n\n      function ha(t, e, n, r, i) {\n        this.snapshotVersion = t, this.targetChanges = e, this.targetMismatches = n, this.documentUpdates = r, this.resolvedLimboDocuments = i;\n      }\n\n      function la() {\n        return new Fs(Ni.comparator);\n      }\n\n      function fa() {\n        return new Fs(Ni.comparator);\n      }\n\n      var da = {\n        asc: \"ASCENDING\",\n        desc: \"DESCENDING\"\n      },\n          pa = {\n        \"<\": \"LESS_THAN\",\n        \"<=\": \"LESS_THAN_OR_EQUAL\",\n        \">\": \"GREATER_THAN\",\n        \">=\": \"GREATER_THAN_OR_EQUAL\",\n        \"==\": \"EQUAL\",\n        \"!=\": \"NOT_EQUAL\",\n        \"array-contains\": \"ARRAY_CONTAINS\",\n        in: \"IN\",\n        \"not-in\": \"NOT_IN\",\n        \"array-contains-any\": \"ARRAY_CONTAINS_ANY\"\n      },\n          ya = function ya(t, e) {\n        this.databaseId = t, this.I = e;\n      };\n\n      function ga(t, e) {\n        return t.I ? new Date(1e3 * e.seconds).toISOString().replace(/\\.\\d*/, \"\").replace(\"Z\", \"\") + \".\" + (\"000000000\" + e.nanoseconds).slice(-9) + \"Z\" : {\n          seconds: \"\" + e.seconds,\n          nanos: e.nanoseconds\n        };\n      }\n\n      function ma(t, e) {\n        return t.I ? e.toBase64() : e.toUint8Array();\n      }\n\n      function va(t) {\n        return zr(!!t), ti.fromTimestamp((t = bi(t), new Zr(t.seconds, t.nanos)));\n      }\n\n      function ba(t, e) {\n        return new ui([\"projects\", t.projectId, \"databases\", t.database]).child(\"documents\").child(e).canonicalString();\n      }\n\n      function wa(t) {\n        t = ui.fromString(t);\n        return zr(qa(t)), t;\n      }\n\n      function Ea(t, e) {\n        return ba(t.databaseId, e.path);\n      }\n\n      function Ta(t, e) {\n        e = wa(e);\n        if (e.get(1) !== t.databaseId.projectId) throw new Vr(Fr.INVALID_ARGUMENT, \"Tried to deserialize key from different project: \" + e.get(1) + \" vs \" + t.databaseId.projectId);\n        if (e.get(3) !== t.databaseId.database) throw new Vr(Fr.INVALID_ARGUMENT, \"Tried to deserialize key from different database: \" + e.get(3) + \" vs \" + t.databaseId.database);\n        return new Ni(Aa(e));\n      }\n\n      function Ia(t, e) {\n        return ba(t.databaseId, e);\n      }\n\n      function _a(t) {\n        t = wa(t);\n        return 4 === t.length ? ui.emptyPath() : Aa(t);\n      }\n\n      function Sa(t) {\n        return new ui([\"projects\", t.databaseId.projectId, \"databases\", t.databaseId.database]).canonicalString();\n      }\n\n      function Aa(t) {\n        return zr(4 < t.length && \"documents\" === t.get(4)), t.popFirst(5);\n      }\n\n      function Na(t, e, n) {\n        return {\n          name: Ea(t, e),\n          fields: n.value.mapValue.fields\n        };\n      }\n\n      function Da(t, e, n) {\n        var r = Ta(t, e.name),\n            t = va(e.updateTime),\n            e = new ji({\n          mapValue: {\n            fields: e.fields\n          }\n        }),\n            e = Gi.newFoundDocument(r, t, e);\n        return n && e.setHasCommittedMutations(), n ? e.setHasCommittedMutations() : e;\n      }\n\n      function Ca(t, e) {\n        var n, r, i;\n        if (e instanceof ws) n = {\n          update: Na(t, e.key, e.value)\n        };else if (e instanceof Rs) n = {\n          delete: Ea(t, e.key)\n        };else if (e instanceof Es) n = {\n          update: Na(t, e.key, e.data),\n          updateMask: (r = e.fieldMask, i = [], r.fields.forEach(function (t) {\n            return i.push(t.canonicalString());\n          }), {\n            fieldPaths: i\n          })\n        };else {\n          if (!(e instanceof xs)) return Hr();\n          n = {\n            verify: Ea(t, e.key)\n          };\n        }\n        return 0 < e.fieldTransforms.length && (n.updateTransforms = e.fieldTransforms.map(function (t) {\n          var e = t.transform;\n          if (e instanceof Xo) return {\n            fieldPath: t.field.canonicalString(),\n            setToServerValue: \"REQUEST_TIME\"\n          };\n          if (e instanceof $o) return {\n            fieldPath: t.field.canonicalString(),\n            appendMissingElements: {\n              values: e.elements\n            }\n          };\n          if (e instanceof ns) return {\n            fieldPath: t.field.canonicalString(),\n            removeAllFromArray: {\n              values: e.elements\n            }\n          };\n          if (e instanceof ss) return {\n            fieldPath: t.field.canonicalString(),\n            increment: e.A\n          };\n          throw Hr();\n        })), e.precondition.isNone || (n.currentDocument = void 0 !== (e = e.precondition).updateTime ? {\n          updateTime: ga(t, e.updateTime.toTimestamp())\n        } : void 0 !== e.exists ? {\n          exists: e.exists\n        } : Hr()), n;\n      }\n\n      function ka(e, t) {\n        var n = t.currentDocument ? void 0 !== (s = t.currentDocument).updateTime ? fs.updateTime(va(s.updateTime)) : void 0 !== s.exists ? fs.exists(s.exists) : fs.none() : fs.none(),\n            r = t.updateTransforms ? t.updateTransforms.map(function (t) {\n          return function (t, e) {\n            var n,\n                r = null;\n            \"setToServerValue\" in e ? (zr(\"REQUEST_TIME\" === e.setToServerValue), r = new Xo()) : \"appendMissingElements\" in e ? (n = e.appendMissingElements.values || [], r = new $o(n)) : \"removeAllFromArray\" in e ? (n = e.removeAllFromArray.values || [], r = new ns(n)) : \"increment\" in e ? r = new ss(t, e.increment) : Hr();\n            e = hi.fromServerFormat(e.fieldPath);\n            return new ls(e, r);\n          }(e, t);\n        }) : [];\n\n        if (t.update) {\n          t.update.name;\n          var i = Ta(e, t.update.name),\n              o = new ji({\n            mapValue: {\n              fields: t.update.fields\n            }\n          });\n\n          if (t.updateMask) {\n            var s = (s = t.updateMask.fieldPaths || [], new li(s.map(function (t) {\n              return hi.fromServerFormat(t);\n            })));\n            return new Es(i, o, s, n, r);\n          }\n\n          return new ws(i, o, n, r);\n        }\n\n        if (t.delete) {\n          r = Ta(e, t.delete);\n          return new Rs(r, n);\n        }\n\n        if (t.verify) {\n          t = Ta(e, t.verify);\n          return new xs(t, n);\n        }\n\n        return Hr();\n      }\n\n      function Ra(t, e) {\n        return {\n          documents: [Ia(t, e.path)]\n        };\n      }\n\n      function xa(t, e) {\n        var n = {\n          structuredQuery: {}\n        },\n            r = e.path;\n        null !== e.collectionGroup ? (n.parent = Ia(t, r), n.structuredQuery.from = [{\n          collectionId: e.collectionGroup,\n          allDescendants: !0\n        }]) : (n.parent = Ia(t, r.popLast()), n.structuredQuery.from = [{\n          collectionId: r.lastSegment()\n        }]);\n\n        r = function (t) {\n          if (0 !== t.length) {\n            t = t.map(function (t) {\n              if (\"==\" === t.op) {\n                if (Ui(t.value)) return {\n                  unaryFilter: {\n                    field: Ma(t.field),\n                    op: \"IS_NAN\"\n                  }\n                };\n                if (Vi(t.value)) return {\n                  unaryFilter: {\n                    field: Ma(t.field),\n                    op: \"IS_NULL\"\n                  }\n                };\n              } else if (\"!=\" === t.op) {\n                if (Ui(t.value)) return {\n                  unaryFilter: {\n                    field: Ma(t.field),\n                    op: \"IS_NOT_NAN\"\n                  }\n                };\n                if (Vi(t.value)) return {\n                  unaryFilter: {\n                    field: Ma(t.field),\n                    op: \"IS_NOT_NULL\"\n                  }\n                };\n              }\n\n              return {\n                fieldFilter: {\n                  field: Ma(t.field),\n                  op: (e = t.op, pa[e]),\n                  value: t.value\n                }\n              };\n              var e;\n            });\n            return 1 === t.length ? t[0] : {\n              compositeFilter: {\n                op: \"AND\",\n                filters: t\n              }\n            };\n          }\n        }(e.filters);\n\n        r && (n.structuredQuery.where = r);\n\n        r = function (t) {\n          if (0 !== t.length) return t.map(function (t) {\n            return {\n              field: Ma((t = t).field),\n              direction: (t = t.dir, da[t])\n            };\n          });\n        }(e.orderBy);\n\n        r && (n.structuredQuery.orderBy = r);\n        r = e.limit, r = t.I || _i(r) ? r : {\n          value: r\n        };\n        return null !== r && (n.structuredQuery.limit = r), e.startAt && (n.structuredQuery.startAt = La(e.startAt)), e.endAt && (n.structuredQuery.endAt = La(e.endAt)), n;\n      }\n\n      function Oa(t) {\n        var e = _a(t.parent),\n            n = t.structuredQuery,\n            r = n.from ? n.from.length : 0,\n            i = null;\n\n        0 < r && (zr(1 === r), (a = n.from[0]).allDescendants ? i = a.collectionId : e = e.child(a.collectionId));\n        var o = [];\n        n.where && (o = function e(t) {\n          return t ? void 0 !== t.unaryFilter ? [Ua(t)] : void 0 !== t.fieldFilter ? [Va(t)] : void 0 !== t.compositeFilter ? t.compositeFilter.filters.map(function (t) {\n            return e(t);\n          }).reduce(function (t, e) {\n            return t.concat(e);\n          }) : Hr() : [];\n        }(n.where));\n        var s = [],\n            t = null,\n            r = null,\n            a = null;\n        return Co(e, i, s = n.orderBy ? n.orderBy.map(function (t) {\n          return new So(Fa((e = t).field), function () {\n            switch (e.direction) {\n              case \"ASCENDING\":\n                return \"asc\";\n\n              case \"DESCENDING\":\n                return \"desc\";\n\n              default:\n                return;\n            }\n          }());\n          var e;\n        }) : s, o, t = n.limit ? _i(o = \"object\" == typeof (o = n.limit) ? o.value : o) ? null : o : t, \"F\", r = n.startAt ? Pa(n.startAt) : r, a = n.endAt ? Pa(n.endAt) : a);\n      }\n\n      function La(t) {\n        return {\n          before: t.before,\n          values: t.position\n        };\n      }\n\n      function Pa(t) {\n        var e = !!t.before,\n            t = t.values || [];\n        return new bo(t, e);\n      }\n\n      function Ma(t) {\n        return {\n          fieldPath: t.canonicalString()\n        };\n      }\n\n      function Fa(t) {\n        return hi.fromServerFormat(t.fieldPath);\n      }\n\n      function Va(t) {\n        return Ji.create(Fa(t.fieldFilter.field), function () {\n          switch (t.fieldFilter.op) {\n            case \"EQUAL\":\n              return \"==\";\n\n            case \"NOT_EQUAL\":\n              return \"!=\";\n\n            case \"GREATER_THAN\":\n              return \">\";\n\n            case \"GREATER_THAN_OR_EQUAL\":\n              return \">=\";\n\n            case \"LESS_THAN\":\n              return \"<\";\n\n            case \"LESS_THAN_OR_EQUAL\":\n              return \"<=\";\n\n            case \"ARRAY_CONTAINS\":\n              return \"array-contains\";\n\n            case \"IN\":\n              return \"in\";\n\n            case \"NOT_IN\":\n              return \"not-in\";\n\n            case \"ARRAY_CONTAINS_ANY\":\n              return \"array-contains-any\";\n\n            case \"OPERATOR_UNSPECIFIED\":\n            default:\n              return Hr();\n          }\n        }(), t.fieldFilter.value);\n      }\n\n      function Ua(t) {\n        switch (t.unaryFilter.op) {\n          case \"IS_NAN\":\n            var e = Fa(t.unaryFilter.field);\n            return Ji.create(e, \"==\", {\n              doubleValue: NaN\n            });\n\n          case \"IS_NULL\":\n            e = Fa(t.unaryFilter.field);\n            return Ji.create(e, \"==\", {\n              nullValue: \"NULL_VALUE\"\n            });\n\n          case \"IS_NOT_NAN\":\n            var n = Fa(t.unaryFilter.field);\n            return Ji.create(n, \"!=\", {\n              doubleValue: NaN\n            });\n\n          case \"IS_NOT_NULL\":\n            n = Fa(t.unaryFilter.field);\n            return Ji.create(n, \"!=\", {\n              nullValue: \"NULL_VALUE\"\n            });\n\n          case \"OPERATOR_UNSPECIFIED\":\n          default:\n            return Hr();\n        }\n      }\n\n      function qa(t) {\n        return 4 <= t.length && \"projects\" === t.get(0) && \"databases\" === t.get(2);\n      }\n\n      function Ba(t) {\n        for (var e = \"\", n = 0; n < t.length; n++) {\n          0 < e.length && (e = ja(e)), e = function (t, e) {\n            for (var n = e, r = t.length, i = 0; i < r; i++) {\n              var o = t.charAt(i);\n\n              switch (o) {\n                case \"\\0\":\n                  n += \"\\x01\\x10\";\n                  break;\n\n                case \"\\x01\":\n                  n += \"\\x01\\x11\";\n                  break;\n\n                default:\n                  n += o;\n              }\n            }\n\n            return n;\n          }(t.get(n), e);\n        }\n\n        return ja(e);\n      }\n\n      function ja(t) {\n        return t + \"\\x01\\x01\";\n      }\n\n      function Ka(t) {\n        var e = t.length;\n        if (zr(2 <= e), 2 === e) return zr(\"\\x01\" === t.charAt(0) && \"\\x01\" === t.charAt(1)), ui.emptyPath();\n\n        for (var n = e - 2, r = [], i = \"\", o = 0; o < e;) {\n          var s = t.indexOf(\"\\x01\", o);\n\n          switch ((s < 0 || n < s) && Hr(), t.charAt(s + 1)) {\n            case \"\\x01\":\n              var a = t.substring(o, s),\n                  u = void 0;\n              0 === i.length ? u = a : (u = i += a, i = \"\"), r.push(u);\n              break;\n\n            case \"\\x10\":\n              i += t.substring(o, s), i += \"\\0\";\n              break;\n\n            case \"\\x11\":\n              i += t.substring(o, s + 1);\n              break;\n\n            default:\n              Hr();\n          }\n\n          o = s + 2;\n        }\n\n        return new ui(r);\n      }\n\n      function Ga(t, e, n) {\n        this.ownerId = t, this.allowTabSynchronization = e, this.leaseTimestampMs = n;\n      }\n\n      var Qa = function Qa(t, e) {\n        this.seconds = t, this.nanoseconds = e;\n      };\n\n      Ga.store = \"owner\", Ga.key = \"owner\";\n\n      function Ha(t, e, n) {\n        this.userId = t, this.lastAcknowledgedBatchId = e, this.lastStreamToken = n;\n      }\n\n      Ha.store = \"mutationQueues\", Ha.keyPath = \"userId\";\n\n      function za(t, e, n, r, i) {\n        this.userId = t, this.batchId = e, this.localWriteTimeMs = n, this.baseMutations = r, this.mutations = i;\n      }\n\n      za.store = \"mutations\", za.keyPath = \"batchId\", za.userMutationsIndex = \"userMutationsIndex\", za.userMutationsKeyPath = [\"userId\", \"batchId\"];\n      var Wa = (Ya.prefixForUser = function (t) {\n        return [t];\n      }, Ya.prefixForPath = function (t, e) {\n        return [t, Ba(e)];\n      }, Ya.key = function (t, e, n) {\n        return [t, Ba(e), n];\n      }, Ya);\n\n      function Ya() {}\n\n      Wa.store = \"documentMutations\", Wa.PLACEHOLDER = new Wa();\n\n      function Xa(t, e) {\n        this.path = t, this.readTime = e;\n      }\n\n      function $a(t, e) {\n        this.path = t, this.version = e;\n      }\n\n      var Ja = function Ja(t, e, n, r, i, o) {\n        this.unknownDocument = t, this.noDocument = e, this.document = n, this.hasCommittedMutations = r, this.readTime = i, this.parentPath = o;\n      };\n\n      Ja.store = \"remoteDocuments\", Ja.readTimeIndex = \"readTimeIndex\", Ja.readTimeIndexPath = \"readTime\", Ja.collectionReadTimeIndex = \"collectionReadTimeIndex\", Ja.collectionReadTimeIndexPath = [\"parentPath\", \"readTime\"];\n\n      function Za(t) {\n        this.byteSize = t;\n      }\n\n      Za.store = \"remoteDocumentGlobal\", Za.key = \"remoteDocumentGlobalKey\";\n\n      function tu(t, e, n, r, i, o, s) {\n        this.targetId = t, this.canonicalId = e, this.readTime = n, this.resumeToken = r, this.lastListenSequenceNumber = i, this.lastLimboFreeSnapshotVersion = o, this.query = s;\n      }\n\n      tu.store = \"targets\", tu.keyPath = \"targetId\", tu.queryTargetsIndexName = \"queryTargetsIndex\", tu.queryTargetsKeyPath = [\"canonicalId\", \"targetId\"];\n\n      var eu = function eu(t, e, n) {\n        this.targetId = t, this.path = e, this.sequenceNumber = n;\n      };\n\n      eu.store = \"targetDocuments\", eu.keyPath = [\"targetId\", \"path\"], eu.documentTargetsIndex = \"documentTargetsIndex\", eu.documentTargetsKeyPath = [\"path\", \"targetId\"];\n\n      function nu(t, e, n, r) {\n        this.highestTargetId = t, this.highestListenSequenceNumber = e, this.lastRemoteSnapshotVersion = n, this.targetCount = r;\n      }\n\n      nu.key = \"targetGlobalKey\", nu.store = \"targetGlobal\";\n\n      function ru(t, e) {\n        this.collectionId = t, this.parent = e;\n      }\n\n      ru.store = \"collectionParents\", ru.keyPath = [\"collectionId\", \"parent\"];\n\n      function iu(t, e, n, r) {\n        this.clientId = t, this.updateTimeMs = e, this.networkEnabled = n, this.inForeground = r;\n      }\n\n      iu.store = \"clientMetadata\", iu.keyPath = \"clientId\";\n\n      function ou(t, e, n) {\n        this.bundleId = t, this.createTime = e, this.version = n;\n      }\n\n      ou.store = \"bundles\", ou.keyPath = \"bundleId\";\n\n      function su(t, e, n) {\n        this.name = t, this.readTime = e, this.bundledQuery = n;\n      }\n\n      su.store = \"namedQueries\", su.keyPath = \"name\";\n\n      var au,\n          uu = s(s([], s(s([], s(s([], s(s([], [Ha.store, za.store, Wa.store, Ja.store, tu.store, Ga.store, nu.store, eu.store]), [iu.store])), [Za.store])), [ru.store])), [ou.store, su.store]),\n          cu = \"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.\",\n          Se = (Eu.prototype.addOnCommittedListener = function (t) {\n        this.onCommittedListeners.push(t);\n      }, Eu.prototype.raiseOnCommittedEvent = function () {\n        this.onCommittedListeners.forEach(function (t) {\n          return t();\n        });\n      }, Eu),\n          hu = function hu() {\n        var n = this;\n        this.promise = new Promise(function (t, e) {\n          n.resolve = t, n.reject = e;\n        });\n      },\n          lu = (wu.prototype.catch = function (t) {\n        return this.next(void 0, t);\n      }, wu.prototype.next = function (r, i) {\n        var o = this;\n        return this.callbackAttached && Hr(), this.callbackAttached = !0, this.isDone ? this.error ? this.wrapFailure(i, this.error) : this.wrapSuccess(r, this.result) : new wu(function (e, n) {\n          o.nextCallback = function (t) {\n            o.wrapSuccess(r, t).next(e, n);\n          }, o.catchCallback = function (t) {\n            o.wrapFailure(i, t).next(e, n);\n          };\n        });\n      }, wu.prototype.toPromise = function () {\n        var n = this;\n        return new Promise(function (t, e) {\n          n.next(t, e);\n        });\n      }, wu.prototype.wrapUserFunction = function (t) {\n        try {\n          var e = t();\n          return e instanceof wu ? e : wu.resolve(e);\n        } catch (t) {\n          return wu.reject(t);\n        }\n      }, wu.prototype.wrapSuccess = function (t, e) {\n        return t ? this.wrapUserFunction(function () {\n          return t(e);\n        }) : wu.resolve(e);\n      }, wu.prototype.wrapFailure = function (t, e) {\n        return t ? this.wrapUserFunction(function () {\n          return t(e);\n        }) : wu.reject(e);\n      }, wu.resolve = function (n) {\n        return new wu(function (t, e) {\n          t(n);\n        });\n      }, wu.reject = function (n) {\n        return new wu(function (t, e) {\n          e(n);\n        });\n      }, wu.waitFor = function (t) {\n        return new wu(function (e, n) {\n          var r = 0,\n              i = 0,\n              o = !1;\n          t.forEach(function (t) {\n            ++r, t.next(function () {\n              ++i, o && i === r && e();\n            }, function (t) {\n              return n(t);\n            });\n          }), o = !0, i === r && e();\n        });\n      }, wu.or = function (t) {\n        for (var n = wu.resolve(!1), e = 0, r = t; e < r.length; e++) {\n          !function (e) {\n            n = n.next(function (t) {\n              return t ? wu.resolve(t) : e();\n            });\n          }(r[e]);\n        }\n\n        return n;\n      }, wu.forEach = function (t, n) {\n        var r = this,\n            i = [];\n        return t.forEach(function (t, e) {\n          i.push(n.call(r, t, e));\n        }), this.waitFor(i);\n      }, wu),\n          fu = (bu.open = function (t, e, n, r) {\n        try {\n          return new bu(e, t.transaction(r, n));\n        } catch (t) {\n          throw new yu(e, t);\n        }\n      }, Object.defineProperty(bu.prototype, \"dt\", {\n        get: function get() {\n          return this.ft.promise;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), bu.prototype.abort = function (t) {\n        t && this.ft.reject(t), this.aborted || (jr(\"SimpleDb\", \"Aborting transaction:\", t ? t.message : \"Client-initiated abort\"), this.aborted = !0, this.transaction.abort());\n      }, bu.prototype.store = function (t) {\n        t = this.transaction.objectStore(t);\n        return new Iu(t);\n      }, bu),\n          du = (vu.delete = function (t) {\n        return jr(\"SimpleDb\", \"Removing database:\", t), Su(window.indexedDB.deleteDatabase(t)).toPromise();\n      }, vu.yt = function () {\n        if (\"undefined\" == typeof indexedDB) return !1;\n        if (vu.gt()) return !0;\n\n        var t = h(),\n            e = vu._t(t),\n            n = 0 < e && e < 10,\n            e = vu.Et(t),\n            e = 0 < e && e < 4.5;\n\n        return !(0 < t.indexOf(\"MSIE \") || 0 < t.indexOf(\"Trident/\") || 0 < t.indexOf(\"Edge/\") || n || e);\n      }, vu.gt = function () {\n        var t;\n        return \"undefined\" != typeof process && \"YES\" === (null === (t = process.env) || void 0 === t ? void 0 : t.Tt);\n      }, vu.It = function (t, e) {\n        return t.store(e);\n      }, vu._t = function (t) {\n        t = t.match(/i(?:phone|pad|pod) os ([\\d_]+)/i), t = t ? t[1].split(\"_\").slice(0, 2).join(\".\") : \"-1\";\n        return Number(t);\n      }, vu.Et = function (t) {\n        t = t.match(/Android ([\\d.]+)/i), t = t ? t[1].split(\".\").slice(0, 2).join(\".\") : \"-1\";\n        return Number(t);\n      }, vu.prototype.At = function (o) {\n        return y(this, void 0, void 0, function () {\n          var e,\n              i = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.db ? [3, 2] : (jr(\"SimpleDb\", \"Opening database:\", this.name), e = this, [4, new Promise(function (e, n) {\n                  var r = indexedDB.open(i.name, i.version);\n                  r.onsuccess = function (t) {\n                    t = t.target.result;\n                    e(t);\n                  }, r.onblocked = function () {\n                    n(new yu(o, \"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.\"));\n                  }, r.onerror = function (t) {\n                    t = t.target.error;\n                    \"VersionError\" === t.name ? n(new Vr(Fr.FAILED_PRECONDITION, \"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.\")) : n(new yu(o, t));\n                  }, r.onupgradeneeded = function (t) {\n                    jr(\"SimpleDb\", 'Database \"' + i.name + '\" requires upgrade from version:', t.oldVersion);\n                    var e = t.target.result;\n                    i.wt.Rt(e, r.transaction, t.oldVersion, i.version).next(function () {\n                      jr(\"SimpleDb\", \"Database upgrade to version \" + i.version + \" complete\");\n                    });\n                  };\n                })]);\n\n              case 1:\n                e.db = t.sent(), t.label = 2;\n\n              case 2:\n                return [2, (this.bt && (this.db.onversionchange = function (t) {\n                  return i.bt(t);\n                }), this.db)];\n            }\n          });\n        });\n      }, vu.prototype.vt = function (e) {\n        this.bt = e, this.db && (this.db.onversionchange = function (t) {\n          return e(t);\n        });\n      }, vu.prototype.runTransaction = function (a, n, u, c) {\n        return y(this, void 0, void 0, function () {\n          var i, o, s, e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                i = \"readonly\" === n, o = 0, e = function e() {\n                  var e, n, r;\n                  return g(this, function (t) {\n                    switch (t.label) {\n                      case 0:\n                        ++o, t.label = 1;\n\n                      case 1:\n                        return t.trys.push([1, 4,, 5]), [4, s.At(a)];\n\n                      case 2:\n                        return s.db = t.sent(), e = fu.open(s.db, a, i ? \"readonly\" : \"readwrite\", u), n = c(e).catch(function (t) {\n                          return e.abort(t), lu.reject(t);\n                        }).toPromise(), r = {}, n.catch(function () {}), [4, e.dt];\n\n                      case 3:\n                        return [2, (r.value = (t.sent(), n), r)];\n\n                      case 4:\n                        return n = t.sent(), r = \"FirebaseError\" !== n.name && o < 3, jr(\"SimpleDb\", \"Transaction failed with error:\", n.message, \"Retrying:\", r), s.close(), r ? [3, 5] : [2, {\n                          value: Promise.reject(n)\n                        }];\n\n                      case 5:\n                        return [2];\n                    }\n                  });\n                }, s = this, t.label = 1;\n\n              case 1:\n                return [5, e()];\n\n              case 2:\n                if (\"object\" == typeof (e = t.sent())) return [2, e.value];\n                t.label = 3;\n\n              case 3:\n                return [3, 1];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }, vu.prototype.close = function () {\n        this.db && this.db.close(), this.db = void 0;\n      }, vu),\n          pu = (Object.defineProperty(mu.prototype, \"isDone\", {\n        get: function get() {\n          return this.Vt;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(mu.prototype, \"Dt\", {\n        get: function get() {\n          return this.St;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(mu.prototype, \"cursor\", {\n        set: function set(t) {\n          this.Pt = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), mu.prototype.done = function () {\n        this.Vt = !0;\n      }, mu.prototype.Ct = function (t) {\n        this.St = t;\n      }, mu.prototype.delete = function () {\n        return Su(this.Pt.delete());\n      }, mu),\n          yu = (n(gu, au = Vr), gu);\n\n      function gu(t, e) {\n        var n = this;\n        return (n = au.call(this, Fr.UNAVAILABLE, \"IndexedDB transaction '\" + t + \"' failed: \" + e) || this).name = \"IndexedDbTransactionError\", n;\n      }\n\n      function mu(t) {\n        this.Pt = t, this.Vt = !1, this.St = null;\n      }\n\n      function vu(t, e, n) {\n        this.name = t, this.version = e, this.wt = n, 12.2 === vu._t(h()) && Kr(\"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n      }\n\n      function bu(e, t) {\n        var n = this;\n        this.action = e, this.transaction = t, this.aborted = !1, this.ft = new hu(), this.transaction.oncomplete = function () {\n          n.ft.resolve();\n        }, this.transaction.onabort = function () {\n          t.error ? n.ft.reject(new yu(e, t.error)) : n.ft.resolve();\n        }, this.transaction.onerror = function (t) {\n          t = Nu(t.target.error);\n          n.ft.reject(new yu(e, t));\n        };\n      }\n\n      function wu(t) {\n        var e = this;\n        this.nextCallback = null, this.catchCallback = null, this.result = void 0, this.error = void 0, this.isDone = !1, this.callbackAttached = !1, t(function (t) {\n          e.isDone = !0, e.result = t, e.nextCallback && e.nextCallback(t);\n        }, function (t) {\n          e.isDone = !0, e.error = t, e.catchCallback && e.catchCallback(t);\n        });\n      }\n\n      function Eu() {\n        this.onCommittedListeners = [];\n      }\n\n      function Tu(t) {\n        return \"IndexedDbTransactionError\" === t.name;\n      }\n\n      var Iu = (_u.prototype.put = function (t, e) {\n        t = void 0 !== e ? (jr(\"SimpleDb\", \"PUT\", this.store.name, t, e), this.store.put(e, t)) : (jr(\"SimpleDb\", \"PUT\", this.store.name, \"<auto-key>\", t), this.store.put(t));\n        return Su(t);\n      }, _u.prototype.add = function (t) {\n        return jr(\"SimpleDb\", \"ADD\", this.store.name, t, t), Su(this.store.add(t));\n      }, _u.prototype.get = function (e) {\n        var n = this;\n        return Su(this.store.get(e)).next(function (t) {\n          return jr(\"SimpleDb\", \"GET\", n.store.name, e, t = void 0 === t ? null : t), t;\n        });\n      }, _u.prototype.delete = function (t) {\n        return jr(\"SimpleDb\", \"DELETE\", this.store.name, t), Su(this.store.delete(t));\n      }, _u.prototype.count = function () {\n        return jr(\"SimpleDb\", \"COUNT\", this.store.name), Su(this.store.count());\n      }, _u.prototype.Nt = function (t, e) {\n        var e = this.cursor(this.options(t, e)),\n            n = [];\n        return this.xt(e, function (t, e) {\n          n.push(e);\n        }).next(function () {\n          return n;\n        });\n      }, _u.prototype.Ft = function (t, e) {\n        jr(\"SimpleDb\", \"DELETE ALL\", this.store.name);\n        e = this.options(t, e);\n        e.kt = !1;\n        e = this.cursor(e);\n        return this.xt(e, function (t, e, n) {\n          return n.delete();\n        });\n      }, _u.prototype.$t = function (t, e) {\n        e ? n = t : (n = {}, e = t);\n        var n = this.cursor(n);\n        return this.xt(n, e);\n      }, _u.prototype.Ot = function (r) {\n        var t = this.cursor({});\n        return new lu(function (n, e) {\n          t.onerror = function (t) {\n            t = Nu(t.target.error);\n            e(t);\n          }, t.onsuccess = function (t) {\n            var e = t.target.result;\n            e ? r(e.primaryKey, e.value).next(function (t) {\n              t ? e.continue() : n();\n            }) : n();\n          };\n        });\n      }, _u.prototype.xt = function (t, i) {\n        var o = [];\n        return new lu(function (r, e) {\n          t.onerror = function (t) {\n            e(t.target.error);\n          }, t.onsuccess = function (t) {\n            var e,\n                n = t.target.result;\n            n ? (e = new pu(n), (t = i(n.primaryKey, n.value, e)) instanceof lu && (t = t.catch(function (t) {\n              return e.done(), lu.reject(t);\n            }), o.push(t)), e.isDone ? r() : null === e.Dt ? n.continue() : n.continue(e.Dt)) : r();\n          };\n        }).next(function () {\n          return lu.waitFor(o);\n        });\n      }, _u.prototype.options = function (t, e) {\n        var n;\n        return void 0 !== t && (\"string\" == typeof t ? n = t : e = t), {\n          index: n,\n          range: e\n        };\n      }, _u.prototype.cursor = function (t) {\n        var e = \"next\";\n\n        if (t.reverse && (e = \"prev\"), t.index) {\n          var n = this.store.index(t.index);\n          return t.kt ? n.openKeyCursor(t.range, e) : n.openCursor(t.range, e);\n        }\n\n        return this.store.openCursor(t.range, e);\n      }, _u);\n\n      function _u(t) {\n        this.store = t;\n      }\n\n      function Su(t) {\n        return new lu(function (e, n) {\n          t.onsuccess = function (t) {\n            t = t.target.result;\n            e(t);\n          }, t.onerror = function (t) {\n            t = Nu(t.target.error);\n            n(t);\n          };\n        });\n      }\n\n      var Au = !1;\n\n      function Nu(t) {\n        var e = du._t(h());\n\n        if (12.2 <= e && e < 13) {\n          e = \"An internal error was encountered in the Indexed Database server\";\n\n          if (0 <= t.message.indexOf(e)) {\n            var n = new Vr(\"internal\", \"IOS_INDEXEDDB_BUG1: IndexedDb has thrown '\" + e + \"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n            return Au || (Au = !0, setTimeout(function () {\n              throw n;\n            }, 0)), n;\n          }\n        }\n\n        return t;\n      }\n\n      var Du,\n          Cu = (n(ku, Du = Se), ku);\n\n      function ku(t, e) {\n        var n = this;\n        return (n = Du.call(this) || this).Mt = t, n.currentSequenceNumber = e, n;\n      }\n\n      function Ru(t, e) {\n        return du.It(t.Mt, e);\n      }\n\n      var xu = (Vu.prototype.applyToRemoteDocument = function (t, e) {\n        for (var n, r, i, o, s, a, u = e.mutationResults, c = 0; c < this.mutations.length; c++) {\n          var h = this.mutations[c];\n          h.key.isEqual(t.key) && (n = h, r = t, i = u[c], h = a = s = o = void 0, n instanceof ws ? (s = r, a = i, h = (o = n).value.clone(), o = Ss(o.fieldTransforms, s, a.transformResults), h.setAll(o), s.convertToFoundDocument(a.version, h).setHasCommittedMutations()) : n instanceof Es ? (o = r, s = i, ps((a = n).precondition, o) ? (h = Ss(a.fieldTransforms, o, s.transformResults), (n = o.data).setAll(_s(a)), n.setAll(h), o.convertToFoundDocument(s.version, n).setHasCommittedMutations()) : o.convertToUnknownDocument(s.version)) : r.convertToNoDocument(i.version).setHasCommittedMutations());\n        }\n      }, Vu.prototype.applyToLocalView = function (t) {\n        for (var e = 0, n = this.baseMutations; e < n.length; e++) {\n          (r = n[e]).key.isEqual(t.key) && ys(r, t, this.localWriteTime);\n        }\n\n        for (var r, i = 0, o = this.mutations; i < o.length; i++) {\n          (r = o[i]).key.isEqual(t.key) && ys(r, t, this.localWriteTime);\n        }\n      }, Vu.prototype.applyToLocalDocumentSet = function (n) {\n        var r = this;\n        this.mutations.forEach(function (t) {\n          var e = n.get(t.key),\n              t = e;\n          r.applyToLocalView(t), e.isValidDocument() || t.convertToNoDocument(ti.min());\n        });\n      }, Vu.prototype.keys = function () {\n        return this.mutations.reduce(function (t, e) {\n          return t.add(e.key);\n        }, Js());\n      }, Vu.prototype.isEqual = function (t) {\n        return this.batchId === t.batchId && $r(this.mutations, t.mutations, gs) && $r(this.baseMutations, t.baseMutations, gs);\n      }, Vu),\n          Ou = (Fu.from = function (t, e, n) {\n        zr(t.mutations.length === n.length);\n\n        for (var r = Xs, i = t.mutations, o = 0; o < i.length; o++) {\n          r = r.insert(i[o].key, n[o].version);\n        }\n\n        return new Fu(t, e, n, r);\n      }, Fu),\n          Lu = (Mu.prototype.withSequenceNumber = function (t) {\n        return new Mu(this.target, this.targetId, this.purpose, t, this.snapshotVersion, this.lastLimboFreeSnapshotVersion, this.resumeToken);\n      }, Mu.prototype.withResumeToken = function (t, e) {\n        return new Mu(this.target, this.targetId, this.purpose, this.sequenceNumber, e, this.lastLimboFreeSnapshotVersion, t);\n      }, Mu.prototype.withLastLimboFreeSnapshotVersion = function (t) {\n        return new Mu(this.target, this.targetId, this.purpose, this.sequenceNumber, this.snapshotVersion, t, this.resumeToken);\n      }, Mu),\n          Pu = function Pu(t) {\n        this.Lt = t;\n      };\n\n      function Mu(t, e, n, r, i, o, s) {\n        void 0 === i && (i = ti.min()), void 0 === o && (o = ti.min()), void 0 === s && (s = fi.EMPTY_BYTE_STRING), this.target = t, this.targetId = e, this.purpose = n, this.sequenceNumber = r, this.snapshotVersion = i, this.lastLimboFreeSnapshotVersion = o, this.resumeToken = s;\n      }\n\n      function Fu(t, e, n, r) {\n        this.batch = t, this.commitVersion = e, this.mutationResults = n, this.docVersions = r;\n      }\n\n      function Vu(t, e, n, r) {\n        this.batchId = t, this.localWriteTime = e, this.baseMutations = n, this.mutations = r;\n      }\n\n      function Uu(t, e) {\n        if (e.document) return Da(t.Lt, e.document, !!e.hasCommittedMutations);\n\n        if (e.noDocument) {\n          var n = Ni.fromSegments(e.noDocument.path),\n              r = Gu(e.noDocument.readTime),\n              n = Gi.newNoDocument(n, r);\n          return e.hasCommittedMutations ? n.setHasCommittedMutations() : n;\n        }\n\n        if (e.unknownDocument) {\n          n = Ni.fromSegments(e.unknownDocument.path), r = Gu(e.unknownDocument.version);\n          return Gi.newUnknownDocument(n, r);\n        }\n\n        return Hr();\n      }\n\n      function qu(t, e, n) {\n        var r = Bu(n),\n            n = e.key.path.popLast().toArray();\n\n        if (e.isFoundDocument()) {\n          var i = {\n            name: Ea(o = t.Lt, (s = e).key),\n            fields: s.data.value.mapValue.fields,\n            updateTime: ga(o, s.version.toTimestamp())\n          },\n              o = e.hasCommittedMutations;\n          return new Ja(null, null, i, o, r, n);\n        }\n\n        if (e.isNoDocument()) {\n          var s = e.key.path.toArray(),\n              i = Ku(e.version),\n              o = e.hasCommittedMutations;\n          return new Ja(null, new Xa(s, i), null, o, r, n);\n        }\n\n        if (e.isUnknownDocument()) {\n          o = e.key.path.toArray(), e = Ku(e.version);\n          return new Ja(new $a(o, e), null, null, !0, r, n);\n        }\n\n        return Hr();\n      }\n\n      function Bu(t) {\n        t = t.toTimestamp();\n        return [t.seconds, t.nanoseconds];\n      }\n\n      function ju(t) {\n        t = new Zr(t[0], t[1]);\n        return ti.fromTimestamp(t);\n      }\n\n      function Ku(t) {\n        t = t.toTimestamp();\n        return new Qa(t.seconds, t.nanoseconds);\n      }\n\n      function Gu(t) {\n        t = new Zr(t.seconds, t.nanoseconds);\n        return ti.fromTimestamp(t);\n      }\n\n      function Qu(e, t) {\n        for (var n = (t.baseMutations || []).map(function (t) {\n          return ka(e.Lt, t);\n        }), r = 0; r < t.mutations.length - 1; ++r) {\n          var i,\n              o = t.mutations[r];\n          r + 1 < t.mutations.length && void 0 !== t.mutations[r + 1].transform && (i = t.mutations[r + 1], o.updateTransforms = i.transform.fieldTransforms, t.mutations.splice(r + 1, 1), ++r);\n        }\n\n        var s = t.mutations.map(function (t) {\n          return ka(e.Lt, t);\n        }),\n            a = Zr.fromMillis(t.localWriteTimeMs);\n        return new xu(t.batchId, a, n, s);\n      }\n\n      function Hu(t) {\n        var e = Gu(t.readTime),\n            n = void 0 !== t.lastLimboFreeSnapshotVersion ? Gu(t.lastLimboFreeSnapshotVersion) : ti.min(),\n            r = void 0 !== t.query.documents ? (zr(1 === (r = t.query).documents.length), Fo(ko(_a(r.documents[0])))) : Fo(Oa(t.query));\n        return new Lu(r, t.targetId, 0, t.lastListenSequenceNumber, e, n, fi.fromBase64String(t.resumeToken));\n      }\n\n      function zu(t, e) {\n        var n = Ku(e.snapshotVersion),\n            r = Ku(e.lastLimboFreeSnapshotVersion),\n            i = (Xi(e.target) ? Ra : xa)(t.Lt, e.target),\n            t = e.resumeToken.toBase64();\n        return new tu(e.targetId, Wi(e.target), n, t, e.sequenceNumber, r, i);\n      }\n\n      function Wu(t) {\n        var e = Oa({\n          parent: t.parent,\n          structuredQuery: t.structuredQuery\n        });\n        return \"LAST\" === t.limitType ? Vo(e, e.limit, \"L\") : e;\n      }\n\n      var Yu = (Xu.prototype.getBundleMetadata = function (t, e) {\n        return $u(t).get(e).next(function (t) {\n          if (t) return {\n            id: (t = t).bundleId,\n            createTime: Gu(t.createTime),\n            version: t.version\n          };\n        });\n      }, Xu.prototype.saveBundleMetadata = function (t, e) {\n        return $u(t).put({\n          bundleId: (e = e).id,\n          createTime: Ku(va(e.createTime)),\n          version: e.version\n        });\n      }, Xu.prototype.getNamedQuery = function (t, e) {\n        return Ju(t).get(e).next(function (t) {\n          if (t) return {\n            name: (t = t).name,\n            query: Wu(t.bundledQuery),\n            readTime: Gu(t.readTime)\n          };\n        });\n      }, Xu.prototype.saveNamedQuery = function (t, e) {\n        return Ju(t).put({\n          name: (e = e).name,\n          readTime: Ku(va(e.readTime)),\n          bundledQuery: e.bundledQuery\n        });\n      }, Xu);\n\n      function Xu() {}\n\n      function $u(t) {\n        return Ru(t, ou.store);\n      }\n\n      function Ju(t) {\n        return Ru(t, su.store);\n      }\n\n      var Zu = (ic.prototype.addToCollectionParentIndex = function (t, e) {\n        return this.Bt.add(e), lu.resolve();\n      }, ic.prototype.getCollectionParents = function (t, e) {\n        return lu.resolve(this.Bt.getEntries(e));\n      }, ic),\n          tc = (rc.prototype.add = function (t) {\n        var e = t.lastSegment(),\n            n = t.popLast(),\n            r = this.index[e] || new Gs(ui.comparator),\n            t = !r.has(n);\n        return this.index[e] = r.add(n), t;\n      }, rc.prototype.has = function (t) {\n        var e = t.lastSegment(),\n            t = t.popLast(),\n            e = this.index[e];\n        return e && e.has(t);\n      }, rc.prototype.getEntries = function (t) {\n        return (this.index[t] || new Gs(ui.comparator)).toArray();\n      }, rc),\n          ec = (nc.prototype.addToCollectionParentIndex = function (t, e) {\n        var n = this;\n        if (this.qt.has(e)) return lu.resolve();\n        var r = e.lastSegment(),\n            i = e.popLast();\n        t.addOnCommittedListener(function () {\n          n.qt.add(e);\n        });\n        i = {\n          collectionId: r,\n          parent: Ba(i)\n        };\n        return oc(t).put(i);\n      }, nc.prototype.getCollectionParents = function (t, i) {\n        var o = [],\n            e = IDBKeyRange.bound([i, \"\"], [Jr(i), \"\"], !1, !0);\n        return oc(t).Nt(e).next(function (t) {\n          for (var e = 0, n = t; e < n.length; e++) {\n            var r = n[e];\n            if (r.collectionId !== i) break;\n            o.push(Ka(r.parent));\n          }\n\n          return o;\n        });\n      }, nc);\n\n      function nc() {\n        this.qt = new tc();\n      }\n\n      function rc() {\n        this.index = {};\n      }\n\n      function ic() {\n        this.Bt = new tc();\n      }\n\n      function oc(t) {\n        return Ru(t, ru.store);\n      }\n\n      var sc = {\n        didRun: !1,\n        sequenceNumbersCollected: 0,\n        targetsRemoved: 0,\n        documentsRemoved: 0\n      },\n          ac = (uc.withCacheSize = function (t) {\n        return new uc(t, uc.DEFAULT_COLLECTION_PERCENTILE, uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);\n      }, uc);\n\n      function uc(t, e, n) {\n        this.cacheSizeCollectionThreshold = t, this.percentileToCollect = e, this.maximumSequenceNumbersToCollect = n;\n      }\n\n      function cc(t, e, n) {\n        var r = t.store(za.store),\n            i = t.store(Wa.store),\n            o = [],\n            t = IDBKeyRange.only(n.batchId),\n            s = 0,\n            t = r.$t({\n          range: t\n        }, function (t, e, n) {\n          return s++, n.delete();\n        });\n        o.push(t.next(function () {\n          zr(1 === s);\n        }));\n\n        for (var a = [], u = 0, c = n.mutations; u < c.length; u++) {\n          var h = c[u],\n              l = Wa.key(e, h.key.path, n.batchId);\n          o.push(i.delete(l)), a.push(h.key);\n        }\n\n        return lu.waitFor(o).next(function () {\n          return a;\n        });\n      }\n\n      function hc(t) {\n        if (!t) return 0;\n        var e;\n        if (t.document) e = t.document;else if (t.unknownDocument) e = t.unknownDocument;else {\n          if (!t.noDocument) throw Hr();\n          e = t.noDocument;\n        }\n        return JSON.stringify(e).length;\n      }\n\n      ac.DEFAULT_COLLECTION_PERCENTILE = 10, ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3, ac.DEFAULT = new ac(41943040, ac.DEFAULT_COLLECTION_PERCENTILE, ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT), ac.DISABLED = new ac(-1, 0, 0);\n      var lc = (fc.Kt = function (t, e, n, r) {\n        return zr(\"\" !== t.uid), new fc(t.isAuthenticated() ? t.uid : \"\", e, n, r);\n      }, fc.prototype.checkEmpty = function (t) {\n        var r = !0,\n            e = IDBKeyRange.bound([this.userId, Number.NEGATIVE_INFINITY], [this.userId, Number.POSITIVE_INFINITY]);\n        return pc(t).$t({\n          index: za.userMutationsIndex,\n          range: e\n        }, function (t, e, n) {\n          r = !1, n.done();\n        }).next(function () {\n          return r;\n        });\n      }, fc.prototype.addMutationBatch = function (p, y, g, m) {\n        var v = this,\n            b = yc(p),\n            w = pc(p);\n        return w.add({}).next(function (t) {\n          zr(\"number\" == typeof t);\n\n          for (var e, n, r, i, o, s = new xu(t, y, g, m), a = (e = v.R, n = v.userId, i = (r = s).baseMutations.map(function (t) {\n            return Ca(e.Lt, t);\n          }), o = r.mutations.map(function (t) {\n            return Ca(e.Lt, t);\n          }), new za(n, r.batchId, r.localWriteTime.toMillis(), i, o)), u = [], c = new Gs(function (t, e) {\n            return Xr(t.canonicalString(), e.canonicalString());\n          }), h = 0, l = m; h < l.length; h++) {\n            var f = l[h],\n                d = Wa.key(v.userId, f.key.path, t),\n                c = c.add(f.key.path.popLast());\n            u.push(w.put(a)), u.push(b.put(d, Wa.PLACEHOLDER));\n          }\n\n          return c.forEach(function (t) {\n            u.push(v.Ut.addToCollectionParentIndex(p, t));\n          }), p.addOnCommittedListener(function () {\n            v.Qt[t] = s.keys();\n          }), lu.waitFor(u).next(function () {\n            return s;\n          });\n        });\n      }, fc.prototype.lookupMutationBatch = function (t, e) {\n        var n = this;\n        return pc(t).get(e).next(function (t) {\n          return t ? (zr(t.userId === n.userId), Qu(n.R, t)) : null;\n        });\n      }, fc.prototype.jt = function (t, e) {\n        var n = this;\n        return this.Qt[e] ? lu.resolve(this.Qt[e]) : this.lookupMutationBatch(t, e).next(function (t) {\n          if (t) {\n            t = t.keys();\n            return n.Qt[e] = t;\n          }\n\n          return null;\n        });\n      }, fc.prototype.getNextMutationBatchAfterBatchId = function (t, e) {\n        var r = this,\n            i = e + 1,\n            e = IDBKeyRange.lowerBound([this.userId, i]),\n            o = null;\n        return pc(t).$t({\n          index: za.userMutationsIndex,\n          range: e\n        }, function (t, e, n) {\n          e.userId === r.userId && (zr(e.batchId >= i), o = Qu(r.R, e)), n.done();\n        }).next(function () {\n          return o;\n        });\n      }, fc.prototype.getHighestUnacknowledgedBatchId = function (t) {\n        var e = IDBKeyRange.upperBound([this.userId, Number.POSITIVE_INFINITY]),\n            r = -1;\n        return pc(t).$t({\n          index: za.userMutationsIndex,\n          range: e,\n          reverse: !0\n        }, function (t, e, n) {\n          r = e.batchId, n.done();\n        }).next(function () {\n          return r;\n        });\n      }, fc.prototype.getAllMutationBatches = function (t) {\n        var e = this,\n            n = IDBKeyRange.bound([this.userId, -1], [this.userId, Number.POSITIVE_INFINITY]);\n        return pc(t).Nt(za.userMutationsIndex, n).next(function (t) {\n          return t.map(function (t) {\n            return Qu(e.R, t);\n          });\n        });\n      }, fc.prototype.getAllMutationBatchesAffectingDocumentKey = function (o, s) {\n        var a = this,\n            t = Wa.prefixForPath(this.userId, s.path),\n            t = IDBKeyRange.lowerBound(t),\n            u = [];\n        return yc(o).$t({\n          range: t\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1],\n              t = t[2],\n              i = Ka(i);\n          if (r === a.userId && s.path.isEqual(i)) return pc(o).get(t).next(function (t) {\n            if (!t) throw Hr();\n            zr(t.userId === a.userId), u.push(Qu(a.R, t));\n          });\n          n.done();\n        }).next(function () {\n          return u;\n        });\n      }, fc.prototype.getAllMutationBatchesAffectingDocumentKeys = function (e, t) {\n        var s = this,\n            a = new Gs(Xr),\n            n = [];\n        return t.forEach(function (o) {\n          var t = Wa.prefixForPath(s.userId, o.path),\n              t = IDBKeyRange.lowerBound(t),\n              t = yc(e).$t({\n            range: t\n          }, function (t, e, n) {\n            var r = t[0],\n                i = t[1],\n                t = t[2],\n                i = Ka(i);\n            r === s.userId && o.path.isEqual(i) ? a = a.add(t) : n.done();\n          });\n          n.push(t);\n        }), lu.waitFor(n).next(function () {\n          return s.Wt(e, a);\n        });\n      }, fc.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {\n        var o = this,\n            s = e.path,\n            a = s.length + 1,\n            e = Wa.prefixForPath(this.userId, s),\n            e = IDBKeyRange.lowerBound(e),\n            u = new Gs(Xr);\n        return yc(t).$t({\n          range: e\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1],\n              t = t[2],\n              i = Ka(i);\n          r === o.userId && s.isPrefixOf(i) ? i.length === a && (u = u.add(t)) : n.done();\n        }).next(function () {\n          return o.Wt(t, u);\n        });\n      }, fc.prototype.Wt = function (e, t) {\n        var n = this,\n            r = [],\n            i = [];\n        return t.forEach(function (t) {\n          i.push(pc(e).get(t).next(function (t) {\n            if (null === t) throw Hr();\n            zr(t.userId === n.userId), r.push(Qu(n.R, t));\n          }));\n        }), lu.waitFor(i).next(function () {\n          return r;\n        });\n      }, fc.prototype.removeMutationBatch = function (e, n) {\n        var r = this;\n        return cc(e.Mt, this.userId, n).next(function (t) {\n          return e.addOnCommittedListener(function () {\n            r.Gt(n.batchId);\n          }), lu.forEach(t, function (t) {\n            return r.referenceDelegate.markPotentiallyOrphaned(e, t);\n          });\n        });\n      }, fc.prototype.Gt = function (t) {\n        delete this.Qt[t];\n      }, fc.prototype.performConsistencyCheck = function (e) {\n        var i = this;\n        return this.checkEmpty(e).next(function (t) {\n          if (!t) return lu.resolve();\n          var t = IDBKeyRange.lowerBound(Wa.prefixForUser(i.userId)),\n              r = [];\n          return yc(e).$t({\n            range: t\n          }, function (t, e, n) {\n            t[0] === i.userId ? (t = Ka(t[1]), r.push(t)) : n.done();\n          }).next(function () {\n            zr(0 === r.length);\n          });\n        });\n      }, fc.prototype.containsKey = function (t, e) {\n        return dc(t, this.userId, e);\n      }, fc.prototype.zt = function (t) {\n        var e = this;\n        return gc(t).get(this.userId).next(function (t) {\n          return t || new Ha(e.userId, -1, \"\");\n        });\n      }, fc);\n\n      function fc(t, e, n, r) {\n        this.userId = t, this.R = e, this.Ut = n, this.referenceDelegate = r, this.Qt = {};\n      }\n\n      function dc(t, o, e) {\n        var e = Wa.prefixForPath(o, e.path),\n            s = e[1],\n            e = IDBKeyRange.lowerBound(e),\n            a = !1;\n        return yc(t).$t({\n          range: e,\n          kt: !0\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1];\n          t[2], r === o && i === s && (a = !0), n.done();\n        }).next(function () {\n          return a;\n        });\n      }\n\n      function pc(t) {\n        return Ru(t, za.store);\n      }\n\n      function yc(t) {\n        return Ru(t, Wa.store);\n      }\n\n      function gc(t) {\n        return Ru(t, Ha.store);\n      }\n\n      var mc = (wc.prototype.next = function () {\n        return this.Ht += 2, this.Ht;\n      }, wc.Jt = function () {\n        return new wc(0);\n      }, wc.Yt = function () {\n        return new wc(-1);\n      }, wc),\n          vc = (bc.prototype.allocateTargetId = function (n) {\n        var r = this;\n        return this.Xt(n).next(function (t) {\n          var e = new mc(t.highestTargetId);\n          return t.highestTargetId = e.next(), r.Zt(n, t).next(function () {\n            return t.highestTargetId;\n          });\n        });\n      }, bc.prototype.getLastRemoteSnapshotVersion = function (t) {\n        return this.Xt(t).next(function (t) {\n          return ti.fromTimestamp(new Zr(t.lastRemoteSnapshotVersion.seconds, t.lastRemoteSnapshotVersion.nanoseconds));\n        });\n      }, bc.prototype.getHighestSequenceNumber = function (t) {\n        return this.Xt(t).next(function (t) {\n          return t.highestListenSequenceNumber;\n        });\n      }, bc.prototype.setTargetsMetadata = function (e, n, r) {\n        var i = this;\n        return this.Xt(e).next(function (t) {\n          return t.highestListenSequenceNumber = n, r && (t.lastRemoteSnapshotVersion = r.toTimestamp()), n > t.highestListenSequenceNumber && (t.highestListenSequenceNumber = n), i.Zt(e, t);\n        });\n      }, bc.prototype.addTargetData = function (e, n) {\n        var r = this;\n        return this.te(e, n).next(function () {\n          return r.Xt(e).next(function (t) {\n            return t.targetCount += 1, r.ee(n, t), r.Zt(e, t);\n          });\n        });\n      }, bc.prototype.updateTargetData = function (t, e) {\n        return this.te(t, e);\n      }, bc.prototype.removeTargetData = function (e, t) {\n        var n = this;\n        return this.removeMatchingKeysForTargetId(e, t.targetId).next(function () {\n          return Ec(e).delete(t.targetId);\n        }).next(function () {\n          return n.Xt(e);\n        }).next(function (t) {\n          return zr(0 < t.targetCount), --t.targetCount, n.Zt(e, t);\n        });\n      }, bc.prototype.removeTargets = function (n, r, i) {\n        var o = this,\n            s = 0,\n            a = [];\n        return Ec(n).$t(function (t, e) {\n          e = Hu(e);\n          e.sequenceNumber <= r && null === i.get(e.targetId) && (s++, a.push(o.removeTargetData(n, e)));\n        }).next(function () {\n          return lu.waitFor(a);\n        }).next(function () {\n          return s;\n        });\n      }, bc.prototype.forEachTarget = function (t, n) {\n        return Ec(t).$t(function (t, e) {\n          e = Hu(e);\n          n(e);\n        });\n      }, bc.prototype.Xt = function (t) {\n        return Tc(t).get(nu.key).next(function (t) {\n          return zr(null !== t), t;\n        });\n      }, bc.prototype.Zt = function (t, e) {\n        return Tc(t).put(nu.key, e);\n      }, bc.prototype.te = function (t, e) {\n        return Ec(t).put(zu(this.R, e));\n      }, bc.prototype.ee = function (t, e) {\n        var n = !1;\n        return t.targetId > e.highestTargetId && (e.highestTargetId = t.targetId, n = !0), t.sequenceNumber > e.highestListenSequenceNumber && (e.highestListenSequenceNumber = t.sequenceNumber, n = !0), n;\n      }, bc.prototype.getTargetCount = function (t) {\n        return this.Xt(t).next(function (t) {\n          return t.targetCount;\n        });\n      }, bc.prototype.getTargetData = function (t, r) {\n        var e = Wi(r),\n            e = IDBKeyRange.bound([e, Number.NEGATIVE_INFINITY], [e, Number.POSITIVE_INFINITY]),\n            i = null;\n        return Ec(t).$t({\n          range: e,\n          index: tu.queryTargetsIndexName\n        }, function (t, e, n) {\n          e = Hu(e);\n          Yi(r, e.target) && (i = e, n.done());\n        }).next(function () {\n          return i;\n        });\n      }, bc.prototype.addMatchingKeys = function (n, t, r) {\n        var i = this,\n            o = [],\n            s = Ic(n);\n        return t.forEach(function (t) {\n          var e = Ba(t.path);\n          o.push(s.put(new eu(r, e))), o.push(i.referenceDelegate.addReference(n, r, t));\n        }), lu.waitFor(o);\n      }, bc.prototype.removeMatchingKeys = function (n, t, r) {\n        var i = this,\n            o = Ic(n);\n        return lu.forEach(t, function (t) {\n          var e = Ba(t.path);\n          return lu.waitFor([o.delete([r, e]), i.referenceDelegate.removeReference(n, r, t)]);\n        });\n      }, bc.prototype.removeMatchingKeysForTargetId = function (t, e) {\n        t = Ic(t), e = IDBKeyRange.bound([e], [e + 1], !1, !0);\n        return t.delete(e);\n      }, bc.prototype.getMatchingKeysForTargetId = function (t, e) {\n        var e = IDBKeyRange.bound([e], [e + 1], !1, !0),\n            t = Ic(t),\n            r = Js();\n        return t.$t({\n          range: e,\n          kt: !0\n        }, function (t, e, n) {\n          t = Ka(t[1]), t = new Ni(t);\n          r = r.add(t);\n        }).next(function () {\n          return r;\n        });\n      }, bc.prototype.containsKey = function (t, e) {\n        var e = Ba(e.path),\n            e = IDBKeyRange.bound([e], [Jr(e)], !1, !0),\n            i = 0;\n        return Ic(t).$t({\n          index: eu.documentTargetsIndex,\n          kt: !0,\n          range: e\n        }, function (t, e, n) {\n          var r = t[0];\n          t[1], 0 !== r && (i++, n.done());\n        }).next(function () {\n          return 0 < i;\n        });\n      }, bc.prototype.lt = function (t, e) {\n        return Ec(t).get(e).next(function (t) {\n          return t ? Hu(t) : null;\n        });\n      }, bc);\n\n      function bc(t, e) {\n        this.referenceDelegate = t, this.R = e;\n      }\n\n      function wc(t) {\n        this.Ht = t;\n      }\n\n      function Ec(t) {\n        return Ru(t, tu.store);\n      }\n\n      function Tc(t) {\n        return Ru(t, nu.store);\n      }\n\n      function Ic(t) {\n        return Ru(t, eu.store);\n      }\n\n      function _c(e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            if (e.code !== Fr.FAILED_PRECONDITION || e.message !== cu) throw e;\n            return jr(\"LocalStore\", \"Unexpectedly lost primary lease\"), [2];\n          });\n        });\n      }\n\n      function Sc(t, e) {\n        var n = t[0],\n            r = t[1],\n            t = e[0],\n            e = e[1],\n            t = Xr(n, t);\n        return 0 === t ? Xr(r, e) : t;\n      }\n\n      var Ac = (Oc.prototype.ie = function () {\n        return ++this.se;\n      }, Oc.prototype.re = function (t) {\n        var e = [t, this.ie()];\n        this.buffer.size < this.ne ? this.buffer = this.buffer.add(e) : Sc(e, t = this.buffer.last()) < 0 && (this.buffer = this.buffer.delete(t).add(e));\n      }, Object.defineProperty(Oc.prototype, \"maxValue\", {\n        get: function get() {\n          return this.buffer.last()[0];\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Oc),\n          Nc = (xc.prototype.start = function (t) {\n        -1 !== this.garbageCollector.params.cacheSizeCollectionThreshold && this.ue(t);\n      }, xc.prototype.stop = function () {\n        this.ce && (this.ce.cancel(), this.ce = null);\n      }, Object.defineProperty(xc.prototype, \"started\", {\n        get: function get() {\n          return null !== this.ce;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), xc.prototype.ue = function (n) {\n        var t = this,\n            e = this.oe ? 3e5 : 6e4;\n        jr(\"LruGarbageCollector\", \"Garbage collection scheduled in \" + e + \"ms\"), this.ce = this.asyncQueue.enqueueAfterDelay(\"lru_garbage_collection\", e, function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  this.ce = null, this.oe = !0, t.label = 1;\n\n                case 1:\n                  return t.trys.push([1, 3,, 7]), [4, n.collectGarbage(this.garbageCollector)];\n\n                case 2:\n                  return t.sent(), [3, 7];\n\n                case 3:\n                  return Tu(e = t.sent()) ? (jr(\"LruGarbageCollector\", \"Ignoring IndexedDB error during garbage collection: \", e), [3, 6]) : [3, 4];\n\n                case 4:\n                  return [4, _c(e)];\n\n                case 5:\n                  t.sent(), t.label = 6;\n\n                case 6:\n                  return [3, 7];\n\n                case 7:\n                  return [4, this.ue(n)];\n\n                case 8:\n                  return t.sent(), [2];\n              }\n            });\n          });\n        });\n      }, xc),\n          Dc = (Rc.prototype.calculateTargetCount = function (t, e) {\n        return this.ae.he(t).next(function (t) {\n          return Math.floor(e / 100 * t);\n        });\n      }, Rc.prototype.nthSequenceNumber = function (t, e) {\n        var n = this;\n        if (0 === e) return lu.resolve(Lr.o);\n        var r = new Ac(e);\n        return this.ae.forEachTarget(t, function (t) {\n          return r.re(t.sequenceNumber);\n        }).next(function () {\n          return n.ae.le(t, function (t) {\n            return r.re(t);\n          });\n        }).next(function () {\n          return r.maxValue;\n        });\n      }, Rc.prototype.removeTargets = function (t, e, n) {\n        return this.ae.removeTargets(t, e, n);\n      }, Rc.prototype.removeOrphanedDocuments = function (t, e) {\n        return this.ae.removeOrphanedDocuments(t, e);\n      }, Rc.prototype.collect = function (e, n) {\n        var r = this;\n        return -1 === this.params.cacheSizeCollectionThreshold ? (jr(\"LruGarbageCollector\", \"Garbage collection skipped; disabled\"), lu.resolve(sc)) : this.getCacheSize(e).next(function (t) {\n          return t < r.params.cacheSizeCollectionThreshold ? (jr(\"LruGarbageCollector\", \"Garbage collection skipped; Cache size \" + t + \" is lower than threshold \" + r.params.cacheSizeCollectionThreshold), sc) : r.fe(e, n);\n        });\n      }, Rc.prototype.getCacheSize = function (t) {\n        return this.ae.getCacheSize(t);\n      }, Rc.prototype.fe = function (e, n) {\n        var r,\n            i,\n            o,\n            s,\n            a,\n            u,\n            c,\n            h = this,\n            l = Date.now();\n        return this.calculateTargetCount(e, this.params.percentileToCollect).next(function (t) {\n          return i = t > h.params.maximumSequenceNumbersToCollect ? (jr(\"LruGarbageCollector\", \"Capping sequence numbers to collect down to the maximum of \" + h.params.maximumSequenceNumbersToCollect + \" from \" + t), h.params.maximumSequenceNumbersToCollect) : t, s = Date.now(), h.nthSequenceNumber(e, i);\n        }).next(function (t) {\n          return r = t, a = Date.now(), h.removeTargets(e, r, n);\n        }).next(function (t) {\n          return o = t, u = Date.now(), h.removeOrphanedDocuments(e, r);\n        }).next(function (t) {\n          return c = Date.now(), Br() <= p.DEBUG && jr(\"LruGarbageCollector\", \"LRU Garbage Collection\\n\\tCounted targets in \" + (s - l) + \"ms\\n\\tDetermined least recently used \" + i + \" in \" + (a - s) + \"ms\\n\\tRemoved \" + o + \" targets in \" + (u - a) + \"ms\\n\\tRemoved \" + t + \" documents in \" + (c - u) + \"ms\\nTotal Duration: \" + (c - l) + \"ms\"), lu.resolve({\n            didRun: !0,\n            sequenceNumbersCollected: i,\n            targetsRemoved: o,\n            documentsRemoved: t\n          });\n        });\n      }, Rc),\n          Cc = (kc.prototype.he = function (t) {\n        var n = this.de(t);\n        return this.db.getTargetCache().getTargetCount(t).next(function (e) {\n          return n.next(function (t) {\n            return e + t;\n          });\n        });\n      }, kc.prototype.de = function (t) {\n        var e = 0;\n        return this.le(t, function (t) {\n          e++;\n        }).next(function () {\n          return e;\n        });\n      }, kc.prototype.forEachTarget = function (t, e) {\n        return this.db.getTargetCache().forEachTarget(t, e);\n      }, kc.prototype.le = function (t, n) {\n        return this.we(t, function (t, e) {\n          return n(e);\n        });\n      }, kc.prototype.addReference = function (t, e, n) {\n        return Lc(t, n);\n      }, kc.prototype.removeReference = function (t, e, n) {\n        return Lc(t, n);\n      }, kc.prototype.removeTargets = function (t, e, n) {\n        return this.db.getTargetCache().removeTargets(t, e, n);\n      }, kc.prototype.markPotentiallyOrphaned = Lc, kc.prototype._e = function (t, e) {\n        return r = e, i = !1, gc(n = t).Ot(function (t) {\n          return dc(n, t, r).next(function (t) {\n            return t && (i = !0), lu.resolve(!t);\n          });\n        }).next(function () {\n          return i;\n        });\n        var n, r, i;\n      }, kc.prototype.removeOrphanedDocuments = function (n, r) {\n        var i = this,\n            o = this.db.getRemoteDocumentCache().newChangeBuffer(),\n            s = [],\n            a = 0;\n        return this.we(n, function (e, t) {\n          t <= r && (t = i._e(n, e).next(function (t) {\n            if (!t) return a++, o.getEntry(n, e).next(function () {\n              return o.removeEntry(e), Ic(n).delete([0, Ba(e.path)]);\n            });\n          }), s.push(t));\n        }).next(function () {\n          return lu.waitFor(s);\n        }).next(function () {\n          return o.apply(n);\n        }).next(function () {\n          return a;\n        });\n      }, kc.prototype.removeTarget = function (t, e) {\n        e = e.withSequenceNumber(t.currentSequenceNumber);\n        return this.db.getTargetCache().updateTargetData(t, e);\n      }, kc.prototype.updateLimboDocument = Lc, kc.prototype.we = function (t, r) {\n        var i,\n            t = Ic(t),\n            o = Lr.o;\n        return t.$t({\n          index: eu.documentTargetsIndex\n        }, function (t, e) {\n          var n = t[0],\n              t = (t[1], e.path),\n              e = e.sequenceNumber;\n          0 === n ? (o !== Lr.o && r(new Ni(Ka(i)), o), o = e, i = t) : o = Lr.o;\n        }).next(function () {\n          o !== Lr.o && r(new Ni(Ka(i)), o);\n        });\n      }, kc.prototype.getCacheSize = function (t) {\n        return this.db.getRemoteDocumentCache().getSize(t);\n      }, kc);\n\n      function kc(t, e) {\n        this.db = t, this.garbageCollector = new Dc(this, e);\n      }\n\n      function Rc(t, e) {\n        this.ae = t, this.params = e;\n      }\n\n      function xc(t, e) {\n        this.garbageCollector = t, this.asyncQueue = e, this.oe = !1, this.ce = null;\n      }\n\n      function Oc(t) {\n        this.ne = t, this.buffer = new Gs(Sc), this.se = 0;\n      }\n\n      function Lc(t, e) {\n        return Ic(t).put((t = t.currentSequenceNumber, new eu(0, Ba(e.path), t)));\n      }\n\n      var Pc,\n          Mc = (jc.prototype.get = function (t) {\n        var e = this.mapKeyFn(t),\n            e = this.inner[e];\n        if (void 0 !== e) for (var n = 0, r = e; n < r.length; n++) {\n          var i = r[n],\n              o = i[0],\n              i = i[1];\n          if (this.equalsFn(o, t)) return i;\n        }\n      }, jc.prototype.has = function (t) {\n        return void 0 !== this.get(t);\n      }, jc.prototype.set = function (t, e) {\n        var n = this.mapKeyFn(t),\n            r = this.inner[n];\n\n        if (void 0 !== r) {\n          for (var i = 0; i < r.length; i++) {\n            if (this.equalsFn(r[i][0], t)) return void (r[i] = [t, e]);\n          }\n\n          r.push([t, e]);\n        } else this.inner[n] = [[t, e]];\n      }, jc.prototype.delete = function (t) {\n        var e = this.mapKeyFn(t),\n            n = this.inner[e];\n        if (void 0 === n) return !1;\n\n        for (var r = 0; r < n.length; r++) {\n          if (this.equalsFn(n[r][0], t)) return 1 === n.length ? delete this.inner[e] : n.splice(r, 1), !0;\n        }\n\n        return !1;\n      }, jc.prototype.forEach = function (s) {\n        ii(this.inner, function (t, e) {\n          for (var n = 0, r = e; n < r.length; n++) {\n            var i = r[n],\n                o = i[0],\n                i = i[1];\n            s(o, i);\n          }\n        });\n      }, jc.prototype.isEmpty = function () {\n        return oi(this.inner);\n      }, jc),\n          I = (Bc.prototype.getReadTime = function (t) {\n        t = this.changes.get(t);\n        return t ? t.readTime : ti.min();\n      }, Bc.prototype.addEntry = function (t, e) {\n        this.assertNotApplied(), this.changes.set(t.key, {\n          document: t,\n          readTime: e\n        });\n      }, Bc.prototype.removeEntry = function (t, e) {\n        void 0 === e && (e = null), this.assertNotApplied(), this.changes.set(t, {\n          document: Gi.newInvalidDocument(t),\n          readTime: e\n        });\n      }, Bc.prototype.getEntry = function (t, e) {\n        this.assertNotApplied();\n        var n = this.changes.get(e);\n        return void 0 !== n ? lu.resolve(n.document) : this.getFromCache(t, e);\n      }, Bc.prototype.getEntries = function (t, e) {\n        return this.getAllFromCache(t, e);\n      }, Bc.prototype.apply = function (t) {\n        return this.assertNotApplied(), this.changesApplied = !0, this.applyChanges(t);\n      }, Bc.prototype.assertNotApplied = function () {}, Bc),\n          Fc = (qc.prototype.addEntry = function (t, e, n) {\n        return Gc(t).put(Qc(e), n);\n      }, qc.prototype.removeEntry = function (t, e) {\n        t = Gc(t), e = Qc(e);\n        return t.delete(e);\n      }, qc.prototype.updateMetadata = function (e, n) {\n        var r = this;\n        return this.getMetadata(e).next(function (t) {\n          return t.byteSize += n, r.me(e, t);\n        });\n      }, qc.prototype.getEntry = function (t, e) {\n        var n = this;\n        return Gc(t).get(Qc(e)).next(function (t) {\n          return n.ye(e, t);\n        });\n      }, qc.prototype.ge = function (t, e) {\n        var n = this;\n        return Gc(t).get(Qc(e)).next(function (t) {\n          return {\n            document: n.ye(e, t),\n            size: hc(t)\n          };\n        });\n      }, qc.prototype.getEntries = function (t, e) {\n        var n = this,\n            r = Hs;\n        return this.pe(t, e, function (t, e) {\n          e = n.ye(t, e);\n          r = r.insert(t, e);\n        }).next(function () {\n          return r;\n        });\n      }, qc.prototype.Ee = function (t, e) {\n        var r = this,\n            i = Hs,\n            o = new Fs(Ni.comparator);\n        return this.pe(t, e, function (t, e) {\n          var n = r.ye(t, e);\n          i = i.insert(t, n), o = o.insert(t, hc(e));\n        }).next(function () {\n          return {\n            documents: i,\n            Te: o\n          };\n        });\n      }, qc.prototype.pe = function (t, e, i) {\n        if (e.isEmpty()) return lu.resolve();\n        var n = IDBKeyRange.bound(e.first().path.toArray(), e.last().path.toArray()),\n            o = e.getIterator(),\n            s = o.getNext();\n        return Gc(t).$t({\n          range: n\n        }, function (t, e, n) {\n          for (var r = Ni.fromSegments(t); s && Ni.comparator(s, r) < 0;) {\n            i(s, null), s = o.getNext();\n          }\n\n          s && s.isEqual(r) && (i(s, e), s = o.hasNext() ? o.getNext() : null), s ? n.Ct(s.path.toArray()) : n.done();\n        }).next(function () {\n          for (; s;) {\n            i(s, null), s = o.hasNext() ? o.getNext() : null;\n          }\n        });\n      }, qc.prototype.getDocumentsMatchingQuery = function (t, r, e) {\n        var n,\n            i = this,\n            o = Hs,\n            s = r.path.length + 1,\n            a = {};\n        return e.isEqual(ti.min()) ? (n = r.path.toArray(), a.range = IDBKeyRange.lowerBound(n)) : (n = r.path.toArray(), e = Bu(e), a.range = IDBKeyRange.lowerBound([n, e], !0), a.index = Ja.collectionReadTimeIndex), Gc(t).$t(a, function (t, e, n) {\n          t.length === s && (e = Uu(i.R, e), r.path.isPrefixOf(e.key.path) ? jo(r, e) && (o = o.insert(e.key, e)) : n.done());\n        }).next(function () {\n          return o;\n        });\n      }, qc.prototype.newChangeBuffer = function (t) {\n        return new Vc(this, !!t && t.trackRemovals);\n      }, qc.prototype.getSize = function (t) {\n        return this.getMetadata(t).next(function (t) {\n          return t.byteSize;\n        });\n      }, qc.prototype.getMetadata = function (t) {\n        return Kc(t).get(Za.key).next(function (t) {\n          return zr(!!t), t;\n        });\n      }, qc.prototype.me = function (t, e) {\n        return Kc(t).put(Za.key, e);\n      }, qc.prototype.ye = function (t, e) {\n        if (e) {\n          e = Uu(this.R, e);\n          if (!e.isNoDocument() || !e.version.isEqual(ti.min())) return e;\n        }\n\n        return Gi.newInvalidDocument(t);\n      }, qc),\n          Vc = (n(Uc, Pc = I), Uc.prototype.applyChanges = function (i) {\n        var o = this,\n            s = [],\n            a = 0,\n            u = new Gs(function (t, e) {\n          return Xr(t.canonicalString(), e.canonicalString());\n        });\n        return this.changes.forEach(function (t, e) {\n          var n,\n              r = o.Ae.get(t);\n          e.document.isValidDocument() ? (n = qu(o.Ie.R, e.document, o.getReadTime(t)), u = u.add(t.path.popLast()), e = hc(n), a += e - r, s.push(o.Ie.addEntry(i, t, n))) : (a -= r, o.trackRemovals ? (r = qu(o.Ie.R, Gi.newNoDocument(t, ti.min()), o.getReadTime(t)), s.push(o.Ie.addEntry(i, t, r))) : s.push(o.Ie.removeEntry(i, t)));\n        }), u.forEach(function (t) {\n          s.push(o.Ie.Ut.addToCollectionParentIndex(i, t));\n        }), s.push(this.Ie.updateMetadata(i, a)), lu.waitFor(s);\n      }, Uc.prototype.getFromCache = function (t, e) {\n        var n = this;\n        return this.Ie.ge(t, e).next(function (t) {\n          return n.Ae.set(e, t.size), t.document;\n        });\n      }, Uc.prototype.getAllFromCache = function (t, e) {\n        var n = this;\n        return this.Ie.Ee(t, e).next(function (t) {\n          var e = t.documents;\n          return t.Te.forEach(function (t, e) {\n            n.Ae.set(t, e);\n          }), e;\n        });\n      }, Uc);\n\n      function Uc(t, e) {\n        var n = this;\n        return (n = Pc.call(this) || this).Ie = t, n.trackRemovals = e, n.Ae = new Mc(function (t) {\n          return t.toString();\n        }, function (t, e) {\n          return t.isEqual(e);\n        }), n;\n      }\n\n      function qc(t, e) {\n        this.R = t, this.Ut = e;\n      }\n\n      function Bc() {\n        this.changes = new Mc(function (t) {\n          return t.toString();\n        }, function (t, e) {\n          return t.isEqual(e);\n        }), this.changesApplied = !1;\n      }\n\n      function jc(t, e) {\n        this.mapKeyFn = t, this.equalsFn = e, this.inner = {};\n      }\n\n      function Kc(t) {\n        return Ru(t, Za.store);\n      }\n\n      function Gc(t) {\n        return Ru(t, Ja.store);\n      }\n\n      function Qc(t) {\n        return t.path.toArray();\n      }\n\n      var Hc = (zc.prototype.Rt = function (e, n, t, r) {\n        var i = this;\n        zr(t < r && 0 <= t && r <= 11);\n        var o = new fu(\"createOrUpgrade\", n);\n        t < 1 && 1 <= r && (e.createObjectStore(Ga.store), (s = e).createObjectStore(Ha.store, {\n          keyPath: Ha.keyPath\n        }), s.createObjectStore(za.store, {\n          keyPath: za.keyPath,\n          autoIncrement: !0\n        }).createIndex(za.userMutationsIndex, za.userMutationsKeyPath, {\n          unique: !0\n        }), s.createObjectStore(Wa.store), Wc(e), e.createObjectStore(Ja.store));\n        var s,\n            a = lu.resolve();\n        return t < 3 && 3 <= r && (0 !== t && ((s = e).deleteObjectStore(eu.store), s.deleteObjectStore(tu.store), s.deleteObjectStore(nu.store), Wc(e)), a = a.next(function () {\n          return t = o.store(nu.store), e = new nu(0, 0, ti.min().toTimestamp(), 0), t.put(nu.key, e);\n          var t, e;\n        })), t < 4 && 4 <= r && (a = (a = 0 !== t ? a.next(function () {\n          return n = e, (r = o).store(za.store).Nt().next(function (t) {\n            n.deleteObjectStore(za.store), n.createObjectStore(za.store, {\n              keyPath: za.keyPath,\n              autoIncrement: !0\n            }).createIndex(za.userMutationsIndex, za.userMutationsKeyPath, {\n              unique: !0\n            });\n            var e = r.store(za.store),\n                t = t.map(function (t) {\n              return e.put(t);\n            });\n            return lu.waitFor(t);\n          });\n          var n, r;\n        }) : a).next(function () {\n          e.createObjectStore(iu.store, {\n            keyPath: iu.keyPath\n          });\n        })), t < 5 && 5 <= r && (a = a.next(function () {\n          return i.Re(o);\n        })), t < 6 && 6 <= r && (a = a.next(function () {\n          return e.createObjectStore(Za.store), i.be(o);\n        })), t < 7 && 7 <= r && (a = a.next(function () {\n          return i.ve(o);\n        })), t < 8 && 8 <= r && (a = a.next(function () {\n          return i.Pe(e, o);\n        })), t < 9 && 9 <= r && (a = a.next(function () {\n          var t;\n          (t = e).objectStoreNames.contains(\"remoteDocumentChanges\") && t.deleteObjectStore(\"remoteDocumentChanges\"), (t = n.objectStore(Ja.store)).createIndex(Ja.readTimeIndex, Ja.readTimeIndexPath, {\n            unique: !1\n          }), t.createIndex(Ja.collectionReadTimeIndex, Ja.collectionReadTimeIndexPath, {\n            unique: !1\n          });\n        })), t < 10 && 10 <= r && (a = a.next(function () {\n          return i.Ve(o);\n        })), a = t < 11 && 11 <= r ? a.next(function () {\n          e.createObjectStore(ou.store, {\n            keyPath: ou.keyPath\n          }), e.createObjectStore(su.store, {\n            keyPath: su.keyPath\n          });\n        }) : a;\n      }, zc.prototype.be = function (e) {\n        var n = 0;\n        return e.store(Ja.store).$t(function (t, e) {\n          n += hc(e);\n        }).next(function () {\n          var t = new Za(n);\n          return e.store(Za.store).put(Za.key, t);\n        });\n      }, zc.prototype.Re = function (n) {\n        var r = this,\n            t = n.store(Ha.store),\n            i = n.store(za.store);\n        return t.Nt().next(function (t) {\n          return lu.forEach(t, function (e) {\n            var t = IDBKeyRange.bound([e.userId, -1], [e.userId, e.lastAcknowledgedBatchId]);\n            return i.Nt(za.userMutationsIndex, t).next(function (t) {\n              return lu.forEach(t, function (t) {\n                zr(t.userId === e.userId);\n                t = Qu(r.R, t);\n                return cc(n, e.userId, t).next(function () {});\n              });\n            });\n          });\n        });\n      }, zc.prototype.ve = function (t) {\n        var o = t.store(eu.store),\n            e = t.store(Ja.store);\n        return t.store(nu.store).get(nu.key).next(function (r) {\n          var i = [];\n          return e.$t(function (t, e) {\n            var n = new ui(t),\n                t = [0, Ba(n)];\n            i.push(o.get(t).next(function (t) {\n              return t ? lu.resolve() : o.put(new eu(0, Ba(n), r.highestListenSequenceNumber));\n            }));\n          }).next(function () {\n            return lu.waitFor(i);\n          });\n        });\n      }, zc.prototype.Pe = function (t, e) {\n        t.createObjectStore(ru.store, {\n          keyPath: ru.keyPath\n        });\n\n        function r(t) {\n          if (i.add(t)) {\n            var e = t.lastSegment(),\n                t = t.popLast();\n            return n.put({\n              collectionId: e,\n              parent: Ba(t)\n            });\n          }\n        }\n\n        var n = e.store(ru.store),\n            i = new tc();\n        return e.store(Ja.store).$t({\n          kt: !0\n        }, function (t, e) {\n          t = new ui(t);\n          return r(t.popLast());\n        }).next(function () {\n          return e.store(Wa.store).$t({\n            kt: !0\n          }, function (t, e) {\n            t[0];\n            var n = t[1],\n                n = (t[2], Ka(n));\n            return r(n.popLast());\n          });\n        });\n      }, zc.prototype.Ve = function (t) {\n        var n = this,\n            r = t.store(tu.store);\n        return r.$t(function (t, e) {\n          e = Hu(e), e = zu(n.R, e);\n          return r.put(e);\n        });\n      }, zc);\n\n      function zc(t) {\n        this.R = t;\n      }\n\n      function Wc(t) {\n        t.createObjectStore(eu.store, {\n          keyPath: eu.keyPath\n        }).createIndex(eu.documentTargetsIndex, eu.documentTargetsKeyPath, {\n          unique: !0\n        }), t.createObjectStore(tu.store, {\n          keyPath: tu.keyPath\n        }).createIndex(tu.queryTargetsIndexName, tu.queryTargetsKeyPath, {\n          unique: !0\n        }), t.createObjectStore(nu.store);\n      }\n\n      var Yc = \"Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.\",\n          Xc = ($c.prototype.start = function () {\n        var e = this;\n        return this.je().then(function () {\n          if (!e.isPrimary && !e.allowTabSynchronization) throw new Vr(Fr.FAILED_PRECONDITION, Yc);\n          return e.We(), e.Ge(), e.ze(), e.runTransaction(\"getHighestListenSequenceNumber\", \"readonly\", function (t) {\n            return e.qe.getHighestSequenceNumber(t);\n          });\n        }).then(function (t) {\n          e.Ne = new Lr(t, e.De);\n        }).then(function () {\n          e.xe = !0;\n        }).catch(function (t) {\n          return e.Be && e.Be.close(), Promise.reject(t);\n        });\n      }, $c.prototype.He = function (n) {\n        var t = this;\n        return this.Me = function (e) {\n          return y(t, void 0, void 0, function () {\n            return g(this, function (t) {\n              return this.started ? [2, n(e)] : [2];\n            });\n          });\n        }, n(this.isPrimary);\n      }, $c.prototype.setDatabaseDeletedListener = function (n) {\n        var t = this;\n        this.Be.vt(function (e) {\n          return y(t, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return null === e.newVersion ? [4, n()] : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return [2];\n              }\n            });\n          });\n        });\n      }, $c.prototype.setNetworkEnabled = function (t) {\n        var e = this;\n        this.networkEnabled !== t && (this.networkEnabled = t, this.Se.enqueueAndForget(function () {\n          return y(e, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return this.started ? [4, this.je()] : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return [2];\n              }\n            });\n          });\n        }));\n      }, $c.prototype.je = function () {\n        var n = this;\n        return this.runTransaction(\"updateClientMetadataAndTryBecomePrimary\", \"readwrite\", function (e) {\n          return Zc(e).put(new iu(n.clientId, Date.now(), n.networkEnabled, n.inForeground)).next(function () {\n            if (n.isPrimary) return n.Je(e).next(function (t) {\n              t || (n.isPrimary = !1, n.Se.enqueueRetryable(function () {\n                return n.Me(!1);\n              }));\n            });\n          }).next(function () {\n            return n.Ye(e);\n          }).next(function (t) {\n            return n.isPrimary && !t ? n.Xe(e).next(function () {\n              return !1;\n            }) : !!t && n.Ze(e).next(function () {\n              return !0;\n            });\n          });\n        }).catch(function (t) {\n          if (Tu(t)) return jr(\"IndexedDbPersistence\", \"Failed to extend owner lease: \", t), n.isPrimary;\n          if (!n.allowTabSynchronization) throw t;\n          return jr(\"IndexedDbPersistence\", \"Releasing owner lease after error during lease refresh\", t), !1;\n        }).then(function (t) {\n          n.isPrimary !== t && n.Se.enqueueRetryable(function () {\n            return n.Me(t);\n          }), n.isPrimary = t;\n        });\n      }, $c.prototype.Je = function (t) {\n        var e = this;\n        return Jc(t).get(Ga.key).next(function (t) {\n          return lu.resolve(e.tn(t));\n        });\n      }, $c.prototype.en = function (t) {\n        return Zc(t).delete(this.clientId);\n      }, $c.prototype.nn = function () {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return !this.isPrimary || this.sn(this.Oe, 18e5) ? [3, 2] : (this.Oe = Date.now(), [4, this.runTransaction(\"maybeGarbageCollectMultiClientState\", \"readwrite-primary\", function (t) {\n                  var r = Ru(t, iu.store);\n                  return r.Nt().next(function (t) {\n                    var e = o.rn(t, 18e5),\n                        n = t.filter(function (t) {\n                      return -1 === e.indexOf(t);\n                    });\n                    return lu.forEach(n, function (t) {\n                      return r.delete(t.clientId);\n                    }).next(function () {\n                      return n;\n                    });\n                  });\n                }).catch(function () {\n                  return [];\n                })]);\n\n              case 1:\n                if (e = t.sent(), this.Ke) for (n = 0, r = e; n < r.length; n++) {\n                  i = r[n], this.Ke.removeItem(this.on(i.clientId));\n                }\n                t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, $c.prototype.ze = function () {\n        var t = this;\n        this.$e = this.Se.enqueueAfterDelay(\"client_metadata_refresh\", 4e3, function () {\n          return t.je().then(function () {\n            return t.nn();\n          }).then(function () {\n            return t.ze();\n          });\n        });\n      }, $c.prototype.tn = function (t) {\n        return !!t && t.ownerId === this.clientId;\n      }, $c.prototype.Ye = function (e) {\n        var r = this;\n        return this.Ce ? lu.resolve(!0) : Jc(e).get(Ga.key).next(function (t) {\n          if (null !== t && r.sn(t.leaseTimestampMs, 5e3) && !r.cn(t.ownerId)) {\n            if (r.tn(t) && r.networkEnabled) return !0;\n\n            if (!r.tn(t)) {\n              if (!t.allowTabSynchronization) throw new Vr(Fr.FAILED_PRECONDITION, Yc);\n              return !1;\n            }\n          }\n\n          return !(!r.networkEnabled || !r.inForeground) || Zc(e).Nt().next(function (t) {\n            return void 0 === r.rn(t, 5e3).find(function (t) {\n              if (r.clientId !== t.clientId) {\n                var e = !r.networkEnabled && t.networkEnabled,\n                    n = !r.inForeground && t.inForeground,\n                    t = r.networkEnabled === t.networkEnabled;\n                if (e || n && t) return !0;\n              }\n\n              return !1;\n            });\n          });\n        }).next(function (t) {\n          return r.isPrimary !== t && jr(\"IndexedDbPersistence\", \"Client \" + (t ? \"is\" : \"is not\") + \" eligible for a primary lease.\"), t;\n        });\n      }, $c.prototype.shutdown = function () {\n        return y(this, void 0, void 0, function () {\n          var n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.xe = !1, this.un(), this.$e && (this.$e.cancel(), this.$e = null), this.an(), this.hn(), [4, this.Be.runTransaction(\"shutdown\", \"readwrite\", [Ga.store, iu.store], function (t) {\n                  var e = new Cu(t, Lr.o);\n                  return n.Xe(e).next(function () {\n                    return n.en(e);\n                  });\n                })];\n\n              case 1:\n                return t.sent(), this.Be.close(), this.ln(), [2];\n            }\n          });\n        });\n      }, $c.prototype.rn = function (t, e) {\n        var n = this;\n        return t.filter(function (t) {\n          return n.sn(t.updateTimeMs, e) && !n.cn(t.clientId);\n        });\n      }, $c.prototype.fn = function () {\n        var e = this;\n        return this.runTransaction(\"getActiveClients\", \"readonly\", function (t) {\n          return Zc(t).Nt().next(function (t) {\n            return e.rn(t, 18e5).map(function (t) {\n              return t.clientId;\n            });\n          });\n        });\n      }, Object.defineProperty($c.prototype, \"started\", {\n        get: function get() {\n          return this.xe;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), $c.prototype.getMutationQueue = function (t) {\n        return lc.Kt(t, this.R, this.Ut, this.referenceDelegate);\n      }, $c.prototype.getTargetCache = function () {\n        return this.qe;\n      }, $c.prototype.getRemoteDocumentCache = function () {\n        return this.Ue;\n      }, $c.prototype.getIndexManager = function () {\n        return this.Ut;\n      }, $c.prototype.getBundleCache = function () {\n        return this.Qe;\n      }, $c.prototype.runTransaction = function (e, n, r) {\n        var i,\n            o = this;\n        return jr(\"IndexedDbPersistence\", \"Starting transaction:\", e), this.Be.runTransaction(e, \"readonly\" === n ? \"readonly\" : \"readwrite\", uu, function (t) {\n          return i = new Cu(t, o.Ne ? o.Ne.next() : Lr.o), \"readwrite-primary\" === n ? o.Je(i).next(function (t) {\n            return !!t || o.Ye(i);\n          }).next(function (t) {\n            if (!t) throw Kr(\"Failed to obtain primary lease for action '\" + e + \"'.\"), o.isPrimary = !1, o.Se.enqueueRetryable(function () {\n              return o.Me(!1);\n            }), new Vr(Fr.FAILED_PRECONDITION, cu);\n            return r(i);\n          }).next(function (t) {\n            return o.Ze(i).next(function () {\n              return t;\n            });\n          }) : o.dn(i).next(function () {\n            return r(i);\n          });\n        }).then(function (t) {\n          return i.raiseOnCommittedEvent(), t;\n        });\n      }, $c.prototype.dn = function (t) {\n        var e = this;\n        return Jc(t).get(Ga.key).next(function (t) {\n          if (null !== t && e.sn(t.leaseTimestampMs, 5e3) && !e.cn(t.ownerId) && !e.tn(t) && !(e.Ce || e.allowTabSynchronization && t.allowTabSynchronization)) throw new Vr(Fr.FAILED_PRECONDITION, Yc);\n        });\n      }, $c.prototype.Ze = function (t) {\n        var e = new Ga(this.clientId, this.allowTabSynchronization, Date.now());\n        return Jc(t).put(Ga.key, e);\n      }, $c.yt = function () {\n        return du.yt();\n      }, $c.prototype.Xe = function (t) {\n        var e = this,\n            n = Jc(t);\n        return n.get(Ga.key).next(function (t) {\n          return e.tn(t) ? (jr(\"IndexedDbPersistence\", \"Releasing primary lease.\"), n.delete(Ga.key)) : lu.resolve();\n        });\n      }, $c.prototype.sn = function (t, e) {\n        var n = Date.now();\n        return !(t < n - e || n < t && (Kr(\"Detected an update time that is in the future: \" + t + \" > \" + n), 1));\n      }, $c.prototype.We = function () {\n        var t = this;\n        null !== this.document && \"function\" == typeof this.document.addEventListener && (this.ke = function () {\n          t.Se.enqueueAndForget(function () {\n            return t.inForeground = \"visible\" === t.document.visibilityState, t.je();\n          });\n        }, this.document.addEventListener(\"visibilitychange\", this.ke), this.inForeground = \"visible\" === this.document.visibilityState);\n      }, $c.prototype.an = function () {\n        this.ke && (this.document.removeEventListener(\"visibilitychange\", this.ke), this.ke = null);\n      }, $c.prototype.Ge = function () {\n        var t,\n            e = this;\n        \"function\" == typeof (null === (t = this.window) || void 0 === t ? void 0 : t.addEventListener) && (this.Fe = function () {\n          e.un(), e.Se.enqueueAndForget(function () {\n            return e.shutdown();\n          });\n        }, this.window.addEventListener(\"pagehide\", this.Fe));\n      }, $c.prototype.hn = function () {\n        this.Fe && (this.window.removeEventListener(\"pagehide\", this.Fe), this.Fe = null);\n      }, $c.prototype.cn = function (t) {\n        var e;\n\n        try {\n          var n = null !== (null === (e = this.Ke) || void 0 === e ? void 0 : e.getItem(this.on(t)));\n          return jr(\"IndexedDbPersistence\", \"Client '\" + t + \"' \" + (n ? \"is\" : \"is not\") + \" zombied in LocalStorage\"), n;\n        } catch (t) {\n          return Kr(\"IndexedDbPersistence\", \"Failed to get zombied client id.\", t), !1;\n        }\n      }, $c.prototype.un = function () {\n        if (this.Ke) try {\n          this.Ke.setItem(this.on(this.clientId), String(Date.now()));\n        } catch (t) {\n          Kr(\"Failed to set zombie client id.\", t);\n        }\n      }, $c.prototype.ln = function () {\n        if (this.Ke) try {\n          this.Ke.removeItem(this.on(this.clientId));\n        } catch (t) {}\n      }, $c.prototype.on = function (t) {\n        return \"firestore_zombie_\" + this.persistenceKey + \"_\" + t;\n      }, $c);\n\n      function $c(t, e, n, r, i, o, s, a, u, c) {\n        if (this.allowTabSynchronization = t, this.persistenceKey = e, this.clientId = n, this.Se = i, this.window = o, this.document = s, this.De = u, this.Ce = c, this.Ne = null, this.xe = !1, this.isPrimary = !1, this.networkEnabled = !0, this.Fe = null, this.inForeground = !1, this.ke = null, this.$e = null, this.Oe = Number.NEGATIVE_INFINITY, this.Me = function (t) {\n          return Promise.resolve();\n        }, !$c.yt()) throw new Vr(Fr.UNIMPLEMENTED, \"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.\");\n        this.referenceDelegate = new Cc(this, r), this.Le = e + \"main\", this.R = new Pu(a), this.Be = new du(this.Le, 11, new Hc(this.R)), this.qe = new vc(this.referenceDelegate, this.R), this.Ut = new ec(), this.Ue = (e = this.R, a = this.Ut, new Fc(e, a)), this.Qe = new Yu(), this.window && this.window.localStorage ? this.Ke = this.window.localStorage : (this.Ke = null, !1 === c && Kr(\"IndexedDbPersistence\", \"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page.\"));\n      }\n\n      function Jc(t) {\n        return Ru(t, Ga.store);\n      }\n\n      function Zc(t) {\n        return Ru(t, iu.store);\n      }\n\n      function th(t, e) {\n        var n = t.projectId;\n        return t.isDefaultDatabase || (n += \".\" + t.database), \"firestore/\" + e + \"/\" + n + \"/\";\n      }\n\n      function eh(t, e) {\n        this.progress = t, this.wn = e;\n      }\n\n      var nh = (ch.prototype.mn = function (e, n) {\n        var r = this;\n        return this._n.getAllMutationBatchesAffectingDocumentKey(e, n).next(function (t) {\n          return r.yn(e, n, t);\n        });\n      }, ch.prototype.yn = function (t, e, r) {\n        return this.Ue.getEntry(t, e).next(function (t) {\n          for (var e = 0, n = r; e < n.length; e++) {\n            n[e].applyToLocalView(t);\n          }\n\n          return t;\n        });\n      }, ch.prototype.gn = function (t, i) {\n        t.forEach(function (t, e) {\n          for (var n = 0, r = i; n < r.length; n++) {\n            r[n].applyToLocalView(e);\n          }\n        });\n      }, ch.prototype.pn = function (e, t) {\n        var n = this;\n        return this.Ue.getEntries(e, t).next(function (t) {\n          return n.En(e, t).next(function () {\n            return t;\n          });\n        });\n      }, ch.prototype.En = function (t, e) {\n        var n = this;\n        return this._n.getAllMutationBatchesAffectingDocumentKeys(t, e).next(function (t) {\n          return n.gn(e, t);\n        });\n      }, ch.prototype.getDocumentsMatchingQuery = function (t, e, n) {\n        return r = e, Ni.isDocumentKey(r.path) && null === r.collectionGroup && 0 === r.filters.length ? this.Tn(t, e.path) : Po(e) ? this.In(t, e, n) : this.An(t, e, n);\n        var r;\n      }, ch.prototype.Tn = function (t, e) {\n        return this.mn(t, new Ni(e)).next(function (t) {\n          var e = Ys;\n          return e = t.isFoundDocument() ? e.insert(t.key, t) : e;\n        });\n      }, ch.prototype.In = function (n, r, i) {\n        var o = this,\n            s = r.collectionGroup,\n            a = Ys;\n        return this.Ut.getCollectionParents(n, s).next(function (t) {\n          return lu.forEach(t, function (t) {\n            var e,\n                e = (e = r, t = t.child(s), new Do(t, null, e.explicitOrderBy.slice(), e.filters.slice(), e.limit, e.limitType, e.startAt, e.endAt));\n            return o.An(n, e, i).next(function (t) {\n              t.forEach(function (t, e) {\n                a = a.insert(t, e);\n              });\n            });\n          }).next(function () {\n            return a;\n          });\n        });\n      }, ch.prototype.An = function (e, n, t) {\n        var c,\n            h,\n            r = this;\n        return this.Ue.getDocumentsMatchingQuery(e, n, t).next(function (t) {\n          return c = t, r._n.getAllMutationBatchesAffectingQuery(e, n);\n        }).next(function (t) {\n          return h = t, r.Rn(e, h, c).next(function (t) {\n            c = t;\n\n            for (var e = 0, n = h; e < n.length; e++) {\n              for (var r = n[e], i = 0, o = r.mutations; i < o.length; i++) {\n                var s = o[i],\n                    a = s.key,\n                    u = c.get(a);\n                null == u && (u = Gi.newInvalidDocument(a), c = c.insert(a, u)), ys(s, u, r.localWriteTime), u.isFoundDocument() || (c = c.remove(a));\n              }\n            }\n          });\n        }).next(function () {\n          return c.forEach(function (t, e) {\n            jo(n, e) || (c = c.remove(t));\n          }), c;\n        });\n      }, ch.prototype.Rn = function (t, e, n) {\n        for (var r = Js(), i = 0, o = e; i < o.length; i++) {\n          for (var s = 0, a = o[i].mutations; s < a.length; s++) {\n            var u = a[s];\n            u instanceof Es && null === n.get(u.key) && (r = r.add(u.key));\n          }\n        }\n\n        var c = n;\n        return this.Ue.getEntries(t, r).next(function (t) {\n          return t.forEach(function (t, e) {\n            e.isFoundDocument() && (c = c.insert(t, e));\n          }), c;\n        });\n      }, ch),\n          rh = (uh.Pn = function (t, e) {\n        for (var n = Js(), r = Js(), i = 0, o = e.docChanges; i < o.length; i++) {\n          var s = o[i];\n\n          switch (s.type) {\n            case 0:\n              n = n.add(s.doc.key);\n              break;\n\n            case 1:\n              r = r.add(s.doc.key);\n          }\n        }\n\n        return new uh(t, e.fromCache, n, r);\n      }, uh),\n          ih = (ah.prototype.Vn = function (t) {\n        this.Sn = t;\n      }, ah.prototype.getDocumentsMatchingQuery = function (e, r, i, o) {\n        var s = this;\n        return 0 === r.filters.length && null === r.limit && null == r.startAt && null == r.endAt && (0 === r.explicitOrderBy.length || 1 === r.explicitOrderBy.length && r.explicitOrderBy[0].field.isKeyField()) || i.isEqual(ti.min()) ? this.Dn(e, r) : this.Sn.pn(e, o).next(function (t) {\n          var n = s.Cn(r, t);\n          return (Ro(r) || xo(r)) && s.Nn(r.limitType, n, o, i) ? s.Dn(e, r) : (Br() <= p.DEBUG && jr(\"QueryEngine\", \"Re-using previous result from %s to execute query: %s\", i.toString(), Bo(r)), s.Sn.getDocumentsMatchingQuery(e, r, i).next(function (e) {\n            return n.forEach(function (t) {\n              e = e.insert(t.key, t);\n            }), e;\n          }));\n        });\n      }, ah.prototype.Cn = function (n, t) {\n        var r = new Gs(Ko(n));\n        return t.forEach(function (t, e) {\n          jo(n, e) && (r = r.add(e));\n        }), r;\n      }, ah.prototype.Nn = function (t, e, n, r) {\n        if (n.size !== e.size) return !0;\n        e = \"F\" === t ? e.last() : e.first();\n        return !!e && (e.hasPendingWrites || 0 < e.version.compareTo(r));\n      }, ah.prototype.Dn = function (t, e) {\n        return Br() <= p.DEBUG && jr(\"QueryEngine\", \"Using full collection scan to execute query:\", Bo(e)), this.Sn.getDocumentsMatchingQuery(t, e, ti.min());\n      }, ah),\n          oh = (sh.prototype.collectGarbage = function (e) {\n        var n = this;\n        return this.persistence.runTransaction(\"Collect garbage\", \"readwrite-primary\", function (t) {\n          return e.collect(t, n.Fn);\n        });\n      }, sh);\n\n      function sh(t, e, n, r) {\n        this.persistence = t, this.xn = e, this.R = r, this.Fn = new Fs(Xr), this.kn = new Mc(Wi, Yi), this.$n = ti.min(), this._n = t.getMutationQueue(n), this.On = t.getRemoteDocumentCache(), this.qe = t.getTargetCache(), this.Mn = new nh(this.On, this._n, this.persistence.getIndexManager()), this.Qe = t.getBundleCache(), this.xn.Vn(this.Mn);\n      }\n\n      function ah() {}\n\n      function uh(t, e, n, r) {\n        this.targetId = t, this.fromCache = e, this.bn = n, this.vn = r;\n      }\n\n      function ch(t, e, n) {\n        this.Ue = t, this._n = e, this.Ut = n;\n      }\n\n      function hh(t, e, n, r) {\n        return new oh(t, e, n, r);\n      }\n\n      function lh(i, o) {\n        return y(this, void 0, void 0, function () {\n          var e, n, v, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return n = (e = i)._n, v = e.Mn, [4, e.persistence.runTransaction(\"Handle user change\", \"readonly\", function (g) {\n                  var m;\n                  return e._n.getAllMutationBatches(g).next(function (t) {\n                    return m = t, n = e.persistence.getMutationQueue(o), v = new nh(e.On, n, e.persistence.getIndexManager()), n.getAllMutationBatches(g);\n                  }).next(function (t) {\n                    for (var e = [], n = [], r = Js(), i = 0, o = m; i < o.length; i++) {\n                      var s = o[i];\n                      e.push(s.batchId);\n\n                      for (var a = 0, u = s.mutations; a < u.length; a++) {\n                        var c = u[a],\n                            r = r.add(c.key);\n                      }\n                    }\n\n                    for (var h = 0, l = t; h < l.length; h++) {\n                      var f = l[h];\n                      n.push(f.batchId);\n\n                      for (var d = 0, p = f.mutations; d < p.length; d++) {\n                        var y = p[d];\n                        r = r.add(y.key);\n                      }\n                    }\n\n                    return v.pn(g, r).next(function (t) {\n                      return {\n                        Ln: t,\n                        removedBatchIds: e,\n                        addedBatchIds: n\n                      };\n                    });\n                  });\n                })];\n\n              case 1:\n                return r = t.sent(), [2, (e._n = n, e.Mn = v, e.xn.Vn(e.Mn), r)];\n            }\n          });\n        });\n      }\n\n      function fh(t, h) {\n        var l = t;\n        return l.persistence.runTransaction(\"Acknowledge batch\", \"readwrite-primary\", function (t) {\n          var e,\n              r,\n              i,\n              o,\n              s,\n              n,\n              a,\n              u = h.batch.keys(),\n              c = l.On.newChangeBuffer({\n            trackRemovals: !0\n          });\n          return e = l, r = t, o = c, s = (i = h).batch, n = s.keys(), a = lu.resolve(), n.forEach(function (n) {\n            a = a.next(function () {\n              return o.getEntry(r, n);\n            }).next(function (t) {\n              var e = i.docVersions.get(n);\n              zr(null !== e), t.version.compareTo(e) < 0 && (s.applyToRemoteDocument(t, i), t.isValidDocument() && o.addEntry(t, i.commitVersion));\n            });\n          }), a.next(function () {\n            return e._n.removeMutationBatch(r, s);\n          }).next(function () {\n            return c.apply(t);\n          }).next(function () {\n            return l._n.performConsistencyCheck(t);\n          }).next(function () {\n            return l.Mn.pn(t, u);\n          });\n        });\n      }\n\n      function dh(t) {\n        var e = t;\n        return e.persistence.runTransaction(\"Get last remote snapshot version\", \"readonly\", function (t) {\n          return e.qe.getLastRemoteSnapshotVersion(t);\n        });\n      }\n\n      function ph(t, r) {\n        var u = t,\n            c = r.snapshotVersion,\n            h = u.Fn;\n        return u.persistence.runTransaction(\"Apply remote event\", \"readwrite-primary\", function (s) {\n          var t = u.On.newChangeBuffer({\n            trackRemovals: !0\n          });\n          h = u.Fn;\n          var a = [];\n          r.targetChanges.forEach(function (t, e) {\n            var n,\n                r,\n                i,\n                o = h.get(e);\n            o && (a.push(u.qe.removeMatchingKeys(s, t.removedDocuments, e).next(function () {\n              return u.qe.addMatchingKeys(s, t.addedDocuments, e);\n            })), 0 < (i = t.resumeToken).approximateByteSize() && (n = o.withResumeToken(i, c).withSequenceNumber(s.currentSequenceNumber), h = h.insert(e, n), r = o, i = t, zr(0 < (o = n).resumeToken.approximateByteSize()), (0 === r.resumeToken.approximateByteSize() || 3e8 <= o.snapshotVersion.toMicroseconds() - r.snapshotVersion.toMicroseconds() || 0 < i.addedDocuments.size + i.modifiedDocuments.size + i.removedDocuments.size) && a.push(u.qe.updateTargetData(s, n))));\n          });\n          var e,\n              n = Hs;\n          return r.documentUpdates.forEach(function (t, e) {\n            r.resolvedLimboDocuments.has(t) && a.push(u.persistence.referenceDelegate.updateLimboDocument(s, t));\n          }), a.push(yh(s, t, r.documentUpdates, c, void 0).next(function (t) {\n            n = t;\n          })), c.isEqual(ti.min()) || (e = u.qe.getLastRemoteSnapshotVersion(s).next(function (t) {\n            return u.qe.setTargetsMetadata(s, s.currentSequenceNumber, c);\n          }), a.push(e)), lu.waitFor(a).next(function () {\n            return t.apply(s);\n          }).next(function () {\n            return u.Mn.En(s, n);\n          }).next(function () {\n            return n;\n          });\n        }).then(function (t) {\n          return u.Fn = h, t;\n        });\n      }\n\n      function yh(t, s, e, a, u) {\n        var n = Js();\n        return e.forEach(function (t) {\n          return n = n.add(t);\n        }), s.getEntries(t, n).next(function (i) {\n          var o = Hs;\n          return e.forEach(function (t, e) {\n            var n = i.get(t),\n                r = (null == u ? void 0 : u.get(t)) || a;\n            e.isNoDocument() && e.version.isEqual(ti.min()) ? (s.removeEntry(t, r), o = o.insert(t, e)) : !n.isValidDocument() || 0 < e.version.compareTo(n.version) || 0 === e.version.compareTo(n.version) && n.hasPendingWrites ? (s.addEntry(e, r), o = o.insert(t, e)) : jr(\"LocalStore\", \"Ignoring outdated watch update for \", t, \". Current version:\", n.version, \" Watch version:\", e.version);\n          }), o;\n        });\n      }\n\n      function gh(t, r) {\n        var i = t;\n        return i.persistence.runTransaction(\"Allocate target\", \"readwrite\", function (e) {\n          var n;\n          return i.qe.getTargetData(e, r).next(function (t) {\n            return t ? (n = t, lu.resolve(n)) : i.qe.allocateTargetId(e).next(function (t) {\n              return n = new Lu(r, t, 0, e.currentSequenceNumber), i.qe.addTargetData(e, n).next(function () {\n                return n;\n              });\n            });\n          });\n        }).then(function (t) {\n          var e = i.Fn.get(t.targetId);\n          return (null === e || 0 < t.snapshotVersion.compareTo(e.snapshotVersion)) && (i.Fn = i.Fn.insert(t.targetId, t), i.kn.set(r, t.targetId)), t;\n        });\n      }\n\n      function mh(i, o, s) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                n = (e = i).Fn.get(o), r = s ? \"readwrite\" : \"readwrite-primary\", t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 5]), s ? [3, 3] : [4, e.persistence.runTransaction(\"Release target\", r, function (t) {\n                  return e.persistence.referenceDelegate.removeTarget(t, n);\n                })];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [3, 5];\n\n              case 4:\n                if (!Tu(r = t.sent())) throw r;\n                return jr(\"LocalStore\", \"Failed to update sequence numbers for target \" + o + \": \" + r), [3, 5];\n\n              case 5:\n                return e.Fn = e.Fn.remove(o), e.kn.delete(n.target), [2];\n            }\n          });\n        });\n      }\n\n      function vh(t, o, s) {\n        var a = t,\n            u = ti.min(),\n            c = Js();\n        return a.persistence.runTransaction(\"Execute query\", \"readonly\", function (e) {\n          return t = a, n = e, r = Fo(o), (void 0 !== (t = (i = t).kn.get(r)) ? lu.resolve(i.Fn.get(t)) : i.qe.getTargetData(n, r)).next(function (t) {\n            if (t) return u = t.lastLimboFreeSnapshotVersion, a.qe.getMatchingKeysForTargetId(e, t.targetId).next(function (t) {\n              c = t;\n            });\n          }).next(function () {\n            return a.xn.getDocumentsMatchingQuery(e, o, s ? u : ti.min(), s ? c : Js());\n          }).next(function (t) {\n            return {\n              documents: t,\n              Bn: c\n            };\n          });\n          var t, n, r, i;\n        });\n      }\n\n      function bh(t, e) {\n        var n = t,\n            r = n.qe,\n            t = n.Fn.get(e);\n        return t ? Promise.resolve(t.target) : n.persistence.runTransaction(\"Get target data\", \"readonly\", function (t) {\n          return r.lt(t, e).next(function (t) {\n            return t ? t.target : null;\n          });\n        });\n      }\n\n      function wh(t) {\n        var s = t;\n        return s.persistence.runTransaction(\"Get new document changes\", \"readonly\", function (t) {\n          return e = s.On, n = t, t = s.$n, r = e, i = Hs, o = Bu(t), t = Gc(n), n = IDBKeyRange.lowerBound(o, !0), t.$t({\n            index: Ja.readTimeIndex,\n            range: n\n          }, function (t, e) {\n            var n = Uu(r.R, e);\n            i = i.insert(n.key, n), o = e.readTime;\n          }).next(function () {\n            return {\n              wn: i,\n              readTime: ju(o)\n            };\n          });\n          var e, n, r, i, o;\n        }).then(function (t) {\n          var e = t.wn,\n              t = t.readTime;\n          return s.$n = t, e;\n        });\n      }\n\n      function Eh(n) {\n        return y(this, void 0, void 0, function () {\n          var e;\n          return g(this, function (t) {\n            return [2, (e = n).persistence.runTransaction(\"Synchronize last document change read time\", \"readonly\", function (t) {\n              return t = Gc(t), r = ti.min(), t.$t({\n                index: Ja.readTimeIndex,\n                reverse: !0\n              }, function (t, e, n) {\n                e.readTime && (r = ju(e.readTime)), n.done();\n              }).next(function () {\n                return r;\n              });\n              var r;\n            }).then(function (t) {\n              e.$n = t;\n            })];\n          });\n        });\n      }\n\n      var Th,\n          Ih,\n          _h = (Qh.prototype.getBundleMetadata = function (t, e) {\n        return lu.resolve(this.Kn.get(e));\n      }, Qh.prototype.saveBundleMetadata = function (t, e) {\n        return this.Kn.set(e.id, {\n          id: e.id,\n          version: e.version,\n          createTime: va(e.createTime)\n        }), lu.resolve();\n      }, Qh.prototype.getNamedQuery = function (t, e) {\n        return lu.resolve(this.jn.get(e));\n      }, Qh.prototype.saveNamedQuery = function (t, e) {\n        return this.jn.set(e.name, {\n          name: (e = e).name,\n          query: Wu(e.bundledQuery),\n          readTime: va(e.readTime)\n        }), lu.resolve();\n      }, Qh),\n          Sh = (Gh.prototype.isEmpty = function () {\n        return this.Wn.isEmpty();\n      }, Gh.prototype.addReference = function (t, e) {\n        e = new Ah(t, e);\n        this.Wn = this.Wn.add(e), this.zn = this.zn.add(e);\n      }, Gh.prototype.Jn = function (t, e) {\n        var n = this;\n        t.forEach(function (t) {\n          return n.addReference(t, e);\n        });\n      }, Gh.prototype.removeReference = function (t, e) {\n        this.Yn(new Ah(t, e));\n      }, Gh.prototype.Xn = function (t, e) {\n        var n = this;\n        t.forEach(function (t) {\n          return n.removeReference(t, e);\n        });\n      }, Gh.prototype.Zn = function (t) {\n        var e = this,\n            n = new Ni(new ui([])),\n            r = new Ah(n, t),\n            t = new Ah(n, t + 1),\n            i = [];\n        return this.zn.forEachInRange([r, t], function (t) {\n          e.Yn(t), i.push(t.key);\n        }), i;\n      }, Gh.prototype.ts = function () {\n        var e = this;\n        this.Wn.forEach(function (t) {\n          return e.Yn(t);\n        });\n      }, Gh.prototype.Yn = function (t) {\n        this.Wn = this.Wn.delete(t), this.zn = this.zn.delete(t);\n      }, Gh.prototype.es = function (t) {\n        var e = new Ni(new ui([])),\n            n = new Ah(e, t),\n            t = new Ah(e, t + 1),\n            r = Js();\n        return this.zn.forEachInRange([n, t], function (t) {\n          r = r.add(t.key);\n        }), r;\n      }, Gh.prototype.containsKey = function (t) {\n        var e = new Ah(t, 0),\n            e = this.Wn.firstAfterOrEqual(e);\n        return null !== e && t.isEqual(e.key);\n      }, Gh),\n          Ah = (Kh.Gn = function (t, e) {\n        return Ni.comparator(t.key, e.key) || Xr(t.ns, e.ns);\n      }, Kh.Hn = function (t, e) {\n        return Xr(t.ns, e.ns) || Ni.comparator(t.key, e.key);\n      }, Kh),\n          Nh = (jh.prototype.checkEmpty = function (t) {\n        return lu.resolve(0 === this._n.length);\n      }, jh.prototype.addMutationBatch = function (t, e, n, r) {\n        var i = this.ss;\n        this.ss++, 0 < this._n.length && this._n[this._n.length - 1];\n        n = new xu(i, e, n, r);\n\n        this._n.push(n);\n\n        for (var o = 0, s = r; o < s.length; o++) {\n          var a = s[o];\n          this.rs = this.rs.add(new Ah(a.key, i)), this.Ut.addToCollectionParentIndex(t, a.key.path.popLast());\n        }\n\n        return lu.resolve(n);\n      }, jh.prototype.lookupMutationBatch = function (t, e) {\n        return lu.resolve(this.os(e));\n      }, jh.prototype.getNextMutationBatchAfterBatchId = function (t, e) {\n        e = this.cs(e + 1), e = e < 0 ? 0 : e;\n        return lu.resolve(this._n.length > e ? this._n[e] : null);\n      }, jh.prototype.getHighestUnacknowledgedBatchId = function () {\n        return lu.resolve(0 === this._n.length ? -1 : this.ss - 1);\n      }, jh.prototype.getAllMutationBatches = function (t) {\n        return lu.resolve(this._n.slice());\n      }, jh.prototype.getAllMutationBatchesAffectingDocumentKey = function (t, e) {\n        var n = this,\n            r = new Ah(e, 0),\n            e = new Ah(e, Number.POSITIVE_INFINITY),\n            i = [];\n        return this.rs.forEachInRange([r, e], function (t) {\n          t = n.os(t.ns);\n          i.push(t);\n        }), lu.resolve(i);\n      }, jh.prototype.getAllMutationBatchesAffectingDocumentKeys = function (t, e) {\n        var n = this,\n            r = new Gs(Xr);\n        return e.forEach(function (t) {\n          var e = new Ah(t, 0),\n              t = new Ah(t, Number.POSITIVE_INFINITY);\n          n.rs.forEachInRange([e, t], function (t) {\n            r = r.add(t.ns);\n          });\n        }), lu.resolve(this.us(r));\n      }, jh.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {\n        var n = e.path,\n            r = n.length + 1,\n            e = n;\n        Ni.isDocumentKey(e) || (e = e.child(\"\"));\n        var e = new Ah(new Ni(e), 0),\n            i = new Gs(Xr);\n        return this.rs.forEachWhile(function (t) {\n          var e = t.key.path;\n          return !!n.isPrefixOf(e) && (e.length === r && (i = i.add(t.ns)), !0);\n        }, e), lu.resolve(this.us(i));\n      }, jh.prototype.us = function (t) {\n        var e = this,\n            n = [];\n        return t.forEach(function (t) {\n          t = e.os(t);\n          null !== t && n.push(t);\n        }), n;\n      }, jh.prototype.removeMutationBatch = function (n, r) {\n        var i = this;\n        zr(0 === this.hs(r.batchId, \"removed\")), this._n.shift();\n        var o = this.rs;\n        return lu.forEach(r.mutations, function (t) {\n          var e = new Ah(t.key, r.batchId);\n          return o = o.delete(e), i.referenceDelegate.markPotentiallyOrphaned(n, t.key);\n        }).next(function () {\n          i.rs = o;\n        });\n      }, jh.prototype.Gt = function (t) {}, jh.prototype.containsKey = function (t, e) {\n        var n = new Ah(e, 0),\n            n = this.rs.firstAfterOrEqual(n);\n        return lu.resolve(e.isEqual(n && n.key));\n      }, jh.prototype.performConsistencyCheck = function (t) {\n        return this._n.length, lu.resolve();\n      }, jh.prototype.hs = function (t, e) {\n        return this.cs(t);\n      }, jh.prototype.cs = function (t) {\n        return 0 === this._n.length ? 0 : t - this._n[0].batchId;\n      }, jh.prototype.os = function (t) {\n        t = this.cs(t);\n        return t < 0 || t >= this._n.length ? null : this._n[t];\n      }, jh),\n          Dh = (Bh.prototype.addEntry = function (t, e, n) {\n        var r = e.key,\n            i = this.docs.get(r),\n            o = i ? i.size : 0,\n            i = this.ls(e);\n        return this.docs = this.docs.insert(r, {\n          document: e.clone(),\n          size: i,\n          readTime: n\n        }), this.size += i - o, this.Ut.addToCollectionParentIndex(t, r.path.popLast());\n      }, Bh.prototype.removeEntry = function (t) {\n        var e = this.docs.get(t);\n        e && (this.docs = this.docs.remove(t), this.size -= e.size);\n      }, Bh.prototype.getEntry = function (t, e) {\n        var n = this.docs.get(e);\n        return lu.resolve(n ? n.document.clone() : Gi.newInvalidDocument(e));\n      }, Bh.prototype.getEntries = function (t, e) {\n        var n = this,\n            r = Hs;\n        return e.forEach(function (t) {\n          var e = n.docs.get(t);\n          r = r.insert(t, e ? e.document.clone() : Gi.newInvalidDocument(t));\n        }), lu.resolve(r);\n      }, Bh.prototype.getDocumentsMatchingQuery = function (t, e, n) {\n        for (var r = Hs, i = new Ni(e.path.child(\"\")), o = this.docs.getIteratorFrom(i); o.hasNext();) {\n          var s = o.getNext(),\n              a = s.key,\n              u = s.value,\n              s = u.document,\n              u = u.readTime;\n          if (!e.path.isPrefixOf(a.path)) break;\n          u.compareTo(n) <= 0 || jo(e, s) && (r = r.insert(s.key, s.clone()));\n        }\n\n        return lu.resolve(r);\n      }, Bh.prototype.fs = function (t, e) {\n        return lu.forEach(this.docs, function (t) {\n          return e(t);\n        });\n      }, Bh.prototype.newChangeBuffer = function (t) {\n        return new Ch(this);\n      }, Bh.prototype.getSize = function (t) {\n        return lu.resolve(this.size);\n      }, Bh),\n          Ch = (n(qh, Ih = I), qh.prototype.applyChanges = function (n) {\n        var r = this,\n            i = [];\n        return this.changes.forEach(function (t, e) {\n          e.document.isValidDocument() ? i.push(r.Ie.addEntry(n, e.document, r.getReadTime(t))) : r.Ie.removeEntry(t);\n        }), lu.waitFor(i);\n      }, qh.prototype.getFromCache = function (t, e) {\n        return this.Ie.getEntry(t, e);\n      }, qh.prototype.getAllFromCache = function (t, e) {\n        return this.Ie.getEntries(t, e);\n      }, qh),\n          kh = (Uh.prototype.forEachTarget = function (t, n) {\n        return this.ds.forEach(function (t, e) {\n          return n(e);\n        }), lu.resolve();\n      }, Uh.prototype.getLastRemoteSnapshotVersion = function (t) {\n        return lu.resolve(this.lastRemoteSnapshotVersion);\n      }, Uh.prototype.getHighestSequenceNumber = function (t) {\n        return lu.resolve(this.ws);\n      }, Uh.prototype.allocateTargetId = function (t) {\n        return this.highestTargetId = this.ys.next(), lu.resolve(this.highestTargetId);\n      }, Uh.prototype.setTargetsMetadata = function (t, e, n) {\n        return n && (this.lastRemoteSnapshotVersion = n), e > this.ws && (this.ws = e), lu.resolve();\n      }, Uh.prototype.te = function (t) {\n        this.ds.set(t.target, t);\n        var e = t.targetId;\n        e > this.highestTargetId && (this.ys = new mc(e), this.highestTargetId = e), t.sequenceNumber > this.ws && (this.ws = t.sequenceNumber);\n      }, Uh.prototype.addTargetData = function (t, e) {\n        return this.te(e), this.targetCount += 1, lu.resolve();\n      }, Uh.prototype.updateTargetData = function (t, e) {\n        return this.te(e), lu.resolve();\n      }, Uh.prototype.removeTargetData = function (t, e) {\n        return this.ds.delete(e.target), this._s.Zn(e.targetId), --this.targetCount, lu.resolve();\n      }, Uh.prototype.removeTargets = function (n, r, i) {\n        var o = this,\n            s = 0,\n            a = [];\n        return this.ds.forEach(function (t, e) {\n          e.sequenceNumber <= r && null === i.get(e.targetId) && (o.ds.delete(t), a.push(o.removeMatchingKeysForTargetId(n, e.targetId)), s++);\n        }), lu.waitFor(a).next(function () {\n          return s;\n        });\n      }, Uh.prototype.getTargetCount = function (t) {\n        return lu.resolve(this.targetCount);\n      }, Uh.prototype.getTargetData = function (t, e) {\n        e = this.ds.get(e) || null;\n        return lu.resolve(e);\n      }, Uh.prototype.addMatchingKeys = function (t, e, n) {\n        return this._s.Jn(e, n), lu.resolve();\n      }, Uh.prototype.removeMatchingKeys = function (e, t, n) {\n        this._s.Xn(t, n);\n\n        var r = this.persistence.referenceDelegate,\n            i = [];\n        return r && t.forEach(function (t) {\n          i.push(r.markPotentiallyOrphaned(e, t));\n        }), lu.waitFor(i);\n      }, Uh.prototype.removeMatchingKeysForTargetId = function (t, e) {\n        return this._s.Zn(e), lu.resolve();\n      }, Uh.prototype.getMatchingKeysForTargetId = function (t, e) {\n        e = this._s.es(e);\n        return lu.resolve(e);\n      }, Uh.prototype.containsKey = function (t, e) {\n        return lu.resolve(this._s.containsKey(e));\n      }, Uh),\n          Rh = (Vh.prototype.start = function () {\n        return Promise.resolve();\n      }, Vh.prototype.shutdown = function () {\n        return this.xe = !1, Promise.resolve();\n      }, Object.defineProperty(Vh.prototype, \"started\", {\n        get: function get() {\n          return this.xe;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Vh.prototype.setDatabaseDeletedListener = function () {}, Vh.prototype.setNetworkEnabled = function () {}, Vh.prototype.getIndexManager = function () {\n        return this.Ut;\n      }, Vh.prototype.getMutationQueue = function (t) {\n        var e = this.gs[t.toKey()];\n        return e || (e = new Nh(this.Ut, this.referenceDelegate), this.gs[t.toKey()] = e), e;\n      }, Vh.prototype.getTargetCache = function () {\n        return this.qe;\n      }, Vh.prototype.getRemoteDocumentCache = function () {\n        return this.Ue;\n      }, Vh.prototype.getBundleCache = function () {\n        return this.Qe;\n      }, Vh.prototype.runTransaction = function (t, e, n) {\n        var r = this;\n        jr(\"MemoryPersistence\", \"Starting transaction:\", t);\n        var i = new xh(this.Ne.next());\n        return this.referenceDelegate.Es(), n(i).next(function (t) {\n          return r.referenceDelegate.Ts(i).next(function () {\n            return t;\n          });\n        }).toPromise().then(function (t) {\n          return i.raiseOnCommittedEvent(), t;\n        });\n      }, Vh.prototype.Is = function (e, n) {\n        return lu.or(Object.values(this.gs).map(function (t) {\n          return function () {\n            return t.containsKey(e, n);\n          };\n        }));\n      }, Vh),\n          xh = (n(Fh, Th = Se), Fh),\n          Oh = (Mh.bs = function (t) {\n        return new Mh(t);\n      }, Object.defineProperty(Mh.prototype, \"vs\", {\n        get: function get() {\n          if (this.Rs) return this.Rs;\n          throw Hr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Mh.prototype.addReference = function (t, e, n) {\n        return this.As.addReference(n, e), this.vs.delete(n.toString()), lu.resolve();\n      }, Mh.prototype.removeReference = function (t, e, n) {\n        return this.As.removeReference(n, e), this.vs.add(n.toString()), lu.resolve();\n      }, Mh.prototype.markPotentiallyOrphaned = function (t, e) {\n        return this.vs.add(e.toString()), lu.resolve();\n      }, Mh.prototype.removeTarget = function (t, e) {\n        var n = this;\n        this.As.Zn(e.targetId).forEach(function (t) {\n          return n.vs.add(t.toString());\n        });\n        var r = this.persistence.getTargetCache();\n        return r.getMatchingKeysForTargetId(t, e.targetId).next(function (t) {\n          t.forEach(function (t) {\n            return n.vs.add(t.toString());\n          });\n        }).next(function () {\n          return r.removeTargetData(t, e);\n        });\n      }, Mh.prototype.Es = function () {\n        this.Rs = new Set();\n      }, Mh.prototype.Ts = function (n) {\n        var r = this,\n            i = this.persistence.getRemoteDocumentCache().newChangeBuffer();\n        return lu.forEach(this.vs, function (t) {\n          var e = Ni.fromPath(t);\n          return r.Ps(n, e).next(function (t) {\n            t || i.removeEntry(e);\n          });\n        }).next(function () {\n          return r.Rs = null, i.apply(n);\n        });\n      }, Mh.prototype.updateLimboDocument = function (t, e) {\n        var n = this;\n        return this.Ps(t, e).next(function (t) {\n          t ? n.vs.delete(e.toString()) : n.vs.add(e.toString());\n        });\n      }, Mh.prototype.ps = function (t) {\n        return 0;\n      }, Mh.prototype.Ps = function (t, e) {\n        var n = this;\n        return lu.or([function () {\n          return lu.resolve(n.As.containsKey(e));\n        }, function () {\n          return n.persistence.getTargetCache().containsKey(t, e);\n        }, function () {\n          return n.persistence.Is(t, e);\n        }]);\n      }, Mh),\n          Lh = (Ph.prototype.isAuthenticated = function () {\n        return null != this.uid;\n      }, Ph.prototype.toKey = function () {\n        return this.isAuthenticated() ? \"uid:\" + this.uid : \"anonymous-user\";\n      }, Ph.prototype.isEqual = function (t) {\n        return t.uid === this.uid;\n      }, Ph);\n\n      function Ph(t) {\n        this.uid = t;\n      }\n\n      function Mh(t) {\n        this.persistence = t, this.As = new Sh(), this.Rs = null;\n      }\n\n      function Fh(t) {\n        var e = this;\n        return (e = Th.call(this) || this).currentSequenceNumber = t, e;\n      }\n\n      function Vh(t, e) {\n        var n = this;\n        this.gs = {}, this.Ne = new Lr(0), this.xe = !1, this.xe = !0, this.referenceDelegate = t(this), this.qe = new kh(this), this.Ut = new Zu(), this.Ue = (t = this.Ut, new Dh(t, function (t) {\n          return n.referenceDelegate.ps(t);\n        })), this.R = new Pu(e), this.Qe = new _h(this.R);\n      }\n\n      function Uh(t) {\n        this.persistence = t, this.ds = new Mc(Wi, Yi), this.lastRemoteSnapshotVersion = ti.min(), this.highestTargetId = 0, this.ws = 0, this._s = new Sh(), this.targetCount = 0, this.ys = mc.Jt();\n      }\n\n      function qh(t) {\n        var e = this;\n        return (e = Ih.call(this) || this).Ie = t, e;\n      }\n\n      function Bh(t, e) {\n        this.Ut = t, this.ls = e, this.docs = new Fs(Ni.comparator), this.size = 0;\n      }\n\n      function jh(t, e) {\n        this.Ut = t, this.referenceDelegate = e, this._n = [], this.ss = 1, this.rs = new Gs(Ah.Gn);\n      }\n\n      function Kh(t, e) {\n        this.key = t, this.ns = e;\n      }\n\n      function Gh() {\n        this.Wn = new Gs(Ah.Gn), this.zn = new Gs(Ah.Hn);\n      }\n\n      function Qh(t) {\n        this.R = t, this.Kn = new Map(), this.jn = new Map();\n      }\n\n      function Hh(t, e) {\n        return \"firestore_clients_\" + t + \"_\" + e;\n      }\n\n      function zh(t, e, n) {\n        n = \"firestore_mutations_\" + t + \"_\" + n;\n        return e.isAuthenticated() && (n += \"_\" + e.uid), n;\n      }\n\n      function Wh(t, e) {\n        return \"firestore_targets_\" + t + \"_\" + e;\n      }\n\n      Lh.UNAUTHENTICATED = new Lh(null), Lh.GOOGLE_CREDENTIALS = new Lh(\"google-credentials-uid\"), Lh.FIRST_PARTY = new Lh(\"first-party-uid\");\n      var Yh,\n          Xh = (bl.Vs = function (t, e, n) {\n        var r,\n            i = JSON.parse(n),\n            o = \"object\" == typeof i && -1 !== [\"pending\", \"acknowledged\", \"rejected\"].indexOf(i.state) && (void 0 === i.error || \"object\" == typeof i.error);\n        return o && i.error && (o = \"string\" == typeof i.error.message && \"string\" == typeof i.error.code) && (r = new Vr(i.error.code, i.error.message)), o ? new bl(t, e, i.state, r) : (Kr(\"SharedClientState\", \"Failed to parse mutation state for ID '\" + e + \"': \" + n), null);\n      }, bl.prototype.Ss = function () {\n        var t = {\n          state: this.state,\n          updateTimeMs: Date.now()\n        };\n        return this.error && (t.error = {\n          code: this.error.code,\n          message: this.error.message\n        }), JSON.stringify(t);\n      }, bl),\n          $h = (vl.Vs = function (t, e) {\n        var n,\n            r = JSON.parse(e),\n            i = \"object\" == typeof r && -1 !== [\"not-current\", \"current\", \"rejected\"].indexOf(r.state) && (void 0 === r.error || \"object\" == typeof r.error);\n        return i && r.error && (i = \"string\" == typeof r.error.message && \"string\" == typeof r.error.code) && (n = new Vr(r.error.code, r.error.message)), i ? new vl(t, r.state, n) : (Kr(\"SharedClientState\", \"Failed to parse target state for ID '\" + t + \"': \" + e), null);\n      }, vl.prototype.Ss = function () {\n        var t = {\n          state: this.state,\n          updateTimeMs: Date.now()\n        };\n        return this.error && (t.error = {\n          code: this.error.code,\n          message: this.error.message\n        }), JSON.stringify(t);\n      }, vl),\n          Jh = (ml.Vs = function (t, e) {\n        for (var n = JSON.parse(e), r = \"object\" == typeof n && n.activeTargetIds instanceof Array, i = Zs, o = 0; r && o < n.activeTargetIds.length; ++o) {\n          r = Ai(n.activeTargetIds[o]), i = i.add(n.activeTargetIds[o]);\n        }\n\n        return r ? new ml(t, i) : (Kr(\"SharedClientState\", \"Failed to parse client data for instance '\" + t + \"': \" + e), null);\n      }, ml),\n          Zh = (gl.Vs = function (t) {\n        var e = JSON.parse(t);\n        return \"object\" == typeof e && -1 !== [\"Unknown\", \"Online\", \"Offline\"].indexOf(e.onlineState) && \"string\" == typeof e.clientId ? new gl(e.clientId, e.onlineState) : (Kr(\"SharedClientState\", \"Failed to parse online state: \" + t), null);\n      }, gl),\n          tl = (yl.prototype.Ds = function (t) {\n        this.activeTargetIds = this.activeTargetIds.add(t);\n      }, yl.prototype.Cs = function (t) {\n        this.activeTargetIds = this.activeTargetIds.delete(t);\n      }, yl.prototype.Ss = function () {\n        var t = {\n          activeTargetIds: this.activeTargetIds.toArray(),\n          updateTimeMs: Date.now()\n        };\n        return JSON.stringify(t);\n      }, yl),\n          el = (pl.yt = function (t) {\n        return !(!t || !t.localStorage);\n      }, pl.prototype.start = function () {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o,\n              s,\n              a,\n              u,\n              c,\n              h,\n              l = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.syncEngine.fn()];\n\n              case 1:\n                for (s = t.sent(), e = 0, n = s; e < n.length; e++) {\n                  (r = n[e]) !== this.Ns && (i = this.getItem(Hh(this.persistenceKey, r))) && (o = Jh.Vs(r, i)) && (this.ks = this.ks.insert(o.clientId, o));\n                }\n\n                for (this.Ks(), (s = this.storage.getItem(this.Us)) && (a = this.js(s)) && this.Ws(a), u = 0, c = this.$s; u < c.length; u++) {\n                  h = c[u], this.Fs(h);\n                }\n\n                return this.$s = [], this.window.addEventListener(\"pagehide\", function () {\n                  return l.shutdown();\n                }), this.started = !0, [2];\n            }\n          });\n        });\n      }, pl.prototype.writeSequenceNumber = function (t) {\n        this.setItem(this.Ms, JSON.stringify(t));\n      }, pl.prototype.getAllActiveQueryTargets = function () {\n        return this.Gs(this.ks);\n      }, pl.prototype.isActiveQueryTarget = function (n) {\n        var r = !1;\n        return this.ks.forEach(function (t, e) {\n          e.activeTargetIds.has(n) && (r = !0);\n        }), r;\n      }, pl.prototype.addPendingMutation = function (t) {\n        this.zs(t, \"pending\");\n      }, pl.prototype.updateMutationState = function (t, e, n) {\n        this.zs(t, e, n), this.Hs(t);\n      }, pl.prototype.addLocalQueryTarget = function (t) {\n        var e,\n            n = \"not-current\";\n        return this.isActiveQueryTarget(t) && (!(e = this.storage.getItem(Wh(this.persistenceKey, t))) || (e = $h.Vs(t, e)) && (n = e.state)), this.Js.Ds(t), this.Ks(), n;\n      }, pl.prototype.removeLocalQueryTarget = function (t) {\n        this.Js.Cs(t), this.Ks();\n      }, pl.prototype.isLocalQueryTarget = function (t) {\n        return this.Js.activeTargetIds.has(t);\n      }, pl.prototype.clearQueryState = function (t) {\n        this.removeItem(Wh(this.persistenceKey, t));\n      }, pl.prototype.updateQueryState = function (t, e, n) {\n        this.Ys(t, e, n);\n      }, pl.prototype.handleUserChange = function (t, e, n) {\n        var r = this;\n        e.forEach(function (t) {\n          r.Hs(t);\n        }), this.currentUser = t, n.forEach(function (t) {\n          r.addPendingMutation(t);\n        });\n      }, pl.prototype.setOnlineState = function (t) {\n        this.Xs(t);\n      }, pl.prototype.notifyBundleLoaded = function () {\n        this.Zs();\n      }, pl.prototype.shutdown = function () {\n        this.started && (this.window.removeEventListener(\"storage\", this.xs), this.removeItem(this.Os), this.started = !1);\n      }, pl.prototype.getItem = function (t) {\n        var e = this.storage.getItem(t);\n        return jr(\"SharedClientState\", \"READ\", t, e), e;\n      }, pl.prototype.setItem = function (t, e) {\n        jr(\"SharedClientState\", \"SET\", t, e), this.storage.setItem(t, e);\n      }, pl.prototype.removeItem = function (t) {\n        jr(\"SharedClientState\", \"REMOVE\", t), this.storage.removeItem(t);\n      }, pl.prototype.Fs = function (t) {\n        var e = this,\n            o = t;\n        o.storageArea === this.storage && (jr(\"SharedClientState\", \"EVENT\", o.key, o.newValue), o.key !== this.Os ? this.Se.enqueueRetryable(function () {\n          return y(e, void 0, void 0, function () {\n            var e, n, r, i;\n            return g(this, function (t) {\n              if (this.started) {\n                if (null !== o.key) if (this.Ls.test(o.key)) {\n                  if (null == o.newValue) return e = this.ti(o.key), [2, this.ei(e, null)];\n                  if (e = this.ni(o.key, o.newValue)) return [2, this.ei(e.clientId, e)];\n                } else if (this.Bs.test(o.key)) {\n                  if (null !== o.newValue && (n = this.si(o.key, o.newValue))) return [2, this.ii(n)];\n                } else if (this.qs.test(o.key)) {\n                  if (null !== o.newValue && (r = this.ri(o.key, o.newValue))) return [2, this.oi(r)];\n                } else if (o.key === this.Us) {\n                  if (null !== o.newValue && (i = this.js(o.newValue))) return [2, this.Ws(i)];\n                } else if (o.key === this.Ms) (i = function (t) {\n                  var e = Lr.o;\n                  if (null != t) try {\n                    var n = JSON.parse(t);\n                    zr(\"number\" == typeof n), e = n;\n                  } catch (t) {\n                    Kr(\"SharedClientState\", \"Failed to read sequence number from WebStorage\", t);\n                  }\n                  return e;\n                }(o.newValue)) !== Lr.o && this.sequenceNumberHandler(i);else if (o.key === this.Qs) return [2, this.syncEngine.ci()];\n              } else this.$s.push(o);\n\n              return [2];\n            });\n          });\n        }) : Kr(\"Received WebStorage notification for local change. Another client might have garbage-collected our state\"));\n      }, Object.defineProperty(pl.prototype, \"Js\", {\n        get: function get() {\n          return this.ks.get(this.Ns);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), pl.prototype.Ks = function () {\n        this.setItem(this.Os, this.Js.Ss());\n      }, pl.prototype.zs = function (t, e, n) {\n        n = new Xh(this.currentUser, t, e, n), t = zh(this.persistenceKey, this.currentUser, t);\n        this.setItem(t, n.Ss());\n      }, pl.prototype.Hs = function (t) {\n        t = zh(this.persistenceKey, this.currentUser, t);\n        this.removeItem(t);\n      }, pl.prototype.Xs = function (t) {\n        t = {\n          clientId: this.Ns,\n          onlineState: t\n        };\n        this.storage.setItem(this.Us, JSON.stringify(t));\n      }, pl.prototype.Ys = function (t, e, n) {\n        var r = Wh(this.persistenceKey, t),\n            n = new $h(t, e, n);\n        this.setItem(r, n.Ss());\n      }, pl.prototype.Zs = function () {\n        this.setItem(this.Qs, \"value-not-used\");\n      }, pl.prototype.ti = function (t) {\n        t = this.Ls.exec(t);\n        return t ? t[1] : null;\n      }, pl.prototype.ni = function (t, e) {\n        t = this.ti(t);\n        return Jh.Vs(t, e);\n      }, pl.prototype.si = function (t, e) {\n        var n = this.Bs.exec(t),\n            t = Number(n[1]),\n            n = void 0 !== n[2] ? n[2] : null;\n        return Xh.Vs(new Lh(n), t, e);\n      }, pl.prototype.ri = function (t, e) {\n        t = this.qs.exec(t), t = Number(t[1]);\n        return $h.Vs(t, e);\n      }, pl.prototype.js = function (t) {\n        return Zh.Vs(t);\n      }, pl.prototype.ii = function (e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            return e.user.uid === this.currentUser.uid ? [2, this.syncEngine.ui(e.batchId, e.state, e.error)] : (jr(\"SharedClientState\", \"Ignoring mutation for non-active user \" + e.user.uid), [2]);\n          });\n        });\n      }, pl.prototype.oi = function (t) {\n        return this.syncEngine.ai(t.targetId, t.state, t.error);\n      }, pl.prototype.ei = function (t, e) {\n        var n = this,\n            r = e ? this.ks.insert(t, e) : this.ks.remove(t),\n            i = this.Gs(this.ks),\n            o = this.Gs(r),\n            s = [],\n            a = [];\n        return o.forEach(function (t) {\n          i.has(t) || s.push(t);\n        }), i.forEach(function (t) {\n          o.has(t) || a.push(t);\n        }), this.syncEngine.hi(s, a).then(function () {\n          n.ks = r;\n        });\n      }, pl.prototype.Ws = function (t) {\n        this.ks.get(t.clientId) && this.onlineStateHandler(t.onlineState);\n      }, pl.prototype.Gs = function (t) {\n        var n = Zs;\n        return t.forEach(function (t, e) {\n          n = n.unionWith(e.activeTargetIds);\n        }), n;\n      }, pl),\n          nl = (dl.prototype.addPendingMutation = function (t) {}, dl.prototype.updateMutationState = function (t, e, n) {}, dl.prototype.addLocalQueryTarget = function (t) {\n        return this.li.Ds(t), this.fi[t] || \"not-current\";\n      }, dl.prototype.updateQueryState = function (t, e, n) {\n        this.fi[t] = e;\n      }, dl.prototype.removeLocalQueryTarget = function (t) {\n        this.li.Cs(t);\n      }, dl.prototype.isLocalQueryTarget = function (t) {\n        return this.li.activeTargetIds.has(t);\n      }, dl.prototype.clearQueryState = function (t) {\n        delete this.fi[t];\n      }, dl.prototype.getAllActiveQueryTargets = function () {\n        return this.li.activeTargetIds;\n      }, dl.prototype.isActiveQueryTarget = function (t) {\n        return this.li.activeTargetIds.has(t);\n      }, dl.prototype.start = function () {\n        return this.li = new tl(), Promise.resolve();\n      }, dl.prototype.handleUserChange = function (t, e, n) {}, dl.prototype.setOnlineState = function (t) {}, dl.prototype.shutdown = function () {}, dl.prototype.writeSequenceNumber = function (t) {}, dl.prototype.notifyBundleLoaded = function () {}, dl),\n          rl = (fl.prototype.di = function (t) {}, fl.prototype.shutdown = function () {}, fl),\n          il = (ll.prototype.di = function (t) {\n        this.gi.push(t);\n      }, ll.prototype.shutdown = function () {\n        window.removeEventListener(\"online\", this.wi), window.removeEventListener(\"offline\", this.mi);\n      }, ll.prototype.pi = function () {\n        window.addEventListener(\"online\", this.wi), window.addEventListener(\"offline\", this.mi);\n      }, ll.prototype._i = function () {\n        jr(\"ConnectivityMonitor\", \"Network connectivity changed: AVAILABLE\");\n\n        for (var t = 0, e = this.gi; t < e.length; t++) {\n          (0, e[t])(0);\n        }\n      }, ll.prototype.yi = function () {\n        jr(\"ConnectivityMonitor\", \"Network connectivity changed: UNAVAILABLE\");\n\n        for (var t = 0, e = this.gi; t < e.length; t++) {\n          (0, e[t])(1);\n        }\n      }, ll.yt = function () {\n        return \"undefined\" != typeof window && void 0 !== window.addEventListener && void 0 !== window.removeEventListener;\n      }, ll),\n          ol = {\n        BatchGetDocuments: \"batchGet\",\n        Commit: \"commit\",\n        RunQuery: \"runQuery\"\n      },\n          sl = (hl.prototype.Ii = function (t) {\n        this.Ai = t;\n      }, hl.prototype.Ri = function (t) {\n        this.bi = t;\n      }, hl.prototype.onMessage = function (t) {\n        this.vi = t;\n      }, hl.prototype.close = function () {\n        this.Ti();\n      }, hl.prototype.send = function (t) {\n        this.Ei(t);\n      }, hl.prototype.Pi = function () {\n        this.Ai();\n      }, hl.prototype.Vi = function (t) {\n        this.bi(t);\n      }, hl.prototype.Si = function (t) {\n        this.vi(t);\n      }, hl),\n          al = (cl.prototype.Ni = function (e, t, n, r) {\n        var i = this.xi(e, t);\n        jr(\"RestConnection\", \"Sending: \", i, n);\n        t = {};\n        return this.Fi(t, r), this.ki(e, i, t, n).then(function (t) {\n          return jr(\"RestConnection\", \"Received: \", t), t;\n        }, function (t) {\n          throw Gr(\"RestConnection\", e + \" failed with error: \", t, \"url: \", i, \"request:\", n), t;\n        });\n      }, cl.prototype.$i = function (t, e, n, r) {\n        return this.Ni(t, e, n, r);\n      }, cl.prototype.Fi = function (t, e) {\n        if (t[\"X-Goog-Api-Client\"] = \"gl-js/ fire/8.6.5\", t[\"Content-Type\"] = \"text/plain\", this.databaseInfo.appId && (t[\"X-Firebase-GMPID\"] = this.databaseInfo.appId), e) for (var n in e.authHeaders) {\n          e.authHeaders.hasOwnProperty(n) && (t[n] = e.authHeaders[n]);\n        }\n      }, cl.prototype.xi = function (t, e) {\n        return this.Di + \"/v1/\" + e + \":\" + ol[t];\n      }, n(ul, Yh = cl), ul.prototype.ki = function (u, e, n, r) {\n        return new Promise(function (o, s) {\n          var a = new Or();\n          a.listenOnce(Nr.COMPLETE, function () {\n            try {\n              switch (a.getLastErrorCode()) {\n                case Ar.NO_ERROR:\n                  var t = a.getResponseJson();\n                  jr(\"Connection\", \"XHR received:\", JSON.stringify(t)), o(t);\n                  break;\n\n                case Ar.TIMEOUT:\n                  jr(\"Connection\", 'RPC \"' + u + '\" timed out'), s(new Vr(Fr.DEADLINE_EXCEEDED, \"Request time out\"));\n                  break;\n\n                case Ar.HTTP_ERROR:\n                  var e,\n                      n,\n                      r = a.getStatus();\n                  jr(\"Connection\", 'RPC \"' + u + '\" failed with status:', r, \"response text:\", a.getResponseText()), 0 < r ? (e = a.getResponseJson().error) && e.status && e.message ? (i = e.status.toLowerCase().replace(/_/g, \"-\"), n = 0 <= Object.values(Fr).indexOf(i) ? i : Fr.UNKNOWN, s(new Vr(n, e.message))) : s(new Vr(Fr.UNKNOWN, \"Server responded with status \" + a.getStatus())) : s(new Vr(Fr.UNAVAILABLE, \"Connection failed.\"));\n                  break;\n\n                default:\n                  Hr();\n              }\n            } finally {\n              jr(\"Connection\", 'RPC \"' + u + '\" completed.');\n            }\n\n            var i;\n          });\n          var t = JSON.stringify(r);\n          a.send(e, \"POST\", t, n, 15);\n        });\n      }, ul.prototype.Oi = function (t, e) {\n        var n,\n            r = [this.Di, \"/\", \"google.firestore.v1.Firestore\", \"/\", t, \"/channel\"],\n            i = new pr(),\n            o = Sr(),\n            t = {\n          httpSessionIdParam: \"gsessionid\",\n          initMessageHeaders: {},\n          messageUrlParams: {\n            database: \"projects/\" + this.databaseId.projectId + \"/databases/\" + this.databaseId.database\n          },\n          sendRawJson: !0,\n          supportsCrossDomainXhr: !0,\n          internalChannelParams: {\n            forwardChannelRequestTimeoutMs: 6e5\n          },\n          forceLongPolling: this.forceLongPolling,\n          detectBufferingProxy: this.autoDetectLongPolling\n        };\n        this.useFetchStreams && (t.xmlHttpFactory = new Rr({})), this.Fi(t.initMessageHeaders, e), \"undefined\" != typeof window && (window.cordova || window.phonegap || window.PhoneGap) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h()) || \"object\" == typeof navigator && \"ReactNative\" === navigator.product || 0 <= h().indexOf(\"Electron/\") || 0 <= (n = h()).indexOf(\"MSIE \") || 0 <= n.indexOf(\"Trident/\") || 0 <= h().indexOf(\"MSAppHost/\") || \"object\" == typeof (n = \"object\" == typeof chrome ? chrome.runtime : \"object\" == typeof browser ? browser.runtime : void 0) && void 0 !== n.id || (t.httpHeadersOverwriteParam = \"$httpHeaders\");\n        r = r.join(\"\");\n        jr(\"Connection\", \"Creating WebChannel: \" + r, t);\n\n        var s = i.createWebChannel(r, t),\n            a = !1,\n            u = !1,\n            c = new sl({\n          Ei: function Ei(t) {\n            u ? jr(\"Connection\", \"Not sending because WebChannel is closed:\", t) : (a || (jr(\"Connection\", \"Opening WebChannel transport.\"), s.open(), a = !0), jr(\"Connection\", \"WebChannel sending:\", t), s.send(t));\n          },\n          Ti: function Ti() {\n            return s.close();\n          }\n        }),\n            t = function t(_t2, e, n) {\n          _t2.listen(e, function (t) {\n            try {\n              n(t);\n            } catch (t) {\n              setTimeout(function () {\n                throw t;\n              }, 0);\n            }\n          });\n        };\n\n        return t(s, xr.EventType.OPEN, function () {\n          u || jr(\"Connection\", \"WebChannel transport opened.\");\n        }), t(s, xr.EventType.CLOSE, function () {\n          u || (u = !0, jr(\"Connection\", \"WebChannel transport closed\"), c.Vi());\n        }), t(s, xr.EventType.ERROR, function (t) {\n          u || (u = !0, Gr(\"Connection\", \"WebChannel transport errored:\", t), c.Vi(new Vr(Fr.UNAVAILABLE, \"The operation could not be completed\")));\n        }), t(s, xr.EventType.MESSAGE, function (t) {\n          var e, n, r, i;\n          u || (zr(!!(e = t.data[0])), (n = e.error || (null === (i = e[0]) || void 0 === i ? void 0 : i.error)) ? (jr(\"Connection\", \"WebChannel received error:\", n), r = n.status, t = function () {\n            var t = Ds[r];\n            if (void 0 !== t) return Ms(t);\n          }(), i = n.message, void 0 === t && (t = Fr.INTERNAL, i = \"Unknown error status: \" + r + \" with message \" + n.message), u = !0, c.Vi(new Vr(t, i)), s.close()) : (jr(\"Connection\", \"WebChannel received:\", e), c.Si(e)));\n        }), t(o, Dr.STAT_EVENT, function (t) {\n          t.stat === Cr ? jr(\"Connection\", \"Detected buffering proxy\") : t.stat === kr && jr(\"Connection\", \"Detected no buffering proxy\");\n        }), setTimeout(function () {\n          c.Pi();\n        }, 0), c;\n      }, ul);\n\n      function ul(t) {\n        var e = this;\n        return (e = Yh.call(this, t) || this).forceLongPolling = t.forceLongPolling, e.autoDetectLongPolling = t.autoDetectLongPolling, e.useFetchStreams = t.useFetchStreams, e;\n      }\n\n      function cl(t) {\n        this.databaseInfo = t, this.databaseId = t.databaseId;\n        var e = t.ssl ? \"https\" : \"http\";\n        this.Di = e + \"://\" + t.host, this.Ci = \"projects/\" + this.databaseId.projectId + \"/databases/\" + this.databaseId.database + \"/documents\";\n      }\n\n      function hl(t) {\n        this.Ei = t.Ei, this.Ti = t.Ti;\n      }\n\n      function ll() {\n        var t = this;\n        this.wi = function () {\n          return t._i();\n        }, this.mi = function () {\n          return t.yi();\n        }, this.gi = [], this.pi();\n      }\n\n      function fl() {}\n\n      function dl() {\n        this.li = new tl(), this.fi = {}, this.onlineStateHandler = null, this.sequenceNumberHandler = null;\n      }\n\n      function pl(t, e, n, r, i) {\n        this.window = t, this.Se = e, this.persistenceKey = n, this.Ns = r, this.syncEngine = null, this.onlineStateHandler = null, this.sequenceNumberHandler = null, this.xs = this.Fs.bind(this), this.ks = new Fs(Xr), this.started = !1, this.$s = [];\n        n = n.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n        this.storage = this.window.localStorage, this.currentUser = i, this.Os = Hh(this.persistenceKey, this.Ns), this.Ms = \"firestore_sequence_number_\" + this.persistenceKey, this.ks = this.ks.insert(this.Ns, new tl()), this.Ls = new RegExp(\"^firestore_clients_\" + n + \"_([^_]*)$\"), this.Bs = new RegExp(\"^firestore_mutations_\" + n + \"_(\\\\d+)(?:_(.*))?$\"), this.qs = new RegExp(\"^firestore_targets_\" + n + \"_(\\\\d+)$\"), this.Us = \"firestore_online_state_\" + this.persistenceKey, this.Qs = \"firestore_bundle_loaded_\" + this.persistenceKey, this.window.addEventListener(\"storage\", this.xs);\n      }\n\n      function yl() {\n        this.activeTargetIds = Zs;\n      }\n\n      function gl(t, e) {\n        this.clientId = t, this.onlineState = e;\n      }\n\n      function ml(t, e) {\n        this.clientId = t, this.activeTargetIds = e;\n      }\n\n      function vl(t, e, n) {\n        this.targetId = t, this.state = e, this.error = n;\n      }\n\n      function bl(t, e, n, r) {\n        this.user = t, this.batchId = e, this.state = n, this.error = r;\n      }\n\n      function wl() {\n        return \"undefined\" != typeof window ? window : null;\n      }\n\n      function El() {\n        return \"undefined\" != typeof document ? document : null;\n      }\n\n      function Tl(t) {\n        return new ya(t, !0);\n      }\n\n      function Il(t, e, n, r, i) {\n        var o = this;\n        this.localStore = t, this.datastore = e, this.asyncQueue = n, this.remoteSyncer = {}, this.kr = [], this.$r = new Map(), this.Or = new Set(), this.Mr = [], this.Lr = i, this.Lr.di(function (t) {\n          n.enqueueAndForget(function () {\n            return y(o, void 0, void 0, function () {\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return Hl(this) ? (jr(\"RemoteStore\", \"Restarting streams for network reachability change.\"), [4, function (n) {\n                      return y(this, void 0, void 0, function () {\n                        var e;\n                        return g(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return (e = n).Or.add(4), [4, Ul(e)];\n\n                            case 1:\n                              return t.sent(), e.Br.set(\"Unknown\"), e.Or.delete(4), [4, Vl(e)];\n\n                            case 2:\n                              return t.sent(), [2];\n                          }\n                        });\n                      });\n                    }(this)]) : [3, 2];\n\n                  case 1:\n                    t.sent(), t.label = 2;\n\n                  case 2:\n                    return [2];\n                }\n              });\n            });\n          });\n        }), this.Br = new Rl(n, r);\n      }\n\n      var _l,\n          Sl,\n          Al,\n          Nl = (Fl.prototype.reset = function () {\n        this.qi = 0;\n      }, Fl.prototype.Ki = function () {\n        this.qi = this.Bi;\n      }, Fl.prototype.ji = function (t) {\n        var e = this;\n        this.cancel();\n        var n = Math.floor(this.qi + this.Wi()),\n            r = Math.max(0, Date.now() - this.Qi),\n            i = Math.max(0, n - r);\n        0 < i && jr(\"ExponentialBackoff\", \"Backing off for \" + i + \" ms (base delay: \" + this.qi + \" ms, delay with jitter: \" + n + \" ms, last attempt: \" + r + \" ms ago)\"), this.Ui = this.Se.enqueueAfterDelay(this.timerId, i, function () {\n          return e.Qi = Date.now(), t();\n        }), this.qi *= this.Li, this.qi < this.Mi && (this.qi = this.Mi), this.qi > this.Bi && (this.qi = this.Bi);\n      }, Fl.prototype.Gi = function () {\n        null !== this.Ui && (this.Ui.skipDelay(), this.Ui = null);\n      }, Fl.prototype.cancel = function () {\n        null !== this.Ui && (this.Ui.cancel(), this.Ui = null);\n      }, Fl.prototype.Wi = function () {\n        return (Math.random() - .5) * this.qi;\n      }, Fl),\n          I = (Ml.prototype.tr = function () {\n        return 1 === this.state || 2 === this.state || 4 === this.state;\n      }, Ml.prototype.er = function () {\n        return 2 === this.state;\n      }, Ml.prototype.start = function () {\n        3 !== this.state ? this.auth() : this.nr();\n      }, Ml.prototype.stop = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.tr() ? [4, this.close(0)] : [3, 2];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, Ml.prototype.sr = function () {\n        this.state = 0, this.Zi.reset();\n      }, Ml.prototype.ir = function () {\n        var t = this;\n        this.er() && null === this.Xi && (this.Xi = this.Se.enqueueAfterDelay(this.zi, 6e4, function () {\n          return t.rr();\n        }));\n      }, Ml.prototype.cr = function (t) {\n        this.ur(), this.stream.send(t);\n      }, Ml.prototype.rr = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            return this.er() ? [2, this.close(0)] : [2];\n          });\n        });\n      }, Ml.prototype.ur = function () {\n        this.Xi && (this.Xi.cancel(), this.Xi = null);\n      }, Ml.prototype.close = function (e, n) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.ur(), this.Zi.cancel(), this.Yi++, 3 !== e ? this.Zi.reset() : n && n.code === Fr.RESOURCE_EXHAUSTED ? (Kr(n.toString()), Kr(\"Using maximum backoff delay to prevent overloading the backend.\"), this.Zi.Ki()) : n && n.code === Fr.UNAUTHENTICATED && this.Ji.invalidateToken(), null !== this.stream && (this.ar(), this.stream.close(), this.stream = null), this.state = e, [4, this.listener.Ri(n)];\n\n              case 1:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, Ml.prototype.ar = function () {}, Ml.prototype.auth = function () {\n        var n = this;\n        this.state = 1;\n        var t = this.hr(this.Yi),\n            e = this.Yi;\n        this.Ji.getToken().then(function (t) {\n          n.Yi === e && n.lr(t);\n        }, function (e) {\n          t(function () {\n            var t = new Vr(Fr.UNKNOWN, \"Fetching auth token failed: \" + e.message);\n            return n.dr(t);\n          });\n        });\n      }, Ml.prototype.lr = function (t) {\n        var e = this,\n            n = this.hr(this.Yi);\n        this.stream = this.wr(t), this.stream.Ii(function () {\n          n(function () {\n            return e.state = 2, e.listener.Ii();\n          });\n        }), this.stream.Ri(function (t) {\n          n(function () {\n            return e.dr(t);\n          });\n        }), this.stream.onMessage(function (t) {\n          n(function () {\n            return e.onMessage(t);\n          });\n        });\n      }, Ml.prototype.nr = function () {\n        var t = this;\n        this.state = 4, this.Zi.ji(function () {\n          return y(t, void 0, void 0, function () {\n            return g(this, function (t) {\n              return this.state = 0, this.start(), [2];\n            });\n          });\n        });\n      }, Ml.prototype.dr = function (t) {\n        return jr(\"PersistentStream\", \"close with error: \" + t), this.stream = null, this.close(3, t);\n      }, Ml.prototype.hr = function (e) {\n        var n = this;\n        return function (t) {\n          n.Se.enqueueAndForget(function () {\n            return n.Yi === e ? t() : (jr(\"PersistentStream\", \"stream callback skipped by getCloseGuardedDispatcher.\"), Promise.resolve());\n          });\n        };\n      }, Ml),\n          Dl = (n(Pl, Al = I), Pl.prototype.wr = function (t) {\n        return this.Hi.Oi(\"Listen\", t);\n      }, Pl.prototype.onMessage = function (t) {\n        this.Zi.reset();\n\n        var e = function (t, e) {\n          if (\"targetChange\" in e) {\n            e.targetChange;\n            var n = \"NO_CHANGE\" === (o = e.targetChange.targetChangeType || \"NO_CHANGE\") ? 0 : \"ADD\" === o ? 1 : \"REMOVE\" === o ? 2 : \"CURRENT\" === o ? 3 : \"RESET\" === o ? 4 : Hr(),\n                r = e.targetChange.targetIds || [],\n                i = (s = e.targetChange.resumeToken, t.I ? (zr(void 0 === s || \"string\" == typeof s), fi.fromBase64String(s || \"\")) : (zr(void 0 === s || s instanceof Uint8Array), fi.fromUint8Array(s || new Uint8Array()))),\n                o = (a = e.targetChange.cause) && (u = void 0 === (c = a).code ? Fr.UNKNOWN : Ms(c.code), new Vr(u, c.message || \"\")),\n                s = new ia(n, r, i, o || null);\n          } else if (\"documentChange\" in e) {\n            e.documentChange, (n = e.documentChange).document, n.document.name, n.document.updateTime;\n            var r = Ta(t, n.document.name),\n                i = va(n.document.updateTime),\n                a = new ji({\n              mapValue: {\n                fields: n.document.fields\n              }\n            }),\n                u = (o = Gi.newFoundDocument(r, i, a), n.targetIds || []),\n                c = n.removedTargetIds || [];\n            s = new na(u, c, o.key, o);\n          } else if (\"documentDelete\" in e) e.documentDelete, (n = e.documentDelete).document, r = Ta(t, n.document), i = n.readTime ? va(n.readTime) : ti.min(), a = Gi.newNoDocument(r, i), o = n.removedTargetIds || [], s = new na([], o, a.key, a);else if (\"documentRemove\" in e) e.documentRemove, (n = e.documentRemove).document, r = Ta(t, n.document), i = n.removedTargetIds || [], s = new na([], i, r, null);else {\n            if (!(\"filter\" in e)) return Hr();\n            e.filter;\n            e = e.filter;\n            e.targetId, n = e.count || 0, r = new Ns(n), i = e.targetId, s = new ra(i, r);\n          }\n\n          return s;\n        }(this.R, t),\n            t = function (t) {\n          if (!(\"targetChange\" in t)) return ti.min();\n          t = t.targetChange;\n          return (!t.targetIds || !t.targetIds.length) && t.readTime ? va(t.readTime) : ti.min();\n        }(t);\n\n        return this.listener._r(e, t);\n      }, Pl.prototype.mr = function (t) {\n        var e,\n            n,\n            r,\n            i = {};\n        i.database = Sa(this.R), i.addTarget = (e = this.R, (r = Xi(r = (n = t).target) ? {\n          documents: Ra(e, r)\n        } : {\n          query: xa(e, r)\n        }).targetId = n.targetId, 0 < n.resumeToken.approximateByteSize() ? r.resumeToken = ma(e, n.resumeToken) : 0 < n.snapshotVersion.compareTo(ti.min()) && (r.readTime = ga(e, n.snapshotVersion.toTimestamp())), r);\n        var o,\n            t = (this.R, o = t, null == (t = function () {\n          switch (o.purpose) {\n            case 0:\n              return null;\n\n            case 1:\n              return \"existence-filter-mismatch\";\n\n            case 2:\n              return \"limbo-document\";\n\n            default:\n              return Hr();\n          }\n        }()) ? null : {\n          \"goog-listen-tags\": t\n        });\n        t && (i.labels = t), this.cr(i);\n      }, Pl.prototype.yr = function (t) {\n        var e = {};\n        e.database = Sa(this.R), e.removeTarget = t, this.cr(e);\n      }, Pl),\n          Cl = (n(Ll, Sl = I), Object.defineProperty(Ll.prototype, \"pr\", {\n        get: function get() {\n          return this.gr;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ll.prototype.start = function () {\n        this.gr = !1, this.lastStreamToken = void 0, Sl.prototype.start.call(this);\n      }, Ll.prototype.ar = function () {\n        this.gr && this.Er([]);\n      }, Ll.prototype.wr = function (t) {\n        return this.Hi.Oi(\"Write\", t);\n      }, Ll.prototype.onMessage = function (t) {\n        if (zr(!!t.streamToken), this.lastStreamToken = t.streamToken, this.gr) {\n          this.Zi.reset();\n          var e = (n = t.writeResults, r = t.commitTime, n && 0 < n.length ? (zr(void 0 !== r), n.map(function (t) {\n            return n = r, (t = (e = t).updateTime ? va(e.updateTime) : va(n)).isEqual(ti.min()) && (t = va(n)), new hs(t, e.transformResults || []);\n            var e, n;\n          })) : []),\n              n = va(t.commitTime);\n          return this.listener.Tr(n, e);\n        }\n\n        var n, r;\n        return zr(!t.writeResults || 0 === t.writeResults.length), this.gr = !0, this.listener.Ir();\n      }, Ll.prototype.Ar = function () {\n        var t = {};\n        t.database = Sa(this.R), this.cr(t);\n      }, Ll.prototype.Er = function (t) {\n        var e = this,\n            t = {\n          streamToken: this.lastStreamToken,\n          writes: t.map(function (t) {\n            return Ca(e.R, t);\n          })\n        };\n        this.cr(t);\n      }, Ll),\n          kl = (n(Ol, _l = function _l() {}), Ol.prototype.br = function () {\n        if (this.Rr) throw new Vr(Fr.FAILED_PRECONDITION, \"The client has already been terminated.\");\n      }, Ol.prototype.Ni = function (e, n, r) {\n        var i = this;\n        return this.br(), this.credentials.getToken().then(function (t) {\n          return i.Hi.Ni(e, n, r, t);\n        }).catch(function (t) {\n          throw \"FirebaseError\" === t.name ? (t.code === Fr.UNAUTHENTICATED && i.credentials.invalidateToken(), t) : new Vr(Fr.UNKNOWN, t.toString());\n        });\n      }, Ol.prototype.$i = function (e, n, r) {\n        var i = this;\n        return this.br(), this.credentials.getToken().then(function (t) {\n          return i.Hi.$i(e, n, r, t);\n        }).catch(function (t) {\n          throw \"FirebaseError\" === t.name ? (t.code === Fr.UNAUTHENTICATED && i.credentials.invalidateToken(), t) : new Vr(Fr.UNKNOWN, t.toString());\n        });\n      }, Ol.prototype.terminate = function () {\n        this.Rr = !0;\n      }, Ol),\n          Rl = (xl.prototype.Sr = function () {\n        var t = this;\n        0 === this.vr && (this.Dr(\"Unknown\"), this.Pr = this.asyncQueue.enqueueAfterDelay(\"online_state_timeout\", 1e4, function () {\n          return t.Pr = null, t.Cr(\"Backend didn't respond within 10 seconds.\"), t.Dr(\"Offline\"), Promise.resolve();\n        }));\n      }, xl.prototype.Nr = function (t) {\n        \"Online\" === this.state ? this.Dr(\"Unknown\") : (this.vr++, 1 <= this.vr && (this.Fr(), this.Cr(\"Connection failed 1 times. Most recent error: \" + t.toString()), this.Dr(\"Offline\")));\n      }, xl.prototype.set = function (t) {\n        this.Fr(), this.vr = 0, \"Online\" === t && (this.Vr = !1), this.Dr(t);\n      }, xl.prototype.Dr = function (t) {\n        t !== this.state && (this.state = t, this.onlineStateHandler(t));\n      }, xl.prototype.Cr = function (t) {\n        t = \"Could not reach Cloud Firestore backend. \" + t + \"\\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.\";\n        this.Vr ? (Kr(t), this.Vr = !1) : jr(\"OnlineStateTracker\", t);\n      }, xl.prototype.Fr = function () {\n        null !== this.Pr && (this.Pr.cancel(), this.Pr = null);\n      }, xl);\n\n      function xl(t, e) {\n        this.asyncQueue = t, this.onlineStateHandler = e, this.state = \"Unknown\", this.vr = 0, this.Pr = null, this.Vr = !0;\n      }\n\n      function Ol(t, e, n) {\n        var r = this;\n        return (r = _l.call(this) || this).credentials = t, r.Hi = e, r.R = n, r.Rr = !1, r;\n      }\n\n      function Ll(t, e, n, r, i) {\n        var o = this;\n        return (o = Sl.call(this, t, \"write_stream_connection_backoff\", \"write_stream_idle\", e, n, i) || this).R = r, o.gr = !1, o;\n      }\n\n      function Pl(t, e, n, r, i) {\n        var o = this;\n        return (o = Al.call(this, t, \"listen_stream_connection_backoff\", \"listen_stream_idle\", e, n, i) || this).R = r, o;\n      }\n\n      function Ml(t, e, n, r, i, o) {\n        this.Se = t, this.zi = n, this.Hi = r, this.Ji = i, this.listener = o, this.state = 0, this.Yi = 0, this.Xi = null, this.stream = null, this.Zi = new Nl(t, e);\n      }\n\n      function Fl(t, e, n, r, i) {\n        void 0 === n && (n = 1e3), void 0 === r && (r = 1.5), void 0 === i && (i = 6e4), this.Se = t, this.timerId = e, this.Mi = n, this.Li = r, this.Bi = i, this.qi = 0, this.Ui = null, this.Qi = Date.now(), this.reset();\n      }\n\n      function Vl(r) {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (!Hl(r)) return [3, 4];\n                e = 0, n = r.Mr, t.label = 1;\n\n              case 1:\n                return e < n.length ? [4, (0, n[e])(!0)] : [3, 4];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return e++, [3, 1];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function Ul(r) {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = 0, n = r.Mr, t.label = 1;\n\n              case 1:\n                return e < n.length ? [4, (0, n[e])(!1)] : [3, 4];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return e++, [3, 1];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function ql(t, e) {\n        t.$r.has(e.targetId) || (t.$r.set(e.targetId, e), Ql(t) ? Gl(t) : ef(t).er() && jl(t, e));\n      }\n\n      function Bl(t, e) {\n        var n = t,\n            t = ef(n);\n        n.$r.delete(e), t.er() && Kl(n, e), 0 === n.$r.size && (t.er() ? t.ir() : Hl(n) && n.Br.set(\"Unknown\"));\n      }\n\n      function jl(t, e) {\n        t.qr.U(e.targetId), ef(t).mr(e);\n      }\n\n      function Kl(t, e) {\n        t.qr.U(e), ef(t).yr(e);\n      }\n\n      function Gl(e) {\n        e.qr = new sa({\n          getRemoteKeysForTarget: function getRemoteKeysForTarget(t) {\n            return e.remoteSyncer.getRemoteKeysForTarget(t);\n          },\n          lt: function lt(t) {\n            return e.$r.get(t) || null;\n          }\n        }), ef(e).start(), e.Br.Sr();\n      }\n\n      function Ql(t) {\n        return Hl(t) && !ef(t).tr() && 0 < t.$r.size;\n      }\n\n      function Hl(t) {\n        return 0 === t.Or.size;\n      }\n\n      function zl(t) {\n        t.qr = void 0;\n      }\n\n      function Wl(s, a, u) {\n        return y(this, void 0, void 0, function () {\n          var n, o;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (s.Br.set(\"Online\"), !(a instanceof ia && 2 === a.state && a.cause)) return [3, 6];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 5]), [4, function (o, s) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n, r, i;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          e = s.cause, n = 0, r = s.targetIds, t.label = 1;\n\n                        case 1:\n                          return n < r.length ? (i = r[n], o.$r.has(i) ? [4, o.remoteSyncer.rejectListen(i, e)] : [3, 3]) : [3, 5];\n\n                        case 2:\n                          t.sent(), o.$r.delete(i), o.qr.removeTarget(i), t.label = 3;\n\n                        case 3:\n                          t.label = 4;\n\n                        case 4:\n                          return n++, [3, 1];\n\n                        case 5:\n                          return [2];\n                      }\n                    });\n                  });\n                }(s, a)];\n\n              case 2:\n                return t.sent(), [3, 5];\n\n              case 3:\n                return n = t.sent(), jr(\"RemoteStore\", \"Failed to remove targets %s: %s \", a.targetIds.join(\",\"), n), [4, Yl(s, n)];\n\n              case 4:\n                return t.sent(), [3, 5];\n\n              case 5:\n                return [3, 13];\n\n              case 6:\n                if (a instanceof na ? s.qr.X(a) : a instanceof ra ? s.qr.rt(a) : s.qr.et(a), u.isEqual(ti.min())) return [3, 13];\n                t.label = 7;\n\n              case 7:\n                return t.trys.push([7, 11,, 13]), [4, dh(s.localStore)];\n\n              case 8:\n                return o = t.sent(), 0 <= u.compareTo(o) ? [4, (i = u, (e = (r = s).qr.ut(i)).targetChanges.forEach(function (t, e) {\n                  var n;\n                  0 < t.resumeToken.approximateByteSize() && (n = r.$r.get(e)) && r.$r.set(e, n.withResumeToken(t.resumeToken, i));\n                }), e.targetMismatches.forEach(function (t) {\n                  var e = r.$r.get(t);\n                  e && (r.$r.set(t, e.withResumeToken(fi.EMPTY_BYTE_STRING, e.snapshotVersion)), Kl(r, t), e = new Lu(e.target, t, 1, e.sequenceNumber), jl(r, e));\n                }), r.remoteSyncer.applyRemoteEvent(e))] : [3, 10];\n\n              case 9:\n                t.sent(), t.label = 10;\n\n              case 10:\n                return [3, 13];\n\n              case 11:\n                return jr(\"RemoteStore\", \"Failed to raise snapshot:\", o = t.sent()), [4, Yl(s, o)];\n\n              case 12:\n                return t.sent(), [3, 13];\n\n              case 13:\n                return [2];\n            }\n\n            var r, i, e;\n          });\n        });\n      }\n\n      function Yl(n, r, i) {\n        return y(this, void 0, void 0, function () {\n          var e = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (!Tu(r)) throw r;\n                return n.Or.add(1), [4, Ul(n)];\n\n              case 1:\n                return t.sent(), n.Br.set(\"Offline\"), i = i || function () {\n                  return dh(n.localStore);\n                }, n.asyncQueue.enqueueRetryable(function () {\n                  return y(e, void 0, void 0, function () {\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return jr(\"RemoteStore\", \"Retrying IndexedDB access\"), [4, i()];\n\n                        case 1:\n                          return t.sent(), n.Or.delete(1), [4, Vl(n)];\n\n                        case 2:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                }), [2];\n            }\n          });\n        });\n      }\n\n      function Xl(e, n) {\n        return n().catch(function (t) {\n          return Yl(e, t, n);\n        });\n      }\n\n      function $l(u) {\n        return y(this, void 0, void 0, function () {\n          var i, o, s, a;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                o = nf(i = u), s = 0 < i.kr.length ? i.kr[i.kr.length - 1].batchId : -1, t.label = 1;\n\n              case 1:\n                if (!(Hl(i) && i.kr.length < 10)) return [3, 7];\n                t.label = 2;\n\n              case 2:\n                return t.trys.push([2, 4,, 6]), [4, (e = i.localStore, n = s, (r = e).persistence.runTransaction(\"Get next mutation batch\", \"readonly\", function (t) {\n                  return void 0 === n && (n = -1), r._n.getNextMutationBatchAfterBatchId(t, n);\n                }))];\n\n              case 3:\n                return null === (a = t.sent()) ? (0 === i.kr.length && o.ir(), [3, 7]) : (s = a.batchId, function (t, e) {\n                  t.kr.push(e);\n                  t = nf(t);\n                  t.er() && t.pr && t.Er(e.mutations);\n                }(i, a), [3, 6]);\n\n              case 4:\n                return a = t.sent(), [4, Yl(i, a)];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [3, 1];\n\n              case 7:\n                return Jl(i) && Zl(i), [2];\n            }\n\n            var e, n, r;\n          });\n        });\n      }\n\n      function Jl(t) {\n        return Hl(t) && !nf(t).tr() && 0 < t.kr.length;\n      }\n\n      function Zl(t) {\n        nf(t).start();\n      }\n\n      function tf(n, r) {\n        return y(this, void 0, void 0, function () {\n          var e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e = n, r ? (e.Or.delete(2), [4, Vl(e)]) : [3, 2];\n\n              case 1:\n                return t.sent(), [3, 5];\n\n              case 2:\n                return r ? [3, 4] : (e.Or.add(2), [4, Ul(e)]);\n\n              case 3:\n                t.sent(), e.Br.set(\"Unknown\"), t.label = 4;\n\n              case 4:\n                t.label = 5;\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function ef(n) {\n        var t,\n            e,\n            r,\n            i = this;\n        return n.Ur || (n.Ur = (t = n.datastore, e = n.asyncQueue, r = {\n          Ii: function (n) {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                return n.$r.forEach(function (t, e) {\n                  jl(n, t);\n                }), [2];\n              });\n            });\n          }.bind(null, n),\n          Ri: function (e, n) {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                return zl(e), Ql(e) ? (e.Br.Nr(n), Gl(e)) : e.Br.set(\"Unknown\"), [2];\n              });\n            });\n          }.bind(null, n),\n          _r: Wl.bind(null, n)\n        }, t.br(), new Dl(e, t.Hi, t.credentials, t.R, r)), n.Mr.push(function (e) {\n          return y(i, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e ? (n.Ur.sr(), Ql(n) ? Gl(n) : n.Br.set(\"Unknown\"), [3, 3]) : [3, 1];\n\n                case 1:\n                  return [4, n.Ur.stop()];\n\n                case 2:\n                  t.sent(), zl(n), t.label = 3;\n\n                case 3:\n                  return [2];\n              }\n            });\n          });\n        })), n.Ur;\n      }\n\n      function nf(n) {\n        var t,\n            e,\n            r,\n            i = this;\n        return n.Qr || (n.Qr = (t = n.datastore, e = n.asyncQueue, r = {\n          Ii: function (e) {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                return nf(e).Ar(), [2];\n              });\n            });\n          }.bind(null, n),\n          Ri: function (e, n) {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return n && nf(e).pr ? [4, function (r, i) {\n                      return y(this, void 0, void 0, function () {\n                        var e, n;\n                        return g(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return Ps(n = i.code) && n !== Fr.ABORTED ? (e = r.kr.shift(), nf(r).sr(), [4, Xl(r, function () {\n                                return r.remoteSyncer.rejectFailedWrite(e.batchId, i);\n                              })]) : [3, 3];\n\n                            case 1:\n                              return t.sent(), [4, $l(r)];\n\n                            case 2:\n                              t.sent(), t.label = 3;\n\n                            case 3:\n                              return [2];\n                          }\n                        });\n                      });\n                    }(e, n)] : [3, 2];\n\n                  case 1:\n                    t.sent(), t.label = 2;\n\n                  case 2:\n                    return Jl(e) && Zl(e), [2];\n                }\n              });\n            });\n          }.bind(null, n),\n          Ir: function (o) {\n            return y(this, void 0, void 0, function () {\n              var e, n, r, i;\n              return g(this, function (t) {\n                for (e = nf(o), n = 0, r = o.kr; n < r.length; n++) {\n                  i = r[n], e.Er(i.mutations);\n                }\n\n                return [2];\n              });\n            });\n          }.bind(null, n),\n          Tr: function (r, i, o) {\n            return y(this, void 0, void 0, function () {\n              var e, n;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = r.kr.shift(), n = Ou.from(e, i, o), [4, Xl(r, function () {\n                      return r.remoteSyncer.applySuccessfulWrite(n);\n                    })];\n\n                  case 1:\n                    return t.sent(), [4, $l(r)];\n\n                  case 2:\n                    return t.sent(), [2];\n                }\n              });\n            });\n          }.bind(null, n)\n        }, t.br(), new Cl(e, t.Hi, t.credentials, t.R, r)), n.Mr.push(function (e) {\n          return y(i, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e ? (n.Qr.sr(), [4, $l(n)]) : [3, 2];\n\n                case 1:\n                  return t.sent(), [3, 4];\n\n                case 2:\n                  return [4, n.Qr.stop()];\n\n                case 3:\n                  t.sent(), 0 < n.kr.length && (jr(\"RemoteStore\", \"Stopping write stream with \" + n.kr.length + \" pending writes\"), n.kr = []), t.label = 4;\n\n                case 4:\n                  return [2];\n              }\n            });\n          });\n        })), n.Qr;\n      }\n\n      var rf = (of.createAndSchedule = function (t, e, n, r, i) {\n        i = new of(t, e, Date.now() + n, r, i);\n        return i.start(n), i;\n      }, of.prototype.start = function (t) {\n        var e = this;\n        this.timerHandle = setTimeout(function () {\n          return e.handleDelayElapsed();\n        }, t);\n      }, of.prototype.skipDelay = function () {\n        return this.handleDelayElapsed();\n      }, of.prototype.cancel = function (t) {\n        null !== this.timerHandle && (this.clearTimeout(), this.deferred.reject(new Vr(Fr.CANCELLED, \"Operation cancelled\" + (t ? \": \" + t : \"\"))));\n      }, of.prototype.handleDelayElapsed = function () {\n        var e = this;\n        this.asyncQueue.enqueueAndForget(function () {\n          return null !== e.timerHandle ? (e.clearTimeout(), e.op().then(function (t) {\n            return e.deferred.resolve(t);\n          })) : Promise.resolve();\n        });\n      }, of.prototype.clearTimeout = function () {\n        null !== this.timerHandle && (this.removalCallback(this), clearTimeout(this.timerHandle), this.timerHandle = null);\n      }, of);\n\n      function of(t, e, n, r, i) {\n        this.asyncQueue = t, this.timerId = e, this.targetTimeMs = n, this.op = r, this.removalCallback = i, this.deferred = new hu(), this.then = this.deferred.promise.then.bind(this.deferred.promise), this.deferred.promise.catch(function (t) {});\n      }\n\n      function sf(t, e) {\n        if (Kr(\"AsyncQueue\", e + \": \" + t), Tu(t)) return new Vr(Fr.UNAVAILABLE, e + \": \" + t);\n        throw t;\n      }\n\n      function af() {\n        this.queries = new Mc(qo, Uo), this.onlineState = \"Unknown\", this.Gr = new Set();\n      }\n\n      var uf = (pf.emptySet = function (t) {\n        return new pf(t.comparator);\n      }, pf.prototype.has = function (t) {\n        return null != this.keyedMap.get(t);\n      }, pf.prototype.get = function (t) {\n        return this.keyedMap.get(t);\n      }, pf.prototype.first = function () {\n        return this.sortedSet.minKey();\n      }, pf.prototype.last = function () {\n        return this.sortedSet.maxKey();\n      }, pf.prototype.isEmpty = function () {\n        return this.sortedSet.isEmpty();\n      }, pf.prototype.indexOf = function (t) {\n        t = this.keyedMap.get(t);\n        return t ? this.sortedSet.indexOf(t) : -1;\n      }, Object.defineProperty(pf.prototype, \"size\", {\n        get: function get() {\n          return this.sortedSet.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), pf.prototype.forEach = function (n) {\n        this.sortedSet.inorderTraversal(function (t, e) {\n          return n(t), !1;\n        });\n      }, pf.prototype.add = function (t) {\n        var e = this.delete(t.key);\n        return e.copy(e.keyedMap.insert(t.key, t), e.sortedSet.insert(t, null));\n      }, pf.prototype.delete = function (t) {\n        var e = this.get(t);\n        return e ? this.copy(this.keyedMap.remove(t), this.sortedSet.remove(e)) : this;\n      }, pf.prototype.isEqual = function (t) {\n        if (!(t instanceof pf)) return !1;\n        if (this.size !== t.size) return !1;\n\n        for (var e = this.sortedSet.getIterator(), n = t.sortedSet.getIterator(); e.hasNext();) {\n          var r = e.getNext().key,\n              i = n.getNext().key;\n          if (!r.isEqual(i)) return !1;\n        }\n\n        return !0;\n      }, pf.prototype.toString = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          e.push(t.toString());\n        }), 0 === e.length ? \"DocumentSet ()\" : \"DocumentSet (\\n  \" + e.join(\"  \\n\") + \"\\n)\";\n      }, pf.prototype.copy = function (t, e) {\n        var n = new pf();\n        return n.comparator = this.comparator, n.keyedMap = t, n.sortedSet = e, n;\n      }, pf),\n          cf = (df.prototype.track = function (t) {\n        var e = t.doc.key,\n            n = this.Kr.get(e);\n        !n || 0 !== t.type && 3 === n.type ? this.Kr = this.Kr.insert(e, t) : 3 === t.type && 1 !== n.type ? this.Kr = this.Kr.insert(e, {\n          type: n.type,\n          doc: t.doc\n        }) : 2 === t.type && 2 === n.type ? this.Kr = this.Kr.insert(e, {\n          type: 2,\n          doc: t.doc\n        }) : 2 === t.type && 0 === n.type ? this.Kr = this.Kr.insert(e, {\n          type: 0,\n          doc: t.doc\n        }) : 1 === t.type && 0 === n.type ? this.Kr = this.Kr.remove(e) : 1 === t.type && 2 === n.type ? this.Kr = this.Kr.insert(e, {\n          type: 1,\n          doc: n.doc\n        }) : 0 === t.type && 1 === n.type ? this.Kr = this.Kr.insert(e, {\n          type: 2,\n          doc: t.doc\n        }) : Hr();\n      }, df.prototype.jr = function () {\n        var n = [];\n        return this.Kr.inorderTraversal(function (t, e) {\n          n.push(e);\n        }), n;\n      }, df),\n          hf = (ff.fromInitialDocuments = function (t, e, n, r) {\n        var i = [];\n        return e.forEach(function (t) {\n          i.push({\n            type: 0,\n            doc: t\n          });\n        }), new ff(t, e, uf.emptySet(e), i, n, r, !0, !1);\n      }, Object.defineProperty(ff.prototype, \"hasPendingWrites\", {\n        get: function get() {\n          return !this.mutatedKeys.isEmpty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ff.prototype.isEqual = function (t) {\n        if (!(this.fromCache === t.fromCache && this.syncStateChanged === t.syncStateChanged && this.mutatedKeys.isEqual(t.mutatedKeys) && Uo(this.query, t.query) && this.docs.isEqual(t.docs) && this.oldDocs.isEqual(t.oldDocs))) return !1;\n        var e = this.docChanges,\n            n = t.docChanges;\n        if (e.length !== n.length) return !1;\n\n        for (var r = 0; r < e.length; r++) {\n          if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc)) return !1;\n        }\n\n        return !0;\n      }, ff),\n          lf = function lf() {\n        this.Wr = void 0, this.listeners = [];\n      };\n\n      function ff(t, e, n, r, i, o, s, a) {\n        this.query = t, this.docs = e, this.oldDocs = n, this.docChanges = r, this.mutatedKeys = i, this.fromCache = o, this.syncStateChanged = s, this.excludesMetadataChanges = a;\n      }\n\n      function df() {\n        this.Kr = new Fs(Ni.comparator);\n      }\n\n      function pf(n) {\n        this.comparator = n ? function (t, e) {\n          return n(t, e) || Ni.comparator(t.key, e.key);\n        } : function (t, e) {\n          return Ni.comparator(t.key, e.key);\n        }, this.keyedMap = Ys, this.sortedSet = new Fs(this.comparator);\n      }\n\n      function yf(s, a) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r, i, o;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (e = s, n = a.query, r = !1, (i = e.queries.get(n)) || (r = !0, i = new lf()), !r) return [3, 4];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), o = i, [4, e.onListen(n)];\n\n              case 2:\n                return o.Wr = t.sent(), [3, 4];\n\n              case 3:\n                return o = t.sent(), o = sf(o, \"Initialization of query '\" + Bo(a.query) + \"' failed\"), [2, void a.onError(o)];\n\n              case 4:\n                return e.queries.set(n, i), i.listeners.push(a), a.zr(e.onlineState), i.Wr && a.Hr(i.Wr) && mf(e), [2];\n            }\n          });\n        });\n      }\n\n      function gf(s, a) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r, i, o;\n          return g(this, function (t) {\n            return e = s, n = a.query, r = !1, (i = e.queries.get(n)) && 0 <= (o = i.listeners.indexOf(a)) && (i.listeners.splice(o, 1), r = 0 === i.listeners.length), r ? [2, (e.queries.delete(n), e.onUnlisten(n))] : [2];\n          });\n        });\n      }\n\n      function mf(t) {\n        t.Gr.forEach(function (t) {\n          t.next();\n        });\n      }\n\n      var vf = (Sf.prototype.Hr = function (t) {\n        if (!this.options.includeMetadataChanges) {\n          for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {\n            var i = r[n];\n            3 !== i.type && e.push(i);\n          }\n\n          t = new hf(t.query, t.docs, t.oldDocs, e, t.mutatedKeys, t.fromCache, t.syncStateChanged, !0);\n        }\n\n        var o = !1;\n        return this.Yr ? this.Zr(t) && (this.Jr.next(t), o = !0) : this.eo(t, this.onlineState) && (this.no(t), o = !0), this.Xr = t, o;\n      }, Sf.prototype.onError = function (t) {\n        this.Jr.error(t);\n      }, Sf.prototype.zr = function (t) {\n        this.onlineState = t;\n        var e = !1;\n        return this.Xr && !this.Yr && this.eo(this.Xr, t) && (this.no(this.Xr), e = !0), e;\n      }, Sf.prototype.eo = function (t, e) {\n        return !t.fromCache || !(this.options.so && \"Offline\" !== e || t.docs.isEmpty() && \"Offline\" !== e);\n      }, Sf.prototype.Zr = function (t) {\n        if (0 < t.docChanges.length) return !0;\n        var e = this.Xr && this.Xr.hasPendingWrites !== t.hasPendingWrites;\n        return !(!t.syncStateChanged && !e) && !0 === this.options.includeMetadataChanges;\n      }, Sf.prototype.no = function (t) {\n        t = hf.fromInitialDocuments(t.query, t.docs, t.mutatedKeys, t.fromCache), this.Yr = !0, this.Jr.next(t);\n      }, Sf),\n          bf = (_f.prototype.io = function () {\n        return \"metadata\" in this.payload;\n      }, _f),\n          wf = (If.prototype.qn = function (t) {\n        return Ta(this.R, t);\n      }, If.prototype.Un = function (t) {\n        return t.metadata.exists ? Da(this.R, t.document, !1) : Gi.newNoDocument(this.qn(t.metadata.name), this.Qn(t.metadata.readTime));\n      }, If.prototype.Qn = va, If),\n          Ef = (Tf.prototype.oo = function (t) {\n        this.progress.bytesLoaded += t.byteLength;\n        var e = this.progress.documentsLoaded;\n        return t.payload.namedQuery ? this.queries.push(t.payload.namedQuery) : t.payload.documentMetadata ? (this.documents.push({\n          metadata: t.payload.documentMetadata\n        }), t.payload.documentMetadata.exists || ++e) : t.payload.document && (this.documents[this.documents.length - 1].document = t.payload.document, ++e), e !== this.progress.documentsLoaded ? (this.progress.documentsLoaded = e, Object.assign({}, this.progress)) : null;\n      }, Tf.prototype.co = function (t) {\n        for (var e = new Map(), n = new wf(this.R), r = 0, i = t; r < i.length; r++) {\n          var o = i[r];\n          if (o.metadata.queries) for (var s = n.qn(o.metadata.name), a = 0, u = o.metadata.queries; a < u.length; a++) {\n            var c = u[a],\n                h = (e.get(c) || Js()).add(s);\n            e.set(c, h);\n          }\n        }\n\n        return e;\n      }, Tf.prototype.complete = function () {\n        return y(this, void 0, void 0, function () {\n          var e, n, r, i;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, function (l, f, d, p) {\n                  return y(this, void 0, void 0, function () {\n                    var n, r, i, o, e, s, a, u, c, h;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          for (n = l, r = Js(), i = Hs, o = Xs, e = 0, s = d; e < s.length; e++) {\n                            a = s[e], u = f.qn(a.metadata.name), a.document && (r = r.add(u)), i = i.insert(u, f.Un(a)), o = o.insert(u, f.Qn(a.metadata.readTime));\n                          }\n\n                          return c = n.On.newChangeBuffer({\n                            trackRemovals: !0\n                          }), [4, gh(n, Fo(ko(ui.fromString(\"__bundle__/docs/\" + p))))];\n\n                        case 1:\n                          return h = t.sent(), [2, n.persistence.runTransaction(\"Apply bundle documents\", \"readwrite\", function (e) {\n                            return yh(e, c, i, ti.min(), o).next(function (t) {\n                              return c.apply(e), t;\n                            }).next(function (t) {\n                              return n.qe.removeMatchingKeysForTargetId(e, h.targetId).next(function () {\n                                return n.qe.addMatchingKeys(e, r, h.targetId);\n                              }).next(function () {\n                                return n.Mn.En(e, t);\n                              }).next(function () {\n                                return t;\n                              });\n                            });\n                          })];\n                      }\n                    });\n                  });\n                }(this.localStore, new wf(this.R), this.documents, this.ro.id)];\n\n              case 1:\n                e = t.sent(), n = this.co(this.documents), r = 0, i = this.queries, t.label = 2;\n\n              case 2:\n                return r < i.length ? (i = i[r], [4, function (e, i, o) {\n                  return void 0 === o && (o = Js()), y(this, void 0, void 0, function () {\n                    var n, r;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, gh(e, Fo(Wu(i.bundledQuery)))];\n\n                        case 1:\n                          return n = t.sent(), [2, (r = e).persistence.runTransaction(\"Save named query\", \"readwrite\", function (t) {\n                            var e = va(i.readTime);\n                            if (0 <= n.snapshotVersion.compareTo(e)) return r.Qe.saveNamedQuery(t, i);\n                            e = n.withResumeToken(fi.EMPTY_BYTE_STRING, e);\n                            return r.Fn = r.Fn.insert(e.targetId, e), r.qe.updateTargetData(t, e).next(function () {\n                              return r.qe.removeMatchingKeysForTargetId(t, n.targetId);\n                            }).next(function () {\n                              return r.qe.addMatchingKeys(t, o, n.targetId);\n                            }).next(function () {\n                              return r.Qe.saveNamedQuery(t, i);\n                            });\n                          })];\n                      }\n                    });\n                  });\n                }(this.localStore, i, n.get(i.name))]) : [3, 5];\n\n              case 3:\n                t.sent(), t.label = 4;\n\n              case 4:\n                return r++, [3, 2];\n\n              case 5:\n                return [2, (this.progress.taskState = \"Success\", new eh(Object.assign({}, this.progress), e))];\n            }\n          });\n        });\n      }, Tf);\n\n      function Tf(t, e, n) {\n        this.ro = t, this.localStore = e, this.R = n, this.queries = [], this.documents = [], this.progress = Af(t);\n      }\n\n      function If(t) {\n        this.R = t;\n      }\n\n      function _f(t, e) {\n        this.payload = t, this.byteLength = e;\n      }\n\n      function Sf(t, e, n) {\n        this.query = t, this.Jr = e, this.Yr = !1, this.Xr = null, this.onlineState = \"Unknown\", this.options = n || {};\n      }\n\n      function Af(t) {\n        return {\n          taskState: \"Running\",\n          documentsLoaded: 0,\n          bytesLoaded: 0,\n          totalDocuments: t.totalDocuments,\n          totalBytes: t.totalBytes\n        };\n      }\n\n      var Nf = function Nf(t) {\n        this.key = t;\n      },\n          Df = function Df(t) {\n        this.key = t;\n      },\n          Cf = (Object.defineProperty(Lf.prototype, \"wo\", {\n        get: function get() {\n          return this.uo;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Lf.prototype._o = function (t, e) {\n        var s = this,\n            a = e ? e.mo : new cf(),\n            u = (e || this).fo,\n            c = (e || this).mutatedKeys,\n            h = u,\n            l = !1,\n            f = Ro(this.query) && u.size === this.query.limit ? u.last() : null,\n            d = xo(this.query) && u.size === this.query.limit ? u.first() : null;\n        if (t.inorderTraversal(function (t, e) {\n          var n = u.get(t),\n              r = jo(s.query, e) ? e : null,\n              i = !!n && s.mutatedKeys.has(n.key),\n              o = !!r && (r.hasLocalMutations || s.mutatedKeys.has(r.key) && r.hasCommittedMutations),\n              e = !1;\n          n && r ? n.data.isEqual(r.data) ? i !== o && (a.track({\n            type: 3,\n            doc: r\n          }), e = !0) : s.yo(n, r) || (a.track({\n            type: 2,\n            doc: r\n          }), e = !0, (f && 0 < s.lo(r, f) || d && s.lo(r, d) < 0) && (l = !0)) : !n && r ? (a.track({\n            type: 0,\n            doc: r\n          }), e = !0) : n && !r && (a.track({\n            type: 1,\n            doc: n\n          }), e = !0, (f || d) && (l = !0)), e && (c = r ? (h = h.add(r), o ? c.add(t) : c.delete(t)) : (h = h.delete(t), c.delete(t)));\n        }), Ro(this.query) || xo(this.query)) for (; h.size > this.query.limit;) {\n          var n = Ro(this.query) ? h.last() : h.first(),\n              h = h.delete(n.key),\n              c = c.delete(n.key);\n          a.track({\n            type: 1,\n            doc: n\n          });\n        }\n        return {\n          fo: h,\n          mo: a,\n          Nn: l,\n          mutatedKeys: c\n        };\n      }, Lf.prototype.yo = function (t, e) {\n        return t.hasLocalMutations && e.hasCommittedMutations && !e.hasLocalMutations;\n      }, Lf.prototype.applyChanges = function (t, e, n) {\n        var o = this,\n            r = this.fo;\n        this.fo = t.fo, this.mutatedKeys = t.mutatedKeys;\n        var i = t.mo.jr();\n        i.sort(function (t, e) {\n          return r = t.type, i = e.type, n(r) - n(i) || o.lo(t.doc, e.doc);\n\n          function n(t) {\n            switch (t) {\n              case 0:\n                return 1;\n\n              case 2:\n              case 3:\n                return 2;\n\n              case 1:\n                return 0;\n\n              default:\n                return Hr();\n            }\n          }\n\n          var r, i;\n        }), this.po(n);\n        var s = e ? this.Eo() : [],\n            n = 0 === this.ho.size && this.current ? 1 : 0,\n            e = n !== this.ao;\n        return this.ao = n, 0 !== i.length || e ? {\n          snapshot: new hf(this.query, t.fo, r, i, t.mutatedKeys, 0 == n, e, !1),\n          To: s\n        } : {\n          To: s\n        };\n      }, Lf.prototype.zr = function (t) {\n        return this.current && \"Offline\" === t ? (this.current = !1, this.applyChanges({\n          fo: this.fo,\n          mo: new cf(),\n          mutatedKeys: this.mutatedKeys,\n          Nn: !1\n        }, !1)) : {\n          To: []\n        };\n      }, Lf.prototype.Io = function (t) {\n        return !this.uo.has(t) && !!this.fo.has(t) && !this.fo.get(t).hasLocalMutations;\n      }, Lf.prototype.po = function (t) {\n        var e = this;\n        t && (t.addedDocuments.forEach(function (t) {\n          return e.uo = e.uo.add(t);\n        }), t.modifiedDocuments.forEach(function (t) {}), t.removedDocuments.forEach(function (t) {\n          return e.uo = e.uo.delete(t);\n        }), this.current = t.current);\n      }, Lf.prototype.Eo = function () {\n        var e = this;\n        if (!this.current) return [];\n        var n = this.ho;\n        this.ho = Js(), this.fo.forEach(function (t) {\n          e.Io(t.key) && (e.ho = e.ho.add(t.key));\n        });\n        var r = [];\n        return n.forEach(function (t) {\n          e.ho.has(t) || r.push(new Df(t));\n        }), this.ho.forEach(function (t) {\n          n.has(t) || r.push(new Nf(t));\n        }), r;\n      }, Lf.prototype.Ao = function (t) {\n        this.uo = t.Bn, this.ho = Js();\n        t = this._o(t.documents);\n        return this.applyChanges(t, !0);\n      }, Lf.prototype.Ro = function () {\n        return hf.fromInitialDocuments(this.query, this.fo, this.mutatedKeys, 0 === this.ao);\n      }, Lf),\n          kf = function kf(t, e, n) {\n        this.query = t, this.targetId = e, this.view = n;\n      },\n          Rf = function Rf(t) {\n        this.key = t, this.bo = !1;\n      },\n          xf = (Object.defineProperty(Of.prototype, \"isPrimaryClient\", {\n        get: function get() {\n          return !0 === this.$o;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Of);\n\n      function Of(t, e, n, r, i, o) {\n        this.localStore = t, this.remoteStore = e, this.eventManager = n, this.sharedClientState = r, this.currentUser = i, this.maxConcurrentLimboResolutions = o, this.vo = {}, this.Po = new Mc(qo, Uo), this.Vo = new Map(), this.So = new Set(), this.Do = new Fs(Ni.comparator), this.Co = new Map(), this.No = new Sh(), this.xo = {}, this.Fo = new Map(), this.ko = mc.Yt(), this.onlineState = \"Unknown\", this.$o = void 0;\n      }\n\n      function Lf(t, e) {\n        this.query = t, this.uo = e, this.ao = null, this.current = !1, this.ho = Js(), this.mutatedKeys = Js(), this.lo = Ko(t), this.fo = new uf(this.lo);\n      }\n\n      function Pf(i, o, s, a) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return i.Oo = function (t, e, n) {\n                  return function (r, i, o, s) {\n                    return y(this, void 0, void 0, function () {\n                      var e, n;\n                      return g(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return (e = i.view._o(o)).Nn ? [4, vh(r.localStore, i.query, !1).then(function (t) {\n                              t = t.documents;\n                              return i.view._o(t, e);\n                            })] : [3, 2];\n\n                          case 1:\n                            e = t.sent(), t.label = 2;\n\n                          case 2:\n                            return n = s && s.targetChanges.get(i.targetId), n = i.view.applyChanges(e, r.isPrimaryClient, n), [2, (Qf(r, i.targetId, n.To), n.snapshot)];\n                        }\n                      });\n                    });\n                  }(i, t, e, n);\n                }, [4, vh(i.localStore, o, !0)];\n\n              case 1:\n                return n = t.sent(), r = new Cf(o, n.Bn), e = r._o(n.documents), n = ea.createSynthesizedTargetChangeForCurrentChange(s, a && \"Offline\" !== i.onlineState), n = r.applyChanges(e, i.isPrimaryClient, n), Qf(i, s, n.To), r = new kf(o, s, r), [2, (i.Po.set(o, r), i.Vo.has(s) ? i.Vo.get(s).push(o) : i.Vo.set(s, [o]), n.snapshot)];\n            }\n          });\n        });\n      }\n\n      function Mf(f, d, p) {\n        return y(this, void 0, void 0, function () {\n          var s, l;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                l = td(f), t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 5,, 6]), [4, (i = l.localStore, a = d, c = i, h = Zr.now(), o = a.reduce(function (t, e) {\n                  return t.add(e.key);\n                }, Js()), c.persistence.runTransaction(\"Locally write mutations\", \"readwrite\", function (s) {\n                  return c.Mn.pn(s, o).next(function (t) {\n                    u = t;\n\n                    for (var e = [], n = 0, r = a; n < r.length; n++) {\n                      var i = r[n],\n                          o = function (t, e) {\n                        for (var n = null, r = 0, i = t.fieldTransforms; r < i.length; r++) {\n                          var o = i[r],\n                              s = e.data.field(o.field),\n                              s = zo(o.transform, s || null);\n                          null != s && (n = null == n ? ji.empty() : n).set(o.field, s);\n                        }\n\n                        return n || null;\n                      }(i, u.get(i.key));\n\n                      null != o && e.push(new Es(i.key, o, function s(t) {\n                        var a = [];\n                        return ii(t.fields, function (t, e) {\n                          var n = new hi([t]);\n                          if (qi(e)) {\n                            if (0 === (e = s(e.mapValue).fields).length) a.push(n);else for (var r = 0, i = e; r < i.length; r++) {\n                              var o = i[r];\n                              a.push(n.child(o));\n                            }\n                          } else a.push(n);\n                        }), new li(a);\n                      }(o.value.mapValue), fs.exists(!0)));\n                    }\n\n                    return c._n.addMutationBatch(s, h, e, a);\n                  });\n                }).then(function (t) {\n                  return t.applyToLocalDocumentSet(u), {\n                    batchId: t.batchId,\n                    changes: u\n                  };\n                }))];\n\n              case 2:\n                return s = t.sent(), l.sharedClientState.addPendingMutation(s.batchId), e = l, n = s.batchId, r = p, i = (i = (i = e.xo[e.currentUser.toKey()]) || new Fs(Xr)).insert(n, r), e.xo[e.currentUser.toKey()] = i, [4, zf(l, s.changes)];\n\n              case 3:\n                return t.sent(), [4, $l(l.remoteStore)];\n\n              case 4:\n                return t.sent(), [3, 6];\n\n              case 5:\n                return l = t.sent(), l = sf(l, \"Failed to persist write\"), p.reject(l), [3, 6];\n\n              case 6:\n                return [2];\n            }\n\n            var e, n, r, i, a, u, c, h, o;\n          });\n        });\n      }\n\n      function Ff(r, i) {\n        return y(this, void 0, void 0, function () {\n          var n, e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                n = r, t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 6]), [4, ph(n.localStore, i)];\n\n              case 2:\n                return e = t.sent(), i.targetChanges.forEach(function (t, e) {\n                  e = n.Co.get(e);\n                  e && (zr(t.addedDocuments.size + t.modifiedDocuments.size + t.removedDocuments.size <= 1), 0 < t.addedDocuments.size ? e.bo = !0 : 0 < t.modifiedDocuments.size ? zr(e.bo) : 0 < t.removedDocuments.size && (zr(e.bo), e.bo = !1));\n                }), [4, zf(n, e, i)];\n\n              case 3:\n                return t.sent(), [3, 6];\n\n              case 4:\n                return [4, _c(t.sent())];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function Vf(t, n, e) {\n        var r,\n            t = t;\n        (t.isPrimaryClient && 0 === e || !t.isPrimaryClient && 1 === e) && (r = [], t.Po.forEach(function (t, e) {\n          e = e.view.zr(n);\n          e.snapshot && r.push(e.snapshot);\n        }), function (t, i) {\n          t.onlineState = i;\n          var o = !1;\n          t.queries.forEach(function (t, e) {\n            for (var n = 0, r = e.listeners; n < r.length; n++) {\n              r[n].zr(i) && (o = !0);\n            }\n          }), o && mf(t);\n        }(t.eventManager, n), r.length && t.vo._r(r), t.onlineState = n, t.isPrimaryClient && t.sharedClientState.setOnlineState(n));\n      }\n\n      function Uf(s, a, u) {\n        return y(this, void 0, void 0, function () {\n          var n, o;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                n = s, t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 6]), [4, (e = n.localStore, r = a, (i = e).persistence.runTransaction(\"Reject batch\", \"readwrite-primary\", function (e) {\n                  var n;\n                  return i._n.lookupMutationBatch(e, r).next(function (t) {\n                    return zr(null !== t), n = t.keys(), i._n.removeMutationBatch(e, t);\n                  }).next(function () {\n                    return i._n.performConsistencyCheck(e);\n                  }).next(function () {\n                    return i.Mn.pn(e, n);\n                  });\n                }))];\n\n              case 2:\n                return o = t.sent(), jf(n, a, u), Bf(n, a), n.sharedClientState.updateMutationState(a, \"rejected\", u), [4, zf(n, o)];\n\n              case 3:\n                return t.sent(), [3, 6];\n\n              case 4:\n                return [4, _c(t.sent())];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [2];\n            }\n\n            var e, r, i;\n          });\n        });\n      }\n\n      function qf(o, s) {\n        return y(this, void 0, void 0, function () {\n          var n, r, i;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                Hl((n = o).remoteStore) || jr(\"SyncEngine\", \"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.\"), t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), [4, (e = n.localStore).persistence.runTransaction(\"Get highest unacknowledged batch id\", \"readonly\", function (t) {\n                  return e._n.getHighestUnacknowledgedBatchId(t);\n                })];\n\n              case 2:\n                return -1 === (r = t.sent()) ? [2, void s.resolve()] : ((i = n.Fo.get(r) || []).push(s), n.Fo.set(r, i), [3, 4]);\n\n              case 3:\n                return i = t.sent(), i = sf(i, \"Initialization of waitForPendingWrites() operation failed\"), s.reject(i), [3, 4];\n\n              case 4:\n                return [2];\n            }\n\n            var e;\n          });\n        });\n      }\n\n      function Bf(t, e) {\n        (t.Fo.get(e) || []).forEach(function (t) {\n          t.resolve();\n        }), t.Fo.delete(e);\n      }\n\n      function jf(t, e, n) {\n        var r = t,\n            i = r.xo[r.currentUser.toKey()];\n        i && ((t = i.get(e)) && (n ? t.reject(n) : t.resolve(), i = i.remove(e)), r.xo[r.currentUser.toKey()] = i);\n      }\n\n      function Kf(e, t, n) {\n        void 0 === n && (n = null), e.sharedClientState.removeLocalQueryTarget(t);\n\n        for (var r = 0, i = e.Vo.get(t); r < i.length; r++) {\n          var o = i[r];\n          e.Po.delete(o), n && e.vo.Mo(o, n);\n        }\n\n        e.Vo.delete(t), e.isPrimaryClient && e.No.Zn(t).forEach(function (t) {\n          e.No.containsKey(t) || Gf(e, t);\n        });\n      }\n\n      function Gf(t, e) {\n        t.So.delete(e.path.canonicalString());\n        var n = t.Do.get(e);\n        null !== n && (Bl(t.remoteStore, n), t.Do = t.Do.remove(e), t.Co.delete(n), Hf(t));\n      }\n\n      function Qf(t, e, n) {\n        for (var r, i, o, s = 0, a = n; s < a.length; s++) {\n          var u = a[s];\n          u instanceof Nf ? (t.No.addReference(u.key, e), r = t, o = void 0, i = (o = (i = u).key).path.canonicalString(), r.Do.get(o) || r.So.has(i) || (jr(\"SyncEngine\", \"New document in limbo: \" + o), r.So.add(i), Hf(r))) : u instanceof Df ? (jr(\"SyncEngine\", \"Document no longer in limbo: \" + u.key), t.No.removeReference(u.key, e), t.No.containsKey(u.key) || Gf(t, u.key)) : Hr();\n        }\n      }\n\n      function Hf(t) {\n        for (; 0 < t.So.size && t.Do.size < t.maxConcurrentLimboResolutions;) {\n          var e = t.So.values().next().value;\n          t.So.delete(e);\n          var n = new Ni(ui.fromString(e)),\n              e = t.ko.next();\n          t.Co.set(e, new Rf(n)), t.Do = t.Do.insert(n, e), ql(t.remoteStore, new Lu(Fo(ko(n.path)), e, 2, Lr.o));\n        }\n      }\n\n      function zf(e, s, a) {\n        return y(this, void 0, void 0, function () {\n          var n, r, i, o;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return r = [], i = [], o = [], (n = e).Po.isEmpty() ? [3, 3] : (n.Po.forEach(function (t, e) {\n                  o.push(n.Oo(e, s, a).then(function (t) {\n                    t && (n.isPrimaryClient && n.sharedClientState.updateQueryState(e.targetId, t.fromCache ? \"not-current\" : \"current\"), r.push(t), t = rh.Pn(e.targetId, t), i.push(t));\n                  }));\n                }), [4, Promise.all(o)]);\n\n              case 1:\n                return t.sent(), n.vo._r(r), [4, function (u, c) {\n                  return y(this, void 0, void 0, function () {\n                    var r, e, n, i, o, s, a;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          r = u, t.label = 1;\n\n                        case 1:\n                          return t.trys.push([1, 3,, 4]), [4, r.persistence.runTransaction(\"notifyLocalViewChanges\", \"readwrite\", function (n) {\n                            return lu.forEach(c, function (e) {\n                              return lu.forEach(e.bn, function (t) {\n                                return r.persistence.referenceDelegate.addReference(n, e.targetId, t);\n                              }).next(function () {\n                                return lu.forEach(e.vn, function (t) {\n                                  return r.persistence.referenceDelegate.removeReference(n, e.targetId, t);\n                                });\n                              });\n                            });\n                          })];\n\n                        case 2:\n                          return t.sent(), [3, 4];\n\n                        case 3:\n                          if (!Tu(e = t.sent())) throw e;\n                          return jr(\"LocalStore\", \"Failed to update sequence numbers: \" + e), [3, 4];\n\n                        case 4:\n                          for (n = 0, i = c; n < i.length; n++) {\n                            a = i[n], o = a.targetId, a.fromCache || (s = r.Fn.get(o), a = s.snapshotVersion, a = s.withLastLimboFreeSnapshotVersion(a), r.Fn = r.Fn.insert(o, a));\n                          }\n\n                          return [2];\n                      }\n                    });\n                  });\n                }(n.localStore, i)];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function Wf(i, o) {\n        return y(this, void 0, void 0, function () {\n          var n, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return (n = i).currentUser.isEqual(o) ? [3, 3] : (jr(\"SyncEngine\", \"User change. New user:\", o.toKey()), [4, lh(n.localStore, o)]);\n\n              case 1:\n                return r = t.sent(), n.currentUser = o, (e = n).Fo.forEach(function (t) {\n                  t.forEach(function (t) {\n                    t.reject(new Vr(Fr.CANCELLED, \"'waitForPendingWrites' promise is rejected due to a user change.\"));\n                  });\n                }), e.Fo.clear(), n.sharedClientState.handleUserChange(o, r.removedBatchIds, r.addedBatchIds), [4, zf(n, r.Ln)];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [2];\n            }\n\n            var e;\n          });\n        });\n      }\n\n      function Yf(a, u, c, h) {\n        return y(this, void 0, void 0, function () {\n          var o, s;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, (e = (o = a).localStore, n = u, i = (r = e)._n, r.persistence.runTransaction(\"Lookup mutation documents\", \"readonly\", function (e) {\n                  return i.jt(e, n).next(function (t) {\n                    return t ? r.Mn.pn(e, t) : lu.resolve(null);\n                  });\n                }))];\n\n              case 1:\n                return null === (s = t.sent()) ? [3, 6] : \"pending\" !== c ? [3, 3] : [4, $l(o.remoteStore)];\n\n              case 2:\n                return t.sent(), [3, 4];\n\n              case 3:\n                \"acknowledged\" === c || \"rejected\" === c ? (jf(o, u, h || null), Bf(o, u), o.localStore._n.Gt(u)) : Hr(), t.label = 4;\n\n              case 4:\n                return [4, zf(o, s)];\n\n              case 5:\n                return t.sent(), [3, 7];\n\n              case 6:\n                jr(\"SyncEngine\", \"Cannot apply mutation batch with id: \" + u), t.label = 7;\n\n              case 7:\n                return [2];\n            }\n\n            var e, n, r, i;\n          });\n        });\n      }\n\n      function Xf(h, l) {\n        return y(this, void 0, void 0, function () {\n          var r, e, i, o, s, a, u, c;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return Zf(r = h), td(r), !0 !== l || !0 === r.$o ? [3, 3] : (e = r.sharedClientState.getAllActiveQueryTargets(), [4, $f(r, e.toArray())]);\n\n              case 1:\n                return i = t.sent(), r.$o = !0, [4, tf(r.remoteStore, !0)];\n\n              case 2:\n                for (t.sent(), o = 0, s = i; o < s.length; o++) {\n                  a = s[o], ql(r.remoteStore, a);\n                }\n\n                return [3, 7];\n\n              case 3:\n                return !1 !== l || !1 === r.$o ? [3, 7] : (u = [], c = Promise.resolve(), r.Vo.forEach(function (t, e) {\n                  r.sharedClientState.isLocalQueryTarget(e) ? u.push(e) : c = c.then(function () {\n                    return Kf(r, e), mh(r.localStore, e, !0);\n                  }), Bl(r.remoteStore, e);\n                }), [4, c]);\n\n              case 4:\n                return t.sent(), [4, $f(r, u)];\n\n              case 5:\n                return t.sent(), (n = r).Co.forEach(function (t, e) {\n                  Bl(n.remoteStore, e);\n                }), n.No.ts(), n.Co = new Map(), n.Do = new Fs(Ni.comparator), r.$o = !1, [4, tf(r.remoteStore, !1)];\n\n              case 6:\n                t.sent(), t.label = 7;\n\n              case 7:\n                return [2];\n            }\n\n            var n;\n          });\n        });\n      }\n\n      function $f(d, p) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r, i, o, s, a, u, c, h, l, f;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = d, n = [], r = [], i = 0, o = p, t.label = 1;\n\n              case 1:\n                return i < o.length ? (s = o[i], a = void 0, (u = e.Vo.get(s)) && 0 !== u.length ? [4, gh(e.localStore, Fo(u[0]))] : [3, 7]) : [3, 13];\n\n              case 2:\n                a = t.sent(), c = 0, h = u, t.label = 3;\n\n              case 3:\n                return c < h.length ? (l = h[c], l = e.Po.get(l), [4, function (r, i) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, vh((e = r).localStore, i.query, !0)];\n\n                        case 1:\n                          return n = t.sent(), n = i.view.Ao(n), [2, (e.isPrimaryClient && Qf(e, i.targetId, n.To), n)];\n                      }\n                    });\n                  });\n                }(e, l)]) : [3, 6];\n\n              case 4:\n                (l = t.sent()).snapshot && r.push(l.snapshot), t.label = 5;\n\n              case 5:\n                return c++, [3, 3];\n\n              case 6:\n                return [3, 11];\n\n              case 7:\n                return [4, bh(e.localStore, s)];\n\n              case 8:\n                return f = t.sent(), [4, gh(e.localStore, f)];\n\n              case 9:\n                return a = t.sent(), [4, Pf(e, Jf(f), s, !1)];\n\n              case 10:\n                t.sent(), t.label = 11;\n\n              case 11:\n                n.push(a), t.label = 12;\n\n              case 12:\n                return i++, [3, 1];\n\n              case 13:\n                return [2, (e.vo._r(r), n)];\n            }\n          });\n        });\n      }\n\n      function Jf(t) {\n        return Co(t.path, t.collectionGroup, t.orderBy, t.filters, t.limit, \"F\", t.startAt, t.endAt);\n      }\n\n      function Zf(t) {\n        return t.remoteStore.remoteSyncer.applyRemoteEvent = Ff.bind(null, t), t.remoteStore.remoteSyncer.getRemoteKeysForTarget = function (t, e) {\n          var n = t;\n          if ((t = n.Co.get(e)) && t.bo) return Js().add(t.key);\n          var r = Js();\n          if (!(e = n.Vo.get(e))) return r;\n\n          for (var i = 0, o = e; i < o.length; i++) {\n            var s = o[i],\n                s = n.Po.get(s),\n                r = r.unionWith(s.view.wo);\n          }\n\n          return r;\n        }.bind(null, t), t.remoteStore.remoteSyncer.rejectListen = function (o, s, a) {\n          return y(this, void 0, void 0, function () {\n            var e, n, r, i;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return (e = o).sharedClientState.updateQueryState(s, \"rejected\", a), i = e.Co.get(s), (n = i && i.key) ? (r = (r = new Fs(Ni.comparator)).insert(n, Gi.newNoDocument(n, ti.min())), i = Js().add(n), i = new ta(ti.min(), new Map(), new Gs(Xr), r, i), [4, Ff(e, i)]) : [3, 2];\n\n                case 1:\n                  return t.sent(), e.Do = e.Do.remove(n), e.Co.delete(s), Hf(e), [3, 4];\n\n                case 2:\n                  return [4, mh(e.localStore, s, !1).then(function () {\n                    return Kf(e, s, a);\n                  }).catch(_c)];\n\n                case 3:\n                  t.sent(), t.label = 4;\n\n                case 4:\n                  return [2];\n              }\n            });\n          });\n        }.bind(null, t), t.vo._r = function (t, e) {\n          for (var n = t, r = !1, i = 0, o = e; i < o.length; i++) {\n            var s = o[i],\n                a = s.query,\n                a = n.queries.get(a);\n\n            if (a) {\n              for (var u = 0, c = a.listeners; u < c.length; u++) {\n                c[u].Hr(s) && (r = !0);\n              }\n\n              a.Wr = s;\n            }\n          }\n\n          r && mf(n);\n        }.bind(null, t.eventManager), t.vo.Mo = function (t, e, n) {\n          var r = t;\n          if (t = r.queries.get(e)) for (var i = 0, o = t.listeners; i < o.length; i++) {\n            o[i].onError(n);\n          }\n          r.queries.delete(e);\n        }.bind(null, t.eventManager), t;\n      }\n\n      function td(t) {\n        return t.remoteStore.remoteSyncer.applySuccessfulWrite = function (i, o) {\n          return y(this, void 0, void 0, function () {\n            var e, n, r;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  e = i, n = o.batch.batchId, t.label = 1;\n\n                case 1:\n                  return t.trys.push([1, 4,, 6]), [4, fh(e.localStore, o)];\n\n                case 2:\n                  return r = t.sent(), jf(e, n, null), Bf(e, n), e.sharedClientState.updateMutationState(n, \"acknowledged\"), [4, zf(e, r)];\n\n                case 3:\n                  return t.sent(), [3, 6];\n\n                case 4:\n                  return [4, _c(t.sent())];\n\n                case 5:\n                  return t.sent(), [3, 6];\n\n                case 6:\n                  return [2];\n              }\n            });\n          });\n        }.bind(null, t), t.remoteStore.remoteSyncer.rejectFailedWrite = Uf.bind(null, t), t;\n      }\n\n      function ed(t, e, n) {\n        var r = t;\n        !function (f, d, p) {\n          return y(this, void 0, void 0, function () {\n            var a, u, c, h, l;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return t.trys.push([0, 14,, 15]), [4, d.getMetadata()];\n\n                case 1:\n                  return a = t.sent(), [4, (r = f.localStore, o = r, s = va((i = a).createTime), o.persistence.runTransaction(\"hasNewerBundle\", \"readonly\", function (t) {\n                    return o.Qe.getBundleMetadata(t, i.id);\n                  }).then(function (t) {\n                    return !!t && 0 <= t.createTime.compareTo(s);\n                  }))];\n\n                case 2:\n                  return t.sent() ? [4, d.close()] : [3, 4];\n\n                case 3:\n                  return [2, (t.sent(), void p._completeWith({\n                    taskState: \"Success\",\n                    documentsLoaded: a.totalDocuments,\n                    bytesLoaded: a.totalBytes,\n                    totalDocuments: a.totalDocuments,\n                    totalBytes: a.totalBytes\n                  }))];\n\n                case 4:\n                  return p._updateProgress(Af(a)), u = new Ef(a, f.localStore, d.R), [4, d.Lo()];\n\n                case 5:\n                  c = t.sent(), t.label = 6;\n\n                case 6:\n                  return c ? [4, u.oo(c)] : [3, 10];\n\n                case 7:\n                  return (h = t.sent()) && p._updateProgress(h), [4, d.Lo()];\n\n                case 8:\n                  c = t.sent(), t.label = 9;\n\n                case 9:\n                  return [3, 6];\n\n                case 10:\n                  return [4, u.complete()];\n\n                case 11:\n                  return l = t.sent(), [4, zf(f, l.wn, void 0)];\n\n                case 12:\n                  return t.sent(), [4, (r = f.localStore, e = a, (n = r).persistence.runTransaction(\"Save bundle\", \"readwrite\", function (t) {\n                    return n.Qe.saveBundleMetadata(t, e);\n                  }))];\n\n                case 13:\n                  return t.sent(), p._completeWith(l.progress), [3, 15];\n\n                case 14:\n                  return Gr(\"SyncEngine\", \"Loading bundle failed with \" + (l = t.sent())), p._failWith(l), [3, 15];\n\n                case 15:\n                  return [2];\n              }\n\n              var e, n, r, i, o, s;\n            });\n          });\n        }(r, e, n).then(function () {\n          r.sharedClientState.notifyBundleLoaded();\n        });\n      }\n\n      var nd,\n          rd,\n          id = (ld.prototype.initialize = function (e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.R = Tl(e.databaseInfo.databaseId), this.sharedClientState = this.Bo(e), this.persistence = this.qo(e), [4, this.persistence.start()];\n\n              case 1:\n                return t.sent(), this.gcScheduler = this.Uo(e), this.localStore = this.Qo(e), [2];\n            }\n          });\n        });\n      }, ld.prototype.Uo = function (t) {\n        return null;\n      }, ld.prototype.Qo = function (t) {\n        return hh(this.persistence, new ih(), t.initialUser, this.R);\n      }, ld.prototype.qo = function (t) {\n        return new Rh(Oh.bs, this.R);\n      }, ld.prototype.Bo = function (t) {\n        return new nl();\n      }, ld.prototype.terminate = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.gcScheduler && this.gcScheduler.stop(), [4, this.sharedClientState.shutdown()];\n\n              case 1:\n                return t.sent(), [4, this.persistence.shutdown()];\n\n              case 2:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, ld),\n          od = (n(hd, rd = id), hd.prototype.initialize = function (e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, rd.prototype.initialize.call(this, e)];\n\n              case 1:\n                return t.sent(), [4, Eh(this.localStore)];\n\n              case 2:\n                return t.sent(), [4, this.Ko.initialize(this, e)];\n\n              case 3:\n                return t.sent(), [4, td(this.Ko.syncEngine)];\n\n              case 4:\n                return t.sent(), [4, $l(this.Ko.remoteStore)];\n\n              case 5:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, hd.prototype.Qo = function (t) {\n        return hh(this.persistence, new ih(), t.initialUser, this.R);\n      }, hd.prototype.Uo = function (t) {\n        var e = this.persistence.referenceDelegate.garbageCollector;\n        return new Nc(e, t.asyncQueue);\n      }, hd.prototype.qo = function (t) {\n        var e = th(t.databaseInfo.databaseId, t.databaseInfo.persistenceKey),\n            n = void 0 !== this.cacheSizeBytes ? ac.withCacheSize(this.cacheSizeBytes) : ac.DEFAULT;\n        return new Xc(this.synchronizeTabs, e, t.clientId, n, t.asyncQueue, wl(), El(), this.R, this.sharedClientState, !!this.forceOwnership);\n      }, hd.prototype.Bo = function (t) {\n        return new nl();\n      }, hd),\n          sd = (n(cd, nd = od), cd.prototype.initialize = function (r) {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, nd.prototype.initialize.call(this, r)];\n\n              case 1:\n                return t.sent(), e = this.Ko.syncEngine, this.sharedClientState instanceof el ? (this.sharedClientState.syncEngine = {\n                  ui: Yf.bind(null, e),\n                  ai: function (i, o, s, a) {\n                    return y(this, void 0, void 0, function () {\n                      var e, n, r;\n                      return g(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return (e = i).$o ? (jr(\"SyncEngine\", \"Ignoring unexpected query state notification.\"), [3, 8]) : [3, 1];\n\n                          case 1:\n                            if (!e.Vo.has(o)) return [3, 8];\n\n                            switch (s) {\n                              case \"current\":\n                              case \"not-current\":\n                                return [3, 2];\n\n                              case \"rejected\":\n                                return [3, 5];\n                            }\n\n                            return [3, 7];\n\n                          case 2:\n                            return [4, wh(e.localStore)];\n\n                          case 3:\n                            return n = t.sent(), r = ta.createSynthesizedRemoteEventForCurrentChange(o, \"current\" === s), [4, zf(e, n, r)];\n\n                          case 4:\n                            return t.sent(), [3, 8];\n\n                          case 5:\n                            return [4, mh(e.localStore, o, !0)];\n\n                          case 6:\n                            return t.sent(), Kf(e, o, a), [3, 8];\n\n                          case 7:\n                            Hr(), t.label = 8;\n\n                          case 8:\n                            return [2];\n                        }\n                      });\n                    });\n                  }.bind(null, e),\n                  hi: function (c, h, l) {\n                    return y(this, void 0, void 0, function () {\n                      var n, e, r, i, o, s, a, u;\n                      return g(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            if (!(n = Zf(c)).$o) return [3, 10];\n                            e = 0, r = h, t.label = 1;\n\n                          case 1:\n                            return e < r.length ? (r = r[e], n.Vo.has(r) ? (jr(\"SyncEngine\", \"Adding an already active target \" + r), [3, 5]) : [4, bh(n.localStore, r)]) : [3, 6];\n\n                          case 2:\n                            return i = t.sent(), [4, gh(n.localStore, i)];\n\n                          case 3:\n                            return o = t.sent(), [4, Pf(n, Jf(i), o.targetId, !1)];\n\n                          case 4:\n                            t.sent(), ql(n.remoteStore, o), t.label = 5;\n\n                          case 5:\n                            return e++, [3, 1];\n\n                          case 6:\n                            s = function s(e) {\n                              return g(this, function (t) {\n                                switch (t.label) {\n                                  case 0:\n                                    return n.Vo.has(e) ? [4, mh(n.localStore, e, !1).then(function () {\n                                      Bl(n.remoteStore, e), Kf(n, e);\n                                    }).catch(_c)] : [3, 2];\n\n                                  case 1:\n                                    t.sent(), t.label = 2;\n\n                                  case 2:\n                                    return [2];\n                                }\n                              });\n                            }, a = 0, u = l, t.label = 7;\n\n                          case 7:\n                            return a < u.length ? (u = u[a], [5, s(u)]) : [3, 10];\n\n                          case 8:\n                            t.sent(), t.label = 9;\n\n                          case 9:\n                            return a++, [3, 7];\n\n                          case 10:\n                            return [2];\n                        }\n                      });\n                    });\n                  }.bind(null, e),\n                  fn: function (t) {\n                    return t.localStore.persistence.fn();\n                  }.bind(null, e),\n                  ci: function (n) {\n                    return y(this, void 0, void 0, function () {\n                      var e;\n                      return g(this, function (t) {\n                        return [2, wh((e = n).localStore).then(function (t) {\n                          return zf(e, t);\n                        })];\n                      });\n                    });\n                  }.bind(null, e)\n                }, [4, this.sharedClientState.start()]) : [3, 3];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [4, this.persistence.He(function (e) {\n                  return y(n, void 0, void 0, function () {\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, Xf(this.Ko.syncEngine, e)];\n\n                        case 1:\n                          return t.sent(), this.gcScheduler && (e && !this.gcScheduler.started ? this.gcScheduler.start(this.localStore) : e || this.gcScheduler.stop()), [2];\n                      }\n                    });\n                  });\n                })];\n\n              case 4:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, cd.prototype.Bo = function (t) {\n        var e = wl();\n        if (!el.yt(e)) throw new Vr(Fr.UNIMPLEMENTED, \"IndexedDB persistence is only available on platforms that support LocalStorage.\");\n        var n = th(t.databaseInfo.databaseId, t.databaseInfo.persistenceKey);\n        return new el(e, t.asyncQueue, n, t.clientId, t.initialUser);\n      }, cd),\n          ad = (ud.prototype.initialize = function (n, r) {\n        return y(this, void 0, void 0, function () {\n          var e = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.localStore ? [3, 2] : (this.localStore = n.localStore, this.sharedClientState = n.sharedClientState, this.datastore = this.createDatastore(r), this.remoteStore = this.createRemoteStore(r), this.eventManager = this.createEventManager(r), this.syncEngine = this.createSyncEngine(r, !n.synchronizeTabs), this.sharedClientState.onlineStateHandler = function (t) {\n                  return Vf(e.syncEngine, t, 1);\n                }, this.remoteStore.remoteSyncer.handleCredentialChange = Wf.bind(null, this.syncEngine), [4, tf(this.remoteStore, this.syncEngine.isPrimaryClient)]);\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, ud.prototype.createEventManager = function (t) {\n        return new af();\n      }, ud.prototype.createDatastore = function (t) {\n        var e = Tl(t.databaseInfo.databaseId),\n            n = (n = t.databaseInfo, new al(n));\n        return t = t.credentials, new kl(t, n, e);\n      }, ud.prototype.createRemoteStore = function (t) {\n        var e = this,\n            n = this.localStore,\n            r = this.datastore,\n            i = t.asyncQueue,\n            o = function o(t) {\n          return Vf(e.syncEngine, t, 0);\n        },\n            t = new (il.yt() ? il : rl)();\n\n        return new Il(n, r, i, o, t);\n      }, ud.prototype.createSyncEngine = function (t, e) {\n        return function (t, e, n, r, i, o, s) {\n          o = new xf(t, e, n, r, i, o);\n          return s && (o.$o = !0), o;\n        }(this.localStore, this.remoteStore, this.eventManager, this.sharedClientState, t.initialUser, t.maxConcurrentLimboResolutions, e);\n      }, ud.prototype.terminate = function () {\n        return function (n) {\n          return y(this, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e = n, jr(\"RemoteStore\", \"RemoteStore shutting down.\"), e.Or.add(5), [4, Ul(e)];\n\n                case 1:\n                  return t.sent(), e.Lr.shutdown(), e.Br.set(\"Unknown\"), [2];\n              }\n            });\n          });\n        }(this.remoteStore);\n      }, ud);\n\n      function ud() {}\n\n      function cd(t, e) {\n        var n = this;\n        return (n = nd.call(this, t, e, !1) || this).Ko = t, n.cacheSizeBytes = e, n.synchronizeTabs = !0, n;\n      }\n\n      function hd(t, e, n) {\n        var r = this;\n        return (r = rd.call(this) || this).Ko = t, r.cacheSizeBytes = e, r.forceOwnership = n, r.synchronizeTabs = !1, r;\n      }\n\n      function ld() {\n        this.synchronizeTabs = !1;\n      }\n\n      function fd(n, r) {\n        void 0 === r && (r = 10240);\n        var i = 0;\n        return {\n          read: function read() {\n            return y(this, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                return i < n.byteLength ? (e = {\n                  value: n.slice(i, i + r),\n                  done: !1\n                }, [2, (i += r, e)]) : [2, {\n                  done: !0\n                }];\n              });\n            });\n          },\n          cancel: function cancel() {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                return [2];\n              });\n            });\n          },\n          releaseLock: function releaseLock() {},\n          closed: Promise.reject(\"unimplemented\")\n        };\n      }\n\n      var dd = (Td.prototype.next = function (t) {\n        this.observer.next && this.jo(this.observer.next, t);\n      }, Td.prototype.error = function (t) {\n        this.observer.error ? this.jo(this.observer.error, t) : console.error(\"Uncaught Error in snapshot listener:\", t);\n      }, Td.prototype.Wo = function () {\n        this.muted = !0;\n      }, Td.prototype.jo = function (t, e) {\n        var n = this;\n        this.muted || setTimeout(function () {\n          n.muted || t(e);\n        }, 0);\n      }, Td),\n          pd = (Ed.prototype.close = function () {\n        return this.Go.cancel();\n      }, Ed.prototype.getMetadata = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            return [2, this.metadata.promise];\n          });\n        });\n      }, Ed.prototype.Lo = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.getMetadata()];\n\n              case 1:\n                return [2, (t.sent(), this.Ho())];\n            }\n          });\n        });\n      }, Ed.prototype.Ho = function () {\n        return y(this, void 0, void 0, function () {\n          var e, n, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.Jo()];\n\n              case 1:\n                return null === (e = t.sent()) ? [2, null] : (r = this.zo.decode(e), n = Number(r), isNaN(n) && this.Yo(\"length string (\" + r + \") is not valid number\"), [4, this.Xo(n)]);\n\n              case 2:\n                return r = t.sent(), [2, new bf(JSON.parse(r), e.length + n)];\n            }\n          });\n        });\n      }, Ed.prototype.Zo = function () {\n        return this.buffer.findIndex(function (t) {\n          return t === \"{\".charCodeAt(0);\n        });\n      }, Ed.prototype.Jo = function () {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Zo() < 0 ? [4, this.tc()] : [3, 3];\n\n              case 1:\n                if (t.sent()) return [3, 3];\n                t.label = 2;\n\n              case 2:\n                return [3, 0];\n\n              case 3:\n                return 0 === this.buffer.length ? [2, null] : ((e = this.Zo()) < 0 && this.Yo(\"Reached the end of bundle when a length string is expected.\"), n = this.buffer.slice(0, e), [2, (this.buffer = this.buffer.slice(e), n)]);\n            }\n          });\n        });\n      }, Ed.prototype.Xo = function (n) {\n        return y(this, void 0, void 0, function () {\n          var e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.buffer.length < n ? [4, this.tc()] : [3, 3];\n\n              case 1:\n                t.sent() && this.Yo(\"Reached the end of bundle when more is expected.\"), t.label = 2;\n\n              case 2:\n                return [3, 0];\n\n              case 3:\n                return e = this.zo.decode(this.buffer.slice(0, n)), [2, (this.buffer = this.buffer.slice(n), e)];\n            }\n          });\n        });\n      }, Ed.prototype.Yo = function (t) {\n        throw this.Go.cancel(), new Error(\"Invalid bundle format: \" + t);\n      }, Ed.prototype.tc = function () {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.Go.read()];\n\n              case 1:\n                return (e = t.sent()).done || ((n = new Uint8Array(this.buffer.length + e.value.length)).set(this.buffer), n.set(e.value, this.buffer.length), this.buffer = n), [2, e.done];\n            }\n          });\n        });\n      }, Ed),\n          yd = (wd.prototype.lookup = function (r) {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.ensureCommitNotCalled(), 0 < this.mutations.length) throw new Vr(Fr.INVALID_ARGUMENT, \"Firestore transactions require all reads to be executed before all writes.\");\n                return [4, function (s, a) {\n                  return y(this, void 0, void 0, function () {\n                    var n, e, r, i, o;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return e = Sa((n = s).R) + \"/documents\", r = {\n                            documents: a.map(function (t) {\n                              return Ea(n.R, t);\n                            })\n                          }, [4, n.$i(\"BatchGetDocuments\", e, r)];\n\n                        case 1:\n                          return r = t.sent(), i = new Map(), r.forEach(function (t) {\n                            var e,\n                                t = (e = n.R, \"found\" in (t = t) ? function (t, e) {\n                              zr(!!e.found), e.found.name, e.found.updateTime;\n                              var n = Ta(t, e.found.name),\n                                  t = va(e.found.updateTime),\n                                  e = new ji({\n                                mapValue: {\n                                  fields: e.found.fields\n                                }\n                              });\n                              return Gi.newFoundDocument(n, t, e);\n                            }(e, t) : \"missing\" in t ? function (t, e) {\n                              zr(!!e.missing), zr(!!e.readTime);\n                              t = Ta(t, e.missing), e = va(e.readTime);\n                              return Gi.newNoDocument(t, e);\n                            }(e, t) : Hr());\n                            i.set(t.key.toString(), t);\n                          }), o = [], [2, (a.forEach(function (t) {\n                            t = i.get(t.toString());\n                            zr(!!t), o.push(t);\n                          }), o)];\n                      }\n                    });\n                  });\n                }(this.datastore, r)];\n\n              case 1:\n                return [2, ((e = t.sent()).forEach(function (t) {\n                  return n.recordVersion(t);\n                }), e)];\n            }\n          });\n        });\n      }, wd.prototype.set = function (t, e) {\n        this.write(e.toMutation(t, this.precondition(t))), this.writtenDocs.add(t.toString());\n      }, wd.prototype.update = function (t, e) {\n        try {\n          this.write(e.toMutation(t, this.preconditionForUpdate(t)));\n        } catch (t) {\n          this.lastWriteError = t;\n        }\n\n        this.writtenDocs.add(t.toString());\n      }, wd.prototype.delete = function (t) {\n        this.write(new Rs(t, this.precondition(t))), this.writtenDocs.add(t.toString());\n      }, wd.prototype.commit = function () {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.ensureCommitNotCalled(), this.lastWriteError) throw this.lastWriteError;\n                return e = this.readVersions, this.mutations.forEach(function (t) {\n                  e.delete(t.key.toString());\n                }), e.forEach(function (t, e) {\n                  e = Ni.fromPath(e);\n                  n.mutations.push(new xs(e, n.precondition(e)));\n                }), [4, function (i, o) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n, r;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return n = Sa((e = i).R) + \"/documents\", r = {\n                            writes: o.map(function (t) {\n                              return Ca(e.R, t);\n                            })\n                          }, [4, e.Ni(\"Commit\", n, r)];\n\n                        case 1:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                }(this.datastore, this.mutations)];\n\n              case 1:\n                return t.sent(), this.committed = !0, [2];\n            }\n          });\n        });\n      }, wd.prototype.recordVersion = function (t) {\n        var e;\n        if (t.isFoundDocument()) e = t.version;else {\n          if (!t.isNoDocument()) throw Hr();\n          e = ti.min();\n        }\n        var n = this.readVersions.get(t.key.toString());\n\n        if (n) {\n          if (!e.isEqual(n)) throw new Vr(Fr.ABORTED, \"Document version changed between two reads.\");\n        } else this.readVersions.set(t.key.toString(), e);\n      }, wd.prototype.precondition = function (t) {\n        var e = this.readVersions.get(t.toString());\n        return !this.writtenDocs.has(t.toString()) && e ? fs.updateTime(e) : fs.none();\n      }, wd.prototype.preconditionForUpdate = function (t) {\n        var e = this.readVersions.get(t.toString());\n        if (this.writtenDocs.has(t.toString()) || !e) return fs.exists(!0);\n        if (e.isEqual(ti.min())) throw new Vr(Fr.INVALID_ARGUMENT, \"Can't update a document that doesn't exist.\");\n        return fs.updateTime(e);\n      }, wd.prototype.write = function (t) {\n        this.ensureCommitNotCalled(), this.mutations.push(t);\n      }, wd.prototype.ensureCommitNotCalled = function () {}, wd),\n          gd = (bd.prototype.run = function () {\n        this.nc();\n      }, bd.prototype.nc = function () {\n        var t = this;\n        this.Zi.ji(function () {\n          return y(t, void 0, void 0, function () {\n            var e,\n                n,\n                r = this;\n            return g(this, function (t) {\n              return e = new yd(this.datastore), (n = this.sc(e)) && n.then(function (t) {\n                r.asyncQueue.enqueueAndForget(function () {\n                  return e.commit().then(function () {\n                    r.deferred.resolve(t);\n                  }).catch(function (t) {\n                    r.ic(t);\n                  });\n                });\n              }).catch(function (t) {\n                r.ic(t);\n              }), [2];\n            });\n          });\n        });\n      }, bd.prototype.sc = function (t) {\n        try {\n          var e = this.updateFunction(t);\n          return !_i(e) && e.catch && e.then ? e : (this.deferred.reject(Error(\"Transaction callback must return a Promise\")), null);\n        } catch (t) {\n          return this.deferred.reject(t), null;\n        }\n      }, bd.prototype.ic = function (t) {\n        var e = this;\n        0 < this.ec && this.rc(t) ? (--this.ec, this.asyncQueue.enqueueAndForget(function () {\n          return e.nc(), Promise.resolve();\n        })) : this.deferred.reject(t);\n      }, bd.prototype.rc = function (t) {\n        if (\"FirebaseError\" !== t.name) return !1;\n        t = t.code;\n        return \"aborted\" === t || \"failed-precondition\" === t || !Ps(t);\n      }, bd),\n          md = (vd.prototype.getConfiguration = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            return [2, {\n              asyncQueue: this.asyncQueue,\n              databaseInfo: this.databaseInfo,\n              clientId: this.clientId,\n              credentials: this.credentials,\n              initialUser: this.user,\n              maxConcurrentLimboResolutions: 100\n            }];\n          });\n        });\n      }, vd.prototype.setCredentialChangeListener = function (t) {\n        this.credentialListener = t;\n      }, vd.prototype.verifyNotTerminated = function () {\n        if (this.asyncQueue.isShuttingDown) throw new Vr(Fr.FAILED_PRECONDITION, \"The client has already been terminated.\");\n      }, vd.prototype.terminate = function () {\n        var t = this;\n        this.asyncQueue.enterRestrictedMode();\n        var n = new hu();\n        return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return t.trys.push([0, 5,, 6]), this.onlineComponents ? [4, this.onlineComponents.terminate()] : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return this.offlineComponents ? [4, this.offlineComponents.terminate()] : [3, 4];\n\n                case 3:\n                  t.sent(), t.label = 4;\n\n                case 4:\n                  return this.credentials.removeChangeListener(), n.resolve(), [3, 6];\n\n                case 5:\n                  return e = t.sent(), e = sf(e, \"Failed to shutdown persistence\"), n.reject(e), [3, 6];\n\n                case 6:\n                  return [2];\n              }\n            });\n          });\n        }), n.promise;\n      }, vd);\n\n      function vd(t, e, n) {\n        var r = this;\n        this.credentials = t, this.asyncQueue = e, this.databaseInfo = n, this.user = Lh.UNAUTHENTICATED, this.clientId = Wr.u(), this.credentialListener = function () {\n          return Promise.resolve();\n        }, this.credentials.setChangeListener(e, function (e) {\n          return y(r, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return jr(\"FirestoreClient\", \"Received user=\", e.uid), [4, this.credentialListener(e)];\n\n                case 1:\n                  return t.sent(), this.user = e, [2];\n              }\n            });\n          });\n        });\n      }\n\n      function bd(t, e, n, r) {\n        this.asyncQueue = t, this.datastore = e, this.updateFunction = n, this.deferred = r, this.ec = 5, this.Zi = new Nl(this.asyncQueue, \"transaction_retry\");\n      }\n\n      function wd(t) {\n        this.datastore = t, this.readVersions = new Map(), this.mutations = [], this.committed = !1, this.lastWriteError = null, this.writtenDocs = new Set();\n      }\n\n      function Ed(t, e) {\n        var n = this;\n        this.Go = t, this.R = e, this.metadata = new hu(), this.buffer = new Uint8Array(), this.zo = new TextDecoder(\"utf-8\"), this.Ho().then(function (t) {\n          t && t.io() ? n.metadata.resolve(t.payload.metadata) : n.metadata.reject(new Error(\"The first element of the bundle is not a metadata, it is\\n             \" + JSON.stringify(null == t ? void 0 : t.payload)));\n        }, function (t) {\n          return n.metadata.reject(t);\n        });\n      }\n\n      function Td(t) {\n        this.observer = t, this.muted = !1;\n      }\n\n      function Id(i, o) {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n,\n              r = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return i.asyncQueue.verifyOperationInProgress(), jr(\"FirestoreClient\", \"Initializing OfflineComponentProvider\"), [4, i.getConfiguration()];\n\n              case 1:\n                return e = t.sent(), [4, o.initialize(e)];\n\n              case 2:\n                return t.sent(), n = e.initialUser, i.setCredentialChangeListener(function (e) {\n                  return y(r, void 0, void 0, function () {\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return n.isEqual(e) ? [3, 2] : [4, lh(o.localStore, e)];\n\n                        case 1:\n                          t.sent(), n = e, t.label = 2;\n\n                        case 2:\n                          return [2];\n                      }\n                    });\n                  });\n                }), o.persistence.setDatabaseDeletedListener(function () {\n                  return i.terminate();\n                }), i.offlineComponents = o, [2];\n            }\n          });\n        });\n      }\n\n      function _d(r, i) {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return r.asyncQueue.verifyOperationInProgress(), [4, Sd(r)];\n\n              case 1:\n                return e = t.sent(), jr(\"FirestoreClient\", \"Initializing OnlineComponentProvider\"), [4, r.getConfiguration()];\n\n              case 2:\n                return n = t.sent(), [4, i.initialize(e, n)];\n\n              case 3:\n                return t.sent(), r.setCredentialChangeListener(function (t) {\n                  return function (r, i) {\n                    return y(this, void 0, void 0, function () {\n                      var e, n;\n                      return g(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return (e = r).asyncQueue.verifyOperationInProgress(), jr(\"RemoteStore\", \"RemoteStore received new credentials\"), n = Hl(e), e.Or.add(3), [4, Ul(e)];\n\n                          case 1:\n                            return t.sent(), n && e.Br.set(\"Unknown\"), [4, e.remoteSyncer.handleCredentialChange(i)];\n\n                          case 2:\n                            return t.sent(), e.Or.delete(3), [4, Vl(e)];\n\n                          case 3:\n                            return t.sent(), [2];\n                        }\n                      });\n                    });\n                  }(i.remoteStore, t);\n                }), r.onlineComponents = i, [2];\n            }\n          });\n        });\n      }\n\n      function Sd(e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e.offlineComponents ? [3, 2] : (jr(\"FirestoreClient\", \"Using default OfflineComponentProvider\"), [4, Id(e, new id())]);\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2, e.offlineComponents];\n            }\n          });\n        });\n      }\n\n      function Ad(e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e.onlineComponents ? [3, 2] : (jr(\"FirestoreClient\", \"Using default OnlineComponentProvider\"), [4, _d(e, new ad())]);\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2, e.onlineComponents];\n            }\n          });\n        });\n      }\n\n      function Nd(t) {\n        return Sd(t).then(function (t) {\n          return t.persistence;\n        });\n      }\n\n      function Dd(t) {\n        return Sd(t).then(function (t) {\n          return t.localStore;\n        });\n      }\n\n      function Cd(t) {\n        return Ad(t).then(function (t) {\n          return t.remoteStore;\n        });\n      }\n\n      function kd(t) {\n        return Ad(t).then(function (t) {\n          return t.syncEngine;\n        });\n      }\n\n      function Rd(r) {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, Ad(r)];\n\n              case 1:\n                return e = t.sent(), [2, ((n = e.eventManager).onListen = function (s, a) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n, r, i, o;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return e = Zf(s), (o = e.Po.get(a)) ? (n = o.targetId, e.sharedClientState.addLocalQueryTarget(n), r = o.view.Ro(), [3, 4]) : [3, 1];\n\n                        case 1:\n                          return [4, gh(e.localStore, Fo(a))];\n\n                        case 2:\n                          return i = t.sent(), o = e.sharedClientState.addLocalQueryTarget(i.targetId), n = i.targetId, [4, Pf(e, a, n, \"current\" === o)];\n\n                        case 3:\n                          r = t.sent(), e.isPrimaryClient && ql(e.remoteStore, i), t.label = 4;\n\n                        case 4:\n                          return [2, r];\n                      }\n                    });\n                  });\n                }.bind(null, e.syncEngine), n.onUnlisten = function (i, o) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n, r;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return n = (e = i).Po.get(o), 1 < (r = e.Vo.get(n.targetId)).length ? [2, (e.Vo.set(n.targetId, r.filter(function (t) {\n                            return !Uo(t, o);\n                          })), void e.Po.delete(o))] : e.isPrimaryClient ? (e.sharedClientState.removeLocalQueryTarget(n.targetId), e.sharedClientState.isActiveQueryTarget(n.targetId) ? [3, 2] : [4, mh(e.localStore, n.targetId, !1).then(function () {\n                            e.sharedClientState.clearQueryState(n.targetId), Bl(e.remoteStore, n.targetId), Kf(e, n.targetId);\n                          }).catch(_c)]) : [3, 3];\n\n                        case 1:\n                          t.sent(), t.label = 2;\n\n                        case 2:\n                          return [3, 5];\n\n                        case 3:\n                          return Kf(e, n.targetId), [4, mh(e.localStore, n.targetId, !0)];\n\n                        case 4:\n                          t.sent(), t.label = 5;\n\n                        case 5:\n                          return [2];\n                      }\n                    });\n                  });\n                }.bind(null, e.syncEngine), n)];\n            }\n          });\n        });\n      }\n\n      function xd(n, r, i) {\n        var t = this;\n        void 0 === i && (i = {});\n        var o = new hu();\n        return n.asyncQueue.enqueueAndForget(function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e = function e(n, r, i, o, s) {\n                    var t = new dd({\n                      next: function next(t) {\n                        r.enqueueAndForget(function () {\n                          return gf(n, a);\n                        });\n                        var e = t.docs.has(i);\n                        !e && t.fromCache ? s.reject(new Vr(Fr.UNAVAILABLE, \"Failed to get document because the client is offline.\")) : e && t.fromCache && o && \"server\" === o.source ? s.reject(new Vr(Fr.UNAVAILABLE, 'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)')) : s.resolve(t);\n                      },\n                      error: function error(t) {\n                        return s.reject(t);\n                      }\n                    }),\n                        a = new vf(ko(i.path), t, {\n                      includeMetadataChanges: !0,\n                      so: !0\n                    });\n                    return yf(n, a);\n                  }, [4, Rd(n)];\n\n                case 1:\n                  return [2, e.apply(void 0, [t.sent(), n.asyncQueue, r, i, o])];\n              }\n            });\n          });\n        }), o.promise;\n      }\n\n      function Od(n, r, i) {\n        var t = this;\n        void 0 === i && (i = {});\n        var o = new hu();\n        return n.asyncQueue.enqueueAndForget(function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e = function e(_e2, n, t, r, i) {\n                    var o = new dd({\n                      next: function next(t) {\n                        n.enqueueAndForget(function () {\n                          return gf(_e2, s);\n                        }), t.fromCache && \"server\" === r.source ? i.reject(new Vr(Fr.UNAVAILABLE, 'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)')) : i.resolve(t);\n                      },\n                      error: function error(t) {\n                        return i.reject(t);\n                      }\n                    }),\n                        s = new vf(t, o, {\n                      includeMetadataChanges: !0,\n                      so: !0\n                    });\n                    return yf(_e2, s);\n                  }, [4, Rd(n)];\n\n                case 1:\n                  return [2, e.apply(void 0, [t.sent(), n.asyncQueue, r, i, o])];\n              }\n            });\n          });\n        }), o.promise;\n      }\n\n      function Ld(t, e) {\n        this.user = e, this.type = \"OAuth\", this.authHeaders = {}, this.authHeaders.Authorization = \"Bearer \" + t;\n      }\n\n      var Pd = function Pd(t, e, n, r, i, o, s, a) {\n        this.databaseId = t, this.appId = e, this.persistenceKey = n, this.host = r, this.ssl = i, this.forceLongPolling = o, this.autoDetectLongPolling = s, this.useFetchStreams = a;\n      },\n          Md = (Object.defineProperty(Wd.prototype, \"isDefaultDatabase\", {\n        get: function get() {\n          return \"(default)\" === this.database;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Wd.prototype.isEqual = function (t) {\n        return t instanceof Wd && t.projectId === this.projectId && t.database === this.database;\n      }, Wd),\n          Fd = new Map(),\n          Vd = (zd.prototype.getToken = function () {\n        return Promise.resolve(null);\n      }, zd.prototype.invalidateToken = function () {}, zd.prototype.setChangeListener = function (t, e) {\n        this.changeListener = e, t.enqueueRetryable(function () {\n          return e(Lh.UNAUTHENTICATED);\n        });\n      }, zd.prototype.removeChangeListener = function () {\n        this.changeListener = null;\n      }, zd),\n          Ud = (Hd.prototype.getToken = function () {\n        return Promise.resolve(this.token);\n      }, Hd.prototype.invalidateToken = function () {}, Hd.prototype.setChangeListener = function (t, e) {\n        var n = this;\n        this.changeListener = e, t.enqueueRetryable(function () {\n          return e(n.token.user);\n        });\n      }, Hd.prototype.removeChangeListener = function () {\n        this.changeListener = null;\n      }, Hd),\n          qd = (Qd.prototype.getToken = function () {\n        var e = this,\n            n = this.cc,\n            t = this.forceRefresh;\n        return this.forceRefresh = !1, this.auth ? this.auth.getToken(t).then(function (t) {\n          return e.cc !== n ? (jr(\"FirebaseCredentialsProvider\", \"getToken aborted due to token change.\"), e.getToken()) : t ? (zr(\"string\" == typeof t.accessToken), new Ld(t.accessToken, e.currentUser)) : null;\n        }) : Promise.resolve(null);\n      }, Qd.prototype.invalidateToken = function () {\n        this.forceRefresh = !0;\n      }, Qd.prototype.setChangeListener = function (t, e) {\n        this.uc = !0, this.asyncQueue = t, this.changeListener = e;\n      }, Qd.prototype.removeChangeListener = function () {\n        this.auth && this.auth.removeAuthTokenListener(this.ac), this.changeListener = function () {\n          return Promise.resolve();\n        };\n      }, Qd.prototype.hc = function () {\n        var t = this.auth && this.auth.getUid();\n        return zr(null === t || \"string\" == typeof t), new Lh(t);\n      }, Qd.prototype.lc = function () {\n        var t = this;\n        this.uc && (this.uc = !1, this.asyncQueue.enqueueRetryable(function () {\n          return y(t, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return [4, this.oc.promise];\n\n                case 1:\n                  return t.sent(), [4, this.changeListener(this.currentUser)];\n\n                case 2:\n                  return t.sent(), this.uc = !0, [2];\n              }\n            });\n          });\n        }));\n      }, Qd),\n          Bd = (Object.defineProperty(Gd.prototype, \"authHeaders\", {\n        get: function get() {\n          var t = {\n            \"X-Goog-AuthUser\": this.dc\n          },\n              e = this.fc.auth.getAuthHeaderValueForFirstParty([]);\n          return e && (t.Authorization = e), this.wc && (t[\"X-Goog-Iam-Authorization-Token\"] = this.wc), t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Gd),\n          jd = (Kd.prototype.getToken = function () {\n        return Promise.resolve(new Bd(this.fc, this.dc, this.wc));\n      }, Kd.prototype.setChangeListener = function (t, e) {\n        t.enqueueRetryable(function () {\n          return e(Lh.FIRST_PARTY);\n        });\n      }, Kd.prototype.removeChangeListener = function () {}, Kd.prototype.invalidateToken = function () {}, Kd);\n\n      function Kd(t, e, n) {\n        this.fc = t, this.dc = e, this.wc = n;\n      }\n\n      function Gd(t, e, n) {\n        this.fc = t, this.dc = e, this.wc = n, this.type = \"FirstParty\", this.user = Lh.FIRST_PARTY;\n      }\n\n      function Qd(e) {\n        var n = this;\n        this.currentUser = Lh.UNAUTHENTICATED, this.oc = new hu(), this.cc = 0, this.changeListener = function () {\n          return Promise.resolve();\n        }, this.uc = !1, this.forceRefresh = !1, this.auth = null, this.asyncQueue = null, this.ac = function () {\n          n.cc++, n.currentUser = n.hc(), n.oc.resolve(), n.uc && n.asyncQueue.enqueueRetryable(function () {\n            return n.changeListener(n.currentUser);\n          });\n        };\n\n        function r(t) {\n          jr(\"FirebaseCredentialsProvider\", \"Auth detected\"), n.auth = t, n.lc(), n.auth.addAuthTokenListener(n.ac);\n        }\n\n        e.onInit(r), setTimeout(function () {\n          var t;\n          n.auth || ((t = e.getImmediate({\n            optional: !0\n          })) ? r(t) : n.uc && (jr(\"FirebaseCredentialsProvider\", \"Auth not yet detected\"), n.asyncQueue.enqueueRetryable(function () {\n            return n.changeListener(n.currentUser);\n          })));\n        }, 0);\n      }\n\n      function Hd(t) {\n        this.token = t, this.changeListener = null;\n      }\n\n      function zd() {\n        this.changeListener = null;\n      }\n\n      function Wd(t, e) {\n        this.projectId = t, this.database = e || \"(default)\";\n      }\n\n      function Yd(t, e, n) {\n        if (!n) throw new Vr(Fr.INVALID_ARGUMENT, \"Function \" + t + \"() cannot be called with an empty \" + e + \".\");\n      }\n\n      function Xd(t, e) {\n        if (void 0 === e) return {\n          merge: !1\n        };\n        if (void 0 !== e.mergeFields && void 0 !== e.merge) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid options passed to function \" + t + '(): You cannot specify both \"merge\" and \"mergeFields\".');\n        return e;\n      }\n\n      function $d(t, e, n, r) {\n        if (!0 === e && !0 === r) throw new Vr(Fr.INVALID_ARGUMENT, t + \" and \" + n + \" cannot be used together.\");\n      }\n\n      function Jd(t) {\n        if (!Ni.isDocumentKey(t)) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid document reference. Document references must have an even number of segments, but \" + t + \" has \" + t.length + \".\");\n      }\n\n      function Zd(t) {\n        if (Ni.isDocumentKey(t)) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid collection reference. Collection references must have an odd number of segments, but \" + t + \" has \" + t.length + \".\");\n      }\n\n      function tp(e) {\n        if (void 0 === e) return \"undefined\";\n        if (null === e) return \"null\";\n        if (\"string\" == typeof e) return 20 < e.length && (e = e.substring(0, 20) + \"...\"), JSON.stringify(e);\n        if (\"number\" == typeof e || \"boolean\" == typeof e) return \"\" + e;\n        if (\"object\" != typeof e) return \"function\" == typeof e ? \"a function\" : Hr();\n        if (e instanceof Array) return \"an array\";\n\n        var t = function () {\n          if (e.constructor) {\n            var t = /function\\s+([^\\s(]+)\\s*\\(/.exec(e.constructor.toString());\n            if (t && 1 < t.length) return t[1];\n          }\n\n          return null;\n        }();\n\n        return t ? \"a custom \" + t + \" object\" : \"an object\";\n      }\n\n      function ep(t, e) {\n        if ((t = \"_delegate\" in t ? t._delegate : t) instanceof e) return t;\n        if (e.name === t.constructor.name) throw new Vr(Fr.INVALID_ARGUMENT, \"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?\");\n        t = tp(t);\n        throw new Vr(Fr.INVALID_ARGUMENT, \"Expected type '\" + e.name + \"', but it was: \" + t);\n      }\n\n      function np(t, e) {\n        if (e <= 0) throw new Vr(Fr.INVALID_ARGUMENT, \"Function \" + t + \"() requires a positive number, but it was: \" + e + \".\");\n      }\n\n      var rp,\n          ip = (dp.prototype.isEqual = function (t) {\n        return this.host === t.host && this.ssl === t.ssl && this.credentials === t.credentials && this.cacheSizeBytes === t.cacheSizeBytes && this.experimentalForceLongPolling === t.experimentalForceLongPolling && this.experimentalAutoDetectLongPolling === t.experimentalAutoDetectLongPolling && this.ignoreUndefinedProperties === t.ignoreUndefinedProperties && this.useFetchStreams === t.useFetchStreams;\n      }, dp),\n          op = (Object.defineProperty(fp.prototype, \"app\", {\n        get: function get() {\n          if (!this._app) throw new Vr(Fr.FAILED_PRECONDITION, \"Firestore was not initialized using the Firebase SDK. 'app' is not available\");\n          return this._app;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(fp.prototype, \"_initialized\", {\n        get: function get() {\n          return this._settingsFrozen;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(fp.prototype, \"_terminated\", {\n        get: function get() {\n          return void 0 !== this._terminateTask;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), fp.prototype._setSettings = function (t) {\n        if (this._settingsFrozen) throw new Vr(Fr.FAILED_PRECONDITION, \"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.\");\n        this._settings = new ip(t), void 0 !== t.credentials && (this._credentials = function (t) {\n          if (!t) return new Vd();\n\n          switch (t.type) {\n            case \"gapi\":\n              var e = t.client;\n              return zr(!(\"object\" != typeof e || null === e || !e.auth || !e.auth.getAuthHeaderValueForFirstParty)), new jd(e, t.sessionIndex || \"0\", t.iamToken || null);\n\n            case \"provider\":\n              return t.client;\n\n            default:\n              throw new Vr(Fr.INVALID_ARGUMENT, \"makeCredentialsProvider failed due to invalid credential type\");\n          }\n        }(t.credentials));\n      }, fp.prototype._getSettings = function () {\n        return this._settings;\n      }, fp.prototype._freezeSettings = function () {\n        return this._settingsFrozen = !0, this._settings;\n      }, fp.prototype._delete = function () {\n        return this._terminateTask || (this._terminateTask = this._terminate()), this._terminateTask;\n      }, fp.prototype.toJSON = function () {\n        return {\n          app: this._app,\n          databaseId: this._databaseId,\n          settings: this._settings\n        };\n      }, fp.prototype._terminate = function () {\n        return (t = Fd.get(this)) && (jr(\"ComponentProvider\", \"Removing Datastore\"), Fd.delete(this), t.terminate()), Promise.resolve();\n        var t;\n      }, fp),\n          sp = (Object.defineProperty(lp.prototype, \"_path\", {\n        get: function get() {\n          return this._key.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(lp.prototype, \"id\", {\n        get: function get() {\n          return this._key.path.lastSegment();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(lp.prototype, \"path\", {\n        get: function get() {\n          return this._key.path.canonicalString();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(lp.prototype, \"parent\", {\n        get: function get() {\n          return new up(this.firestore, this.converter, this._key.path.popLast());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), lp.prototype.withConverter = function (t) {\n        return new lp(this.firestore, t, this._key);\n      }, lp),\n          ap = (hp.prototype.withConverter = function (t) {\n        return new hp(this.firestore, t, this._query);\n      }, hp),\n          up = (n(cp, rp = ap), Object.defineProperty(cp.prototype, \"id\", {\n        get: function get() {\n          return this._query.path.lastSegment();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(cp.prototype, \"path\", {\n        get: function get() {\n          return this._query.path.canonicalString();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(cp.prototype, \"parent\", {\n        get: function get() {\n          var t = this._path.popLast();\n\n          return t.isEmpty() ? null : new sp(this.firestore, null, new Ni(t));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), cp.prototype.withConverter = function (t) {\n        return new cp(this.firestore, t, this._path);\n      }, cp);\n\n      function cp(t, e, n) {\n        var r = this;\n        return (r = rp.call(this, t, e, ko(n)) || this)._path = n, r.type = \"collection\", r;\n      }\n\n      function hp(t, e, n) {\n        this.converter = e, this._query = n, this.type = \"query\", this.firestore = t;\n      }\n\n      function lp(t, e, n) {\n        this.converter = e, this._key = n, this.type = \"document\", this.firestore = t;\n      }\n\n      function fp(t, e) {\n        this.type = \"firestore-lite\", this._persistenceKey = \"(lite)\", this._settings = new ip({}), this._settingsFrozen = !1, t instanceof Md ? (this._databaseId = t, this._credentials = new Vd()) : (this._app = t, this._databaseId = function (t) {\n          if (!Object.prototype.hasOwnProperty.apply(t.options, [\"projectId\"])) throw new Vr(Fr.INVALID_ARGUMENT, '\"projectId\" not provided in firebase.initializeApp.');\n          return new Md(t.options.projectId);\n        }(t), this._credentials = new qd(e));\n      }\n\n      function dp(t) {\n        var e;\n\n        if (void 0 === t.host) {\n          if (void 0 !== t.ssl) throw new Vr(Fr.INVALID_ARGUMENT, \"Can't provide ssl option if host option is not set\");\n          this.host = \"firestore.googleapis.com\", this.ssl = !0;\n        } else this.host = t.host, this.ssl = null === (e = t.ssl) || void 0 === e || e;\n\n        if (this.credentials = t.credentials, this.ignoreUndefinedProperties = !!t.ignoreUndefinedProperties, void 0 === t.cacheSizeBytes) this.cacheSizeBytes = 41943040;else {\n          if (-1 !== t.cacheSizeBytes && t.cacheSizeBytes < 1048576) throw new Vr(Fr.INVALID_ARGUMENT, \"cacheSizeBytes must be at least 1048576\");\n          this.cacheSizeBytes = t.cacheSizeBytes;\n        }\n        this.experimentalForceLongPolling = !!t.experimentalForceLongPolling, this.experimentalAutoDetectLongPolling = !!t.experimentalAutoDetectLongPolling, this.useFetchStreams = !!t.useFetchStreams, $d(\"experimentalForceLongPolling\", t.experimentalForceLongPolling, \"experimentalAutoDetectLongPolling\", t.experimentalAutoDetectLongPolling);\n      }\n\n      function pp(t, e) {\n        for (var n, r = [], i = 2; i < arguments.length; i++) {\n          r[i - 2] = arguments[i];\n        }\n\n        if (t = v(t), Yd(\"collection\", \"path\", e), t instanceof op) return Zd(n = ui.fromString.apply(ui, s([e], r))), new up(t, null, n);\n        if (!(t instanceof sp || t instanceof up)) throw new Vr(Fr.INVALID_ARGUMENT, \"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore\");\n        return Zd(n = ui.fromString.apply(ui, s([t.path], r)).child(ui.fromString(e))), new up(t.firestore, null, n);\n      }\n\n      function yp(t, e) {\n        for (var n, r = [], i = 2; i < arguments.length; i++) {\n          r[i - 2] = arguments[i];\n        }\n\n        if (t = v(t), Yd(\"doc\", \"path\", e = 1 === arguments.length ? Wr.u() : e), t instanceof op) return Jd(n = ui.fromString.apply(ui, s([e], r))), new sp(t, null, new Ni(n));\n        if (!(t instanceof sp || t instanceof up)) throw new Vr(Fr.INVALID_ARGUMENT, \"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore\");\n        return Jd(n = t._path.child(ui.fromString.apply(ui, s([e], r)))), new sp(t.firestore, t instanceof up ? t.converter : null, new Ni(n));\n      }\n\n      function gp(t, e) {\n        return t = v(t), e = v(e), (t instanceof sp || t instanceof up) && (e instanceof sp || e instanceof up) && t.firestore === e.firestore && t.path === e.path && t.converter === e.converter;\n      }\n\n      function mp(t, e) {\n        return t = v(t), e = v(e), t instanceof ap && e instanceof ap && t.firestore === e.firestore && Uo(t._query, e._query) && t.converter === e.converter;\n      }\n\n      var vp = (Object.defineProperty(bp.prototype, \"isShuttingDown\", {\n        get: function get() {\n          return this.yc;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), bp.prototype.enqueueAndForget = function (t) {\n        this.enqueue(t);\n      }, bp.prototype.enqueueAndForgetEvenWhileRestricted = function (t) {\n        this.Rc(), this.bc(t);\n      }, bp.prototype.enterRestrictedMode = function () {\n        var t;\n        this.yc || (this.yc = !0, (t = El()) && \"function\" == typeof t.removeEventListener && t.removeEventListener(\"visibilitychange\", this.Ac));\n      }, bp.prototype.enqueue = function (t) {\n        return this.Rc(), this.yc ? new Promise(function (t) {}) : this.bc(t);\n      }, bp.prototype.enqueueRetryable = function (t) {\n        var e = this;\n        this.enqueueAndForget(function () {\n          return e.mc.push(t), e.vc();\n        });\n      }, bp.prototype.vc = function () {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (0 === this.mc.length) return [3, 5];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), [4, this.mc[0]()];\n\n              case 2:\n                return t.sent(), this.mc.shift(), this.Zi.reset(), [3, 4];\n\n              case 3:\n                if (!Tu(e = t.sent())) throw e;\n                return jr(\"AsyncQueue\", \"Operation failed with retryable error: \" + e), [3, 4];\n\n              case 4:\n                0 < this.mc.length && this.Zi.ji(function () {\n                  return n.vc();\n                }), t.label = 5;\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }, bp.prototype.bc = function (t) {\n        var r = this,\n            e = this._c.then(function () {\n          return r.Tc = !0, t().catch(function (t) {\n            throw r.Ec = t, r.Tc = !1, Kr(\"INTERNAL UNHANDLED ERROR: \", (n = (e = t).message || \"\", n = e.stack ? e.stack.includes(e.message) ? e.stack : e.message + \"\\n\" + e.stack : n)), t;\n            var e, n;\n          }).then(function (t) {\n            return r.Tc = !1, t;\n          });\n        });\n\n        return this._c = e;\n      }, bp.prototype.enqueueAfterDelay = function (t, e, n) {\n        var r = this;\n        this.Rc(), -1 < this.Ic.indexOf(t) && (e = 0);\n        n = rf.createAndSchedule(this, t, e, n, function (t) {\n          return r.Pc(t);\n        });\n        return this.gc.push(n), n;\n      }, bp.prototype.Rc = function () {\n        this.Ec && Hr();\n      }, bp.prototype.verifyOperationInProgress = function () {}, bp.prototype.Vc = function () {\n        return y(this, void 0, void 0, function () {\n          var e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, e = this._c];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                if (e !== this._c) return [3, 0];\n                t.label = 3;\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }, bp.prototype.Sc = function (t) {\n        for (var e = 0, n = this.gc; e < n.length; e++) {\n          if (n[e].timerId === t) return !0;\n        }\n\n        return !1;\n      }, bp.prototype.Dc = function (r) {\n        var i = this;\n        return this.Vc().then(function () {\n          i.gc.sort(function (t, e) {\n            return t.targetTimeMs - e.targetTimeMs;\n          });\n\n          for (var t = 0, e = i.gc; t < e.length; t++) {\n            var n = e[t];\n            if (n.skipDelay(), \"all\" !== r && n.timerId === r) break;\n          }\n\n          return i.Vc();\n        });\n      }, bp.prototype.Cc = function (t) {\n        this.Ic.push(t);\n      }, bp.prototype.Pc = function (t) {\n        t = this.gc.indexOf(t);\n        this.gc.splice(t, 1);\n      }, bp);\n\n      function bp() {\n        var e = this;\n        this._c = Promise.resolve(), this.mc = [], this.yc = !1, this.gc = [], this.Ec = null, this.Tc = !1, this.Ic = [], this.Zi = new Nl(this, \"async_queue_retry\"), this.Ac = function () {\n          var t = El();\n          t && jr(\"AsyncQueue\", \"Visibility state changed to \" + t.visibilityState), e.Zi.Gi();\n        };\n        var t = El();\n        t && \"function\" == typeof t.addEventListener && t.addEventListener(\"visibilitychange\", this.Ac);\n      }\n\n      function wp(i) {\n        return function () {\n          if (\"object\" == typeof i && null !== i) for (var t = i, e = 0, n = [\"next\", \"error\", \"complete\"]; e < n.length; e++) {\n            var r = n[e];\n            if (r in t && \"function\" == typeof t[r]) return 1;\n          }\n        }();\n      }\n\n      var Ep,\n          Tp = (Sp.prototype.onProgress = function (t, e, n) {\n        this._progressObserver = {\n          next: t,\n          error: e,\n          complete: n\n        };\n      }, Sp.prototype.catch = function (t) {\n        return this._taskCompletionResolver.promise.catch(t);\n      }, Sp.prototype.then = function (t, e) {\n        return this._taskCompletionResolver.promise.then(t, e);\n      }, Sp.prototype._completeWith = function (t) {\n        this._updateProgress(t), this._progressObserver.complete && this._progressObserver.complete(), this._taskCompletionResolver.resolve(t);\n      }, Sp.prototype._failWith = function (t) {\n        this._lastProgress.taskState = \"Error\", this._progressObserver.next && this._progressObserver.next(this._lastProgress), this._progressObserver.error && this._progressObserver.error(t), this._taskCompletionResolver.reject(t);\n      }, Sp.prototype._updateProgress = function (t) {\n        this._lastProgress = t, this._progressObserver.next && this._progressObserver.next(t);\n      }, Sp),\n          Ip = (n(_p, Ep = op), _p.prototype._terminate = function () {\n        return this._firestoreClient || Np(this), this._firestoreClient.terminate();\n      }, _p);\n\n      function _p(t, e) {\n        var n = this;\n        return (n = Ep.call(this, t, e) || this).type = \"firestore\", n._queue = new vp(), n._persistenceKey = \"name\" in t ? t.name : \"[DEFAULT]\", n;\n      }\n\n      function Sp() {\n        this._progressObserver = {}, this._taskCompletionResolver = new hu(), this._lastProgress = {\n          taskState: \"Running\",\n          totalBytes: 0,\n          totalDocuments: 0,\n          bytesLoaded: 0,\n          documentsLoaded: 0\n        };\n      }\n\n      function Ap(t) {\n        return t._firestoreClient || Np(t), t._firestoreClient.verifyNotTerminated(), t._firestoreClient;\n      }\n\n      function Np(t) {\n        var e,\n            n,\n            r,\n            i = t._freezeSettings(),\n            i = (e = t._databaseId, n = (null === (r = t._app) || void 0 === r ? void 0 : r.options.appId) || \"\", r = t._persistenceKey, new Pd(e, n, r, i.host, i.ssl, i.experimentalForceLongPolling, i.experimentalAutoDetectLongPolling, i.useFetchStreams));\n\n        t._firestoreClient = new md(t._credentials, t._queue, i);\n      }\n\n      function Dp(n, r, i) {\n        var t = this,\n            o = new hu();\n        return n.asyncQueue.enqueue(function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return t.trys.push([0, 3,, 4]), [4, Id(n, i)];\n\n                case 1:\n                  return t.sent(), [4, _d(n, r)];\n\n                case 2:\n                  return t.sent(), o.resolve(), [3, 4];\n\n                case 3:\n                  if (!(\"FirebaseError\" === (e = t.sent()).name ? e.code === Fr.FAILED_PRECONDITION || e.code === Fr.UNIMPLEMENTED : !(\"undefined\" != typeof DOMException && e instanceof DOMException) || 22 === e.code || 20 === e.code || 11 === e.code)) throw e;\n                  return console.warn(\"Error enabling offline persistence. Falling back to persistence disabled: \" + e), o.reject(e), [3, 4];\n\n                case 4:\n                  return [2];\n              }\n            });\n          });\n        }).then(function () {\n          return o.promise;\n        });\n      }\n\n      function Cp(t) {\n        if (t._initialized || t._terminated) throw new Vr(Fr.FAILED_PRECONDITION, \"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.\");\n      }\n\n      var kp = (Bp.prototype.isEqual = function (t) {\n        return this._internalPath.isEqual(t._internalPath);\n      }, Bp),\n          Rp = (qp.fromBase64String = function (t) {\n        try {\n          return new qp(fi.fromBase64String(t));\n        } catch (t) {\n          throw new Vr(Fr.INVALID_ARGUMENT, \"Failed to construct data from Base64 string: \" + t);\n        }\n      }, qp.fromUint8Array = function (t) {\n        return new qp(fi.fromUint8Array(t));\n      }, qp.prototype.toBase64 = function () {\n        return this._byteString.toBase64();\n      }, qp.prototype.toUint8Array = function () {\n        return this._byteString.toUint8Array();\n      }, qp.prototype.toString = function () {\n        return \"Bytes(base64: \" + this.toBase64() + \")\";\n      }, qp.prototype.isEqual = function (t) {\n        return this._byteString.isEqual(t._byteString);\n      }, qp),\n          xp = function xp(t) {\n        this._methodName = t;\n      },\n          Op = (Object.defineProperty(Up.prototype, \"latitude\", {\n        get: function get() {\n          return this._lat;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Up.prototype, \"longitude\", {\n        get: function get() {\n          return this._long;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Up.prototype.isEqual = function (t) {\n        return this._lat === t._lat && this._long === t._long;\n      }, Up.prototype.toJSON = function () {\n        return {\n          latitude: this._lat,\n          longitude: this._long\n        };\n      }, Up.prototype._compareTo = function (t) {\n        return Xr(this._lat, t._lat) || Xr(this._long, t._long);\n      }, Up),\n          Lp = /^__.*__$/,\n          Pp = (Vp.prototype.toMutation = function (t, e) {\n        return null !== this.fieldMask ? new Es(t, this.data, this.fieldMask, e, this.fieldTransforms) : new ws(t, this.data, e, this.fieldTransforms);\n      }, Vp),\n          Mp = (Fp.prototype.toMutation = function (t, e) {\n        return new Es(t, this.data, this.fieldMask, e, this.fieldTransforms);\n      }, Fp);\n\n      function Fp(t, e, n) {\n        this.data = t, this.fieldMask = e, this.fieldTransforms = n;\n      }\n\n      function Vp(t, e, n) {\n        this.data = t, this.fieldMask = e, this.fieldTransforms = n;\n      }\n\n      function Up(t, e) {\n        if (!isFinite(t) || t < -90 || 90 < t) throw new Vr(Fr.INVALID_ARGUMENT, \"Latitude must be a number between -90 and 90, but was: \" + t);\n        if (!isFinite(e) || e < -180 || 180 < e) throw new Vr(Fr.INVALID_ARGUMENT, \"Longitude must be a number between -180 and 180, but was: \" + e);\n        this._lat = t, this._long = e;\n      }\n\n      function qp(t) {\n        this._byteString = t;\n      }\n\n      function Bp() {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        for (var n = 0; n < t.length; ++n) {\n          if (0 === t[n].length) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid field name at argument $(i + 1). Field names must not be empty.\");\n        }\n\n        this._internalPath = new hi(t);\n      }\n\n      function jp(t) {\n        switch (t) {\n          case 0:\n          case 2:\n          case 1:\n            return 1;\n\n          case 3:\n          case 4:\n            return;\n\n          default:\n            throw Hr();\n        }\n      }\n\n      var Kp = (Object.defineProperty(Hp.prototype, \"path\", {\n        get: function get() {\n          return this.settings.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Hp.prototype, \"xc\", {\n        get: function get() {\n          return this.settings.xc;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Hp.prototype.Fc = function (t) {\n        return new Hp(Object.assign(Object.assign({}, this.settings), t), this.databaseId, this.R, this.ignoreUndefinedProperties, this.fieldTransforms, this.fieldMask);\n      }, Hp.prototype.kc = function (t) {\n        var e = null === (e = this.path) || void 0 === e ? void 0 : e.child(t),\n            e = this.Fc({\n          path: e,\n          $c: !1\n        });\n        return e.Oc(t), e;\n      }, Hp.prototype.Mc = function (t) {\n        var e,\n            t = null === (e = this.path) || void 0 === e ? void 0 : e.child(t),\n            t = this.Fc({\n          path: t,\n          $c: !1\n        });\n        return t.Nc(), t;\n      }, Hp.prototype.Lc = function (t) {\n        return this.Fc({\n          path: void 0,\n          $c: !0\n        });\n      }, Hp.prototype.Bc = function (t) {\n        return Ey(t, this.settings.methodName, this.settings.qc || !1, this.path, this.settings.Uc);\n      }, Hp.prototype.contains = function (e) {\n        return void 0 !== this.fieldMask.find(function (t) {\n          return e.isPrefixOf(t);\n        }) || void 0 !== this.fieldTransforms.find(function (t) {\n          return e.isPrefixOf(t.field);\n        });\n      }, Hp.prototype.Nc = function () {\n        if (this.path) for (var t = 0; t < this.path.length; t++) {\n          this.Oc(this.path.get(t));\n        }\n      }, Hp.prototype.Oc = function (t) {\n        if (0 === t.length) throw this.Bc(\"Document fields must not be empty\");\n        if (jp(this.xc) && Lp.test(t)) throw this.Bc('Document fields cannot begin and end with \"__\"');\n      }, Hp),\n          Gp = (Qp.prototype.Qc = function (t, e, n, r) {\n        return void 0 === r && (r = !1), new Kp({\n          xc: t,\n          methodName: e,\n          Uc: n,\n          path: hi.emptyPath(),\n          $c: !1,\n          qc: r\n        }, this.databaseId, this.R, this.ignoreUndefinedProperties);\n      }, Qp);\n\n      function Qp(t, e, n) {\n        this.databaseId = t, this.ignoreUndefinedProperties = e, this.R = n || Tl(t);\n      }\n\n      function Hp(t, e, n, r, i, o) {\n        this.settings = t, this.databaseId = e, this.R = n, this.ignoreUndefinedProperties = r, void 0 === i && this.Nc(), this.fieldTransforms = i || [], this.fieldMask = o || [];\n      }\n\n      function zp(t) {\n        var e = t._freezeSettings(),\n            n = Tl(t._databaseId);\n\n        return new Gp(t._databaseId, !!e.ignoreUndefinedProperties, n);\n      }\n\n      function Wp(t, e, n, r, i, o) {\n        var s = t.Qc((o = void 0 === o ? {} : o).merge || o.mergeFields ? 2 : 0, e, n, i);\n        my(\"Data must be an object, but it was:\", s, r);\n        var a,\n            u,\n            r = yy(r, s);\n        if (o.merge) a = new li(s.fieldMask), u = s.fieldTransforms;else if (o.mergeFields) {\n          for (var c = [], h = 0, l = o.mergeFields; h < l.length; h++) {\n            var f = vy(e, l[h], n);\n            if (!s.contains(f)) throw new Vr(Fr.INVALID_ARGUMENT, \"Field '\" + f + \"' is specified in your field mask but missing from your input data.\");\n            Ty(c, f) || c.push(f);\n          }\n\n          a = new li(c), u = s.fieldTransforms.filter(function (t) {\n            return a.covers(t.field);\n          });\n        } else a = null, u = s.fieldTransforms;\n        return new Pp(new ji(r), a, u);\n      }\n\n      var Yp,\n          Xp = (n($p, Yp = xp), $p.prototype._toFieldTransform = function (t) {\n        if (2 !== t.xc) throw 1 === t.xc ? t.Bc(this._methodName + \"() can only appear at the top level of your update data\") : t.Bc(this._methodName + \"() cannot be used with set() unless you pass {merge:true}\");\n        return t.fieldMask.push(t.path), null;\n      }, $p.prototype.isEqual = function (t) {\n        return t instanceof $p;\n      }, $p);\n\n      function $p() {\n        return null !== Yp && Yp.apply(this, arguments) || this;\n      }\n\n      function Jp(t, e, n) {\n        return new Kp({\n          xc: 3,\n          Uc: e.settings.Uc,\n          methodName: t._methodName,\n          $c: n\n        }, e.databaseId, e.R, e.ignoreUndefinedProperties);\n      }\n\n      var Zp,\n          ty,\n          ey,\n          ny,\n          ry = (n(hy, ny = xp), hy.prototype._toFieldTransform = function (t) {\n        return new ls(t.path, new Xo());\n      }, hy.prototype.isEqual = function (t) {\n        return t instanceof hy;\n      }, hy),\n          iy = (n(cy, ey = xp), cy.prototype._toFieldTransform = function (t) {\n        var e = Jp(this, t, !0),\n            n = this.Kc.map(function (t) {\n          return py(t, e);\n        }),\n            n = new $o(n);\n        return new ls(t.path, n);\n      }, cy.prototype.isEqual = function (t) {\n        return this === t;\n      }, cy),\n          oy = (n(uy, ty = xp), uy.prototype._toFieldTransform = function (t) {\n        var e = Jp(this, t, !0),\n            n = this.Kc.map(function (t) {\n          return py(t, e);\n        }),\n            n = new ns(n);\n        return new ls(t.path, n);\n      }, uy.prototype.isEqual = function (t) {\n        return this === t;\n      }, uy),\n          sy = (n(ay, Zp = xp), ay.prototype._toFieldTransform = function (t) {\n        var e = new ss(t.R, Ho(t.R, this.jc));\n        return new ls(t.path, e);\n      }, ay.prototype.isEqual = function (t) {\n        return this === t;\n      }, ay);\n\n      function ay(t, e) {\n        var n = this;\n        return (n = Zp.call(this, t) || this).jc = e, n;\n      }\n\n      function uy(t, e) {\n        var n = this;\n        return (n = ty.call(this, t) || this).Kc = e, n;\n      }\n\n      function cy(t, e) {\n        var n = this;\n        return (n = ey.call(this, t) || this).Kc = e, n;\n      }\n\n      function hy() {\n        return null !== ny && ny.apply(this, arguments) || this;\n      }\n\n      function ly(t, r, i, e) {\n        var o = t.Qc(1, r, i);\n        my(\"Data must be an object, but it was:\", o, e);\n        var s = [],\n            a = ji.empty();\n        ii(e, function (t, e) {\n          var n = wy(r, t, i);\n          e = v(e);\n          t = o.Mc(n);\n          e instanceof Xp ? s.push(n) : null != (t = py(e, t)) && (s.push(n), a.set(n, t));\n        });\n        e = new li(s);\n        return new Mp(a, e, o.fieldTransforms);\n      }\n\n      function fy(t, e, n, r, i, o) {\n        var s = t.Qc(1, e, n),\n            a = [vy(e, r, n)],\n            u = [i];\n        if (o.length % 2 != 0) throw new Vr(Fr.INVALID_ARGUMENT, \"Function \" + e + \"() needs to be called with an even number of arguments that alternate between field names and values.\");\n\n        for (var c = 0; c < o.length; c += 2) {\n          a.push(vy(e, o[c])), u.push(o[c + 1]);\n        }\n\n        for (var h, l, f, d = [], p = ji.empty(), y = a.length - 1; 0 <= y; --y) {\n          Ty(d, a[y]) || (h = a[y], l = v(l = u[y]), f = s.Mc(h), l instanceof Xp ? d.push(h) : null != (f = py(l, f)) && (d.push(h), p.set(h, f)));\n        }\n\n        i = new li(d);\n        return new Mp(p, i, s.fieldTransforms);\n      }\n\n      function dy(t, e, n, r) {\n        return py(n, t.Qc((r = void 0 === r ? !1 : r) ? 4 : 3, e));\n      }\n\n      function py(s, t) {\n        if (gy(s = v(s))) return my(\"Unsupported field value:\", t, s), yy(s, t);\n        if (s instanceof xp) return function (t, e) {\n          if (!jp(e.xc)) throw e.Bc(t._methodName + \"() can only be used with update() and set()\");\n          if (!e.path) throw e.Bc(t._methodName + \"() is not currently supported inside arrays\");\n          t = t._toFieldTransform(e);\n          t && e.fieldTransforms.push(t);\n        }(s, t), null;\n        if (void 0 === s && t.ignoreUndefinedProperties) return null;\n\n        if (t.path && t.fieldMask.push(t.path), s instanceof Array) {\n          if (t.settings.$c && 4 !== t.xc) throw t.Bc(\"Nested arrays are not supported\");\n          return function (t) {\n            for (var e = [], n = 0, r = 0, i = s; r < i.length; r++) {\n              var o = py(i[r], t.Lc(n));\n              null == o && (o = {\n                nullValue: \"NULL_VALUE\"\n              }), e.push(o), n++;\n            }\n\n            return {\n              arrayValue: {\n                values: e\n              }\n            };\n          }(t);\n        }\n\n        return function (t, e) {\n          if (null === (t = v(s))) return {\n            nullValue: \"NULL_VALUE\"\n          };\n          if (\"number\" == typeof t) return Ho(e.R, t);\n          if (\"boolean\" == typeof t) return {\n            booleanValue: t\n          };\n          if (\"string\" == typeof t) return {\n            stringValue: t\n          };\n\n          if (t instanceof Date) {\n            var n = Zr.fromDate(t);\n            return {\n              timestampValue: ga(e.R, n)\n            };\n          }\n\n          if (t instanceof Zr) return n = new Zr(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3)), {\n            timestampValue: ga(e.R, n)\n          };\n          if (t instanceof Op) return {\n            geoPointValue: {\n              latitude: t.latitude,\n              longitude: t.longitude\n            }\n          };\n          if (t instanceof Rp) return {\n            bytesValue: ma(e.R, t._byteString)\n          };\n\n          if (t instanceof sp) {\n            var n = e.databaseId,\n                r = t.firestore._databaseId;\n            if (!r.isEqual(n)) throw e.Bc(\"Document reference is for database \" + r.projectId + \"/\" + r.database + \" but should be for database \" + n.projectId + \"/\" + n.database);\n            return {\n              referenceValue: ba(t.firestore._databaseId || e.databaseId, t._key.path)\n            };\n          }\n\n          throw e.Bc(\"Unsupported field value: \" + tp(t));\n        }(0, t);\n      }\n\n      function yy(t, n) {\n        var r = {};\n        return oi(t) ? n.path && 0 < n.path.length && n.fieldMask.push(n.path) : ii(t, function (t, e) {\n          e = py(e, n.kc(t));\n          null != e && (r[t] = e);\n        }), {\n          mapValue: {\n            fields: r\n          }\n        };\n      }\n\n      function gy(t) {\n        return !(\"object\" != typeof t || null === t || t instanceof Array || t instanceof Date || t instanceof Zr || t instanceof Op || t instanceof Rp || t instanceof sp || t instanceof xp);\n      }\n\n      function my(t, e, n) {\n        if (!gy(n) || \"object\" != typeof (r = n) || null === r || Object.getPrototypeOf(r) !== Object.prototype && null !== Object.getPrototypeOf(r)) {\n          n = tp(n);\n          throw \"an object\" === n ? e.Bc(t + \" a custom object\") : e.Bc(t + \" \" + n);\n        }\n\n        var r;\n      }\n\n      function vy(t, e, n) {\n        if ((e = v(e)) instanceof kp) return e._internalPath;\n        if (\"string\" == typeof e) return wy(t, e);\n        throw Ey(\"Field path arguments must be of type string or FieldPath.\", t, !1, void 0, n);\n      }\n\n      var by = new RegExp(\"[~\\\\*/\\\\[\\\\]]\");\n\n      function wy(e, n, r) {\n        if (0 <= n.search(by)) throw Ey(\"Invalid field path (\" + n + \"). Paths must not contain '~', '*', '/', '[', or ']'\", e, !1, void 0, r);\n\n        try {\n          return new (kp.bind.apply(kp, s([void 0], n.split(\".\"))))()._internalPath;\n        } catch (t) {\n          throw Ey(\"Invalid field path (\" + n + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\", e, !1, void 0, r);\n        }\n      }\n\n      function Ey(t, e, n, r, i) {\n        var o = r && !r.isEmpty(),\n            s = void 0 !== i,\n            e = \"Function \" + e + \"() called with invalid data\";\n        n && (e += \" (via `toFirestore()`)\");\n        n = \"\";\n        return (o || s) && (n += \" (found\", o && (n += \" in field \" + r), s && (n += \" in document \" + i), n += \")\"), new Vr(Fr.INVALID_ARGUMENT, (e += \". \") + t + n);\n      }\n\n      function Ty(t, e) {\n        return t.some(function (t) {\n          return t.isEqual(e);\n        });\n      }\n\n      var Iy,\n          _y = (Object.defineProperty(Ny.prototype, \"id\", {\n        get: function get() {\n          return this._key.path.lastSegment();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ny.prototype, \"ref\", {\n        get: function get() {\n          return new sp(this._firestore, this._converter, this._key);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ny.prototype.exists = function () {\n        return null !== this._document;\n      }, Ny.prototype.data = function () {\n        if (this._document) {\n          if (this._converter) {\n            var t = new Sy(this._firestore, this._userDataWriter, this._key, this._document, null);\n            return this._converter.fromFirestore(t);\n          }\n\n          return this._userDataWriter.convertValue(this._document.data.value);\n        }\n      }, Ny.prototype.get = function (t) {\n        if (this._document) {\n          t = this._document.data.field(Dy(\"DocumentSnapshot.get\", t));\n          if (null !== t) return this._userDataWriter.convertValue(t);\n        }\n      }, Ny),\n          Sy = (n(Ay, Iy = _y), Ay.prototype.data = function () {\n        return Iy.prototype.data.call(this);\n      }, Ay);\n\n      function Ay() {\n        return null !== Iy && Iy.apply(this, arguments) || this;\n      }\n\n      function Ny(t, e, n, r, i) {\n        this._firestore = t, this._userDataWriter = e, this._key = n, this._document = r, this._converter = i;\n      }\n\n      function Dy(t, e) {\n        return \"string\" == typeof e ? wy(t, e) : (e instanceof kp ? e : e._delegate)._internalPath;\n      }\n\n      var Cy,\n          ky,\n          Ry = (Vy.prototype.isEqual = function (t) {\n        return this.hasPendingWrites === t.hasPendingWrites && this.fromCache === t.fromCache;\n      }, Vy),\n          xy = (n(Fy, ky = _y), Fy.prototype.exists = function () {\n        return ky.prototype.exists.call(this);\n      }, Fy.prototype.data = function (t) {\n        if (void 0 === t && (t = {}), this._document) {\n          if (this._converter) {\n            var e = new Oy(this._firestore, this._userDataWriter, this._key, this._document, this.metadata, null);\n            return this._converter.fromFirestore(e, t);\n          }\n\n          return this._userDataWriter.convertValue(this._document.data.value, t.serverTimestamps);\n        }\n      }, Fy.prototype.get = function (t, e) {\n        if (void 0 === e && (e = {}), this._document) {\n          t = this._document.data.field(Dy(\"DocumentSnapshot.get\", t));\n          if (null !== t) return this._userDataWriter.convertValue(t, e.serverTimestamps);\n        }\n      }, Fy),\n          Oy = (n(My, Cy = xy), My.prototype.data = function (t) {\n        return Cy.prototype.data.call(this, t = void 0 === t ? {} : t);\n      }, My),\n          Ly = (Object.defineProperty(Py.prototype, \"docs\", {\n        get: function get() {\n          var e = [];\n          return this.forEach(function (t) {\n            return e.push(t);\n          }), e;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Py.prototype, \"size\", {\n        get: function get() {\n          return this._snapshot.docs.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Py.prototype, \"empty\", {\n        get: function get() {\n          return 0 === this.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Py.prototype.forEach = function (e, n) {\n        var r = this;\n\n        this._snapshot.docs.forEach(function (t) {\n          e.call(n, new Oy(r._firestore, r._userDataWriter, t.key, t, new Ry(r._snapshot.mutatedKeys.has(t.key), r._snapshot.fromCache), r.query.converter));\n        });\n      }, Py.prototype.docChanges = function (t) {\n        t = !!(t = void 0 === t ? {} : t).includeMetadataChanges;\n        if (t && this._snapshot.excludesMetadataChanges) throw new Vr(Fr.INVALID_ARGUMENT, \"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().\");\n        return this._cachedChanges && this._cachedChangesIncludeMetadataChanges === t || (this._cachedChanges = function (i, e) {\n          if (i._snapshot.oldDocs.isEmpty()) {\n            var n = 0;\n            return i._snapshot.docChanges.map(function (t) {\n              var e = new Oy(i._firestore, i._userDataWriter, t.doc.key, t.doc, new Ry(i._snapshot.mutatedKeys.has(t.doc.key), i._snapshot.fromCache), i.query.converter);\n              return t.doc, {\n                type: \"added\",\n                doc: e,\n                oldIndex: -1,\n                newIndex: n++\n              };\n            });\n          }\n\n          var o = i._snapshot.oldDocs;\n          return i._snapshot.docChanges.filter(function (t) {\n            return e || 3 !== t.type;\n          }).map(function (t) {\n            var e = new Oy(i._firestore, i._userDataWriter, t.doc.key, t.doc, new Ry(i._snapshot.mutatedKeys.has(t.doc.key), i._snapshot.fromCache), i.query.converter),\n                n = -1,\n                r = -1;\n            return 0 !== t.type && (n = o.indexOf(t.doc.key), o = o.delete(t.doc.key)), 1 !== t.type && (r = (o = o.add(t.doc)).indexOf(t.doc.key)), {\n              type: function (t) {\n                switch (t) {\n                  case 0:\n                    return \"added\";\n\n                  case 2:\n                  case 3:\n                    return \"modified\";\n\n                  case 1:\n                    return \"removed\";\n\n                  default:\n                    return Hr();\n                }\n              }(t.type),\n              doc: e,\n              oldIndex: n,\n              newIndex: r\n            };\n          });\n        }(this, t), this._cachedChangesIncludeMetadataChanges = t), this._cachedChanges;\n      }, Py);\n\n      function Py(t, e, n, r) {\n        this._firestore = t, this._userDataWriter = e, this._snapshot = r, this.metadata = new Ry(r.hasPendingWrites, r.fromCache), this.query = n;\n      }\n\n      function My() {\n        return null !== Cy && Cy.apply(this, arguments) || this;\n      }\n\n      function Fy(t, e, n, r, i, o) {\n        var s = this;\n        return (s = ky.call(this, t, e, n, r, o) || this)._firestore = t, s._firestoreImpl = t, s.metadata = i, s;\n      }\n\n      function Vy(t, e) {\n        this.hasPendingWrites = t, this.fromCache = e;\n      }\n\n      function Uy(t, e) {\n        return t instanceof xy && e instanceof xy ? t._firestore === e._firestore && t._key.isEqual(e._key) && (null === t._document ? null === e._document : t._document.isEqual(e._document)) && t._converter === e._converter : t instanceof Ly && e instanceof Ly && t._firestore === e._firestore && mp(t.query, e.query) && t.metadata.isEqual(e.metadata) && t._snapshot.isEqual(e._snapshot);\n      }\n\n      function qy(t) {\n        if (xo(t) && 0 === t.explicitOrderBy.length) throw new Vr(Fr.UNIMPLEMENTED, \"limitToLast() queries require specifying at least one orderBy() clause\");\n      }\n\n      Se = function Se() {};\n\n      function By(t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        for (var r = 0, i = e; r < i.length; r++) {\n          t = i[r]._apply(t);\n        }\n\n        return t;\n      }\n\n      var jy,\n          Ky,\n          Gy,\n          Qy,\n          Hy,\n          zy = (n(ng, Hy = Se), ng.prototype._apply = function (t) {\n        var e = zp(t.firestore),\n            e = function (t, e, n, r, i, o) {\n          if (r.isKeyField()) {\n            if (\"array-contains\" === i || \"array-contains-any\" === i) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid Query. You can't perform '\" + i + \"' queries on FieldPath.documentId().\");\n\n            if (\"in\" === i || \"not-in\" === i) {\n              og(o, i);\n\n              for (var s = [], a = 0, u = o; a < u.length; a++) {\n                var c = u[a];\n                s.push(ig(n, t, c));\n              }\n\n              h = {\n                arrayValue: {\n                  values: s\n                }\n              };\n            } else h = ig(n, t, o);\n          } else \"in\" !== i && \"not-in\" !== i && \"array-contains-any\" !== i || og(o, i), h = dy(e, \"where\", o, \"in\" === i || \"not-in\" === i);\n\n          var h = Ji.create(r, i, h);\n          return function (t, e) {\n            if (e.g()) {\n              var n = Lo(t);\n              if (null !== n && !n.isEqual(e.field)) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '\" + n.toString() + \"' and '\" + e.field.toString() + \"'\");\n              n = Oo(t);\n              null !== n && sg(0, e.field, n);\n            }\n\n            t = function (t, e) {\n              for (var n = 0, r = t.filters; n < r.length; n++) {\n                var i = r[n];\n                if (0 <= e.indexOf(i.op)) return i.op;\n              }\n\n              return null;\n            }(t, function () {\n              switch (e.op) {\n                case \"!=\":\n                  return [\"!=\", \"not-in\"];\n\n                case \"array-contains\":\n                  return [\"array-contains\", \"array-contains-any\", \"not-in\"];\n\n                case \"in\":\n                  return [\"array-contains-any\", \"in\", \"not-in\"];\n\n                case \"array-contains-any\":\n                  return [\"array-contains\", \"array-contains-any\", \"in\", \"not-in\"];\n\n                case \"not-in\":\n                  return [\"array-contains\", \"array-contains-any\", \"in\", \"not-in\", \"!=\"];\n\n                default:\n                  return [];\n              }\n            }());\n\n            if (null !== t) throw t === e.op ? new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. You cannot use more than one '\" + e.op.toString() + \"' filter.\") : new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. You cannot use '\" + e.op.toString() + \"' filters with '\" + t.toString() + \"' filters.\");\n          }(t, h), h;\n        }(t._query, e, t.firestore._databaseId, this.Wc, this.Gc, this.zc);\n\n        return new ap(t.firestore, t.converter, (t = t._query, e = t.filters.concat([e]), new Do(t.path, t.collectionGroup, t.explicitOrderBy.slice(), e, t.limit, t.limitType, t.startAt, t.endAt)));\n      }, ng),\n          Wy = (n(eg, Qy = Se), eg.prototype._apply = function (t) {\n        var e = function (t, e, n) {\n          if (null !== t.startAt) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. You must not call startAt() or startAfter() before calling orderBy().\");\n          if (null !== t.endAt) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. You must not call endAt() or endBefore() before calling orderBy().\");\n          var r = new So(e, n);\n          return e = r, null !== Oo(n = t) || null !== (t = Lo(n)) && sg(0, t, e.field), r;\n        }(t._query, this.Wc, this.Hc);\n\n        return new ap(t.firestore, t.converter, (t = t._query, e = t.explicitOrderBy.concat([e]), new Do(t.path, t.collectionGroup, e, t.filters.slice(), t.limit, t.limitType, t.startAt, t.endAt)));\n      }, eg),\n          Yy = (n(tg, Gy = Se), tg.prototype._apply = function (t) {\n        return new ap(t.firestore, t.converter, Vo(t._query, this.Jc, this.Yc));\n      }, tg),\n          Xy = (n(Zy, Ky = Se), Zy.prototype._apply = function (t) {\n        var e = rg(t, this.type, this.Xc, this.Zc);\n        return new ap(t.firestore, t.converter, (t = t._query, e = e, new Do(t.path, t.collectionGroup, t.explicitOrderBy.slice(), t.filters.slice(), t.limit, t.limitType, e, t.endAt)));\n      }, Zy),\n          $y = (n(Jy, jy = Se), Jy.prototype._apply = function (t) {\n        var e = rg(t, this.type, this.Xc, this.Zc);\n        return new ap(t.firestore, t.converter, (t = t._query, e = e, new Do(t.path, t.collectionGroup, t.explicitOrderBy.slice(), t.filters.slice(), t.limit, t.limitType, t.startAt, e)));\n      }, Jy);\n\n      function Jy(t, e, n) {\n        var r = this;\n        return (r = jy.call(this) || this).type = t, r.Xc = e, r.Zc = n, r;\n      }\n\n      function Zy(t, e, n) {\n        var r = this;\n        return (r = Ky.call(this) || this).type = t, r.Xc = e, r.Zc = n, r;\n      }\n\n      function tg(t, e, n) {\n        var r = this;\n        return (r = Gy.call(this) || this).type = t, r.Jc = e, r.Yc = n, r;\n      }\n\n      function eg(t, e) {\n        var n = this;\n        return (n = Qy.call(this) || this).Wc = t, n.Hc = e, n.type = \"orderBy\", n;\n      }\n\n      function ng(t, e, n) {\n        var r = this;\n        return (r = Hy.call(this) || this).Wc = t, r.Gc = e, r.zc = n, r.type = \"where\", r;\n      }\n\n      function rg(t, c, e, n) {\n        if (e[0] = v(e[0]), e[0] instanceof _y) return function (t, e, n, r) {\n          if (!n) throw new Vr(Fr.NOT_FOUND, \"Can't use a DocumentSnapshot that doesn't exist for \" + c + \"().\");\n\n          for (var i = [], o = 0, s = Mo(t); o < s.length; o++) {\n            var a = s[o];\n            if (a.field.isKeyField()) i.push(Pi(e, n.key));else {\n              var u = n.data.field(a.field);\n              if (Ti(u)) throw new Vr(Fr.INVALID_ARGUMENT, 'Invalid query. You are trying to start or end a query using a document for which the field \"' + a.field + '\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');\n\n              if (null === u) {\n                a = a.field.canonicalString();\n                throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. You are trying to start or end a query using a document for which the field '\" + a + \"' (used as the orderBy) does not exist.\");\n              }\n\n              i.push(u);\n            }\n          }\n\n          return new bo(i, r);\n        }(t._query, t.firestore._databaseId, e[0]._document, n);\n        var r = zp(t.firestore);\n        return function (t, e, n, r, i, o) {\n          var s = t.explicitOrderBy;\n          if (i.length > s.length) throw new Vr(Fr.INVALID_ARGUMENT, \"Too many arguments provided to \" + r + \"(). The number of arguments must be less than or equal to the number of orderBy() clauses\");\n\n          for (var a = [], u = 0; u < i.length; u++) {\n            var c = i[u];\n\n            if (s[u].field.isKeyField()) {\n              if (\"string\" != typeof c) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. Expected a string for document ID in \" + r + \"(), but got a \" + typeof c);\n              if (!Po(t) && -1 !== c.indexOf(\"/\")) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to \" + r + \"() must be a plain document ID, but '\" + c + \"' contains a slash.\");\n              var h = t.path.child(ui.fromString(c));\n              if (!Ni.isDocumentKey(h)) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to \" + r + \"() must result in a valid document path, but '\" + h + \"' is not because it contains an odd number of segments.\");\n              h = new Ni(h);\n              a.push(Pi(e, h));\n            } else {\n              c = dy(n, r, c);\n              a.push(c);\n            }\n          }\n\n          return new bo(a, o);\n        }(t._query, t.firestore._databaseId, r, c, e, n);\n      }\n\n      function ig(t, e, n) {\n        if (\"string\" == typeof (n = v(n))) {\n          if (\"\" === n) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.\");\n          if (!Po(e) && -1 !== n.indexOf(\"/\")) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '\" + n + \"' contains a '/' character.\");\n          e = e.path.child(ui.fromString(n));\n          if (!Ni.isDocumentKey(e)) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '\" + e + \"' is not because it has an odd number of segments (\" + e.length + \").\");\n          return Pi(t, new Ni(e));\n        }\n\n        if (n instanceof sp) return Pi(t, n._key);\n        throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: \" + tp(n) + \".\");\n      }\n\n      function og(t, e) {\n        if (!Array.isArray(t) || 0 === t.length) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid Query. A non-empty array is required for '\" + e.toString() + \"' filters.\");\n        if (10 < t.length) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid Query. '\" + e.toString() + \"' filters support a maximum of 10 elements in the value array.\");\n      }\n\n      function sg(t, e, n) {\n        if (!n.isEqual(e)) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '\" + e.toString() + \"' and so you must also use '\" + e.toString() + \"' as your first argument to orderBy(), but your first orderBy() is on field '\" + n.toString() + \"' instead.\");\n      }\n\n      ag.prototype.convertValue = function (t, e) {\n        switch (void 0 === e && (e = \"none\"), Ci(t)) {\n          case 0:\n            return null;\n\n          case 1:\n            return t.booleanValue;\n\n          case 2:\n            return wi(t.integerValue || t.doubleValue);\n\n          case 3:\n            return this.convertTimestamp(t.timestampValue);\n\n          case 4:\n            return this.convertServerTimestamp(t, e);\n\n          case 5:\n            return t.stringValue;\n\n          case 6:\n            return this.convertBytes(Ei(t.bytesValue));\n\n          case 7:\n            return this.convertReference(t.referenceValue);\n\n          case 8:\n            return this.convertGeoPoint(t.geoPointValue);\n\n          case 9:\n            return this.convertArray(t.arrayValue, e);\n\n          case 10:\n            return this.convertObject(t.mapValue, e);\n\n          default:\n            throw Hr();\n        }\n      }, ag.prototype.convertObject = function (t, n) {\n        var r = this,\n            i = {};\n        return ii(t.fields, function (t, e) {\n          i[t] = r.convertValue(e, n);\n        }), i;\n      }, ag.prototype.convertGeoPoint = function (t) {\n        return new Op(wi(t.latitude), wi(t.longitude));\n      }, ag.prototype.convertArray = function (t, e) {\n        var n = this;\n        return (t.values || []).map(function (t) {\n          return n.convertValue(t, e);\n        });\n      }, ag.prototype.convertServerTimestamp = function (t, e) {\n        switch (e) {\n          case \"previous\":\n            var n = function t(e) {\n              e = e.mapValue.fields.__previous_value__;\n              return Ti(e) ? t(e) : e;\n            }(t);\n\n            return null == n ? null : this.convertValue(n, e);\n\n          case \"estimate\":\n            return this.convertTimestamp(Ii(t));\n\n          default:\n            return null;\n        }\n      }, ag.prototype.convertTimestamp = function (t) {\n        t = bi(t);\n        return new Zr(t.seconds, t.nanos);\n      }, ag.prototype.convertDocumentKey = function (t, e) {\n        var n = ui.fromString(t);\n        zr(qa(n));\n        t = new Md(n.get(1), n.get(3)), n = new Ni(n.popFirst(5));\n        return t.isEqual(e) || Kr(\"Document \" + n + \" contains a document reference within a different database (\" + t.projectId + \"/\" + t.database + \") which is not supported. It will be treated as a reference in the current database (\" + e.projectId + \"/\" + e.database + \") instead.\"), n;\n      }, I = ag;\n\n      function ag() {}\n\n      function ug(t, e, n) {\n        return t ? n && (n.merge || n.mergeFields) ? t.toFirestore(e, n) : t.toFirestore(e) : e;\n      }\n\n      var cg,\n          hg = (n(dg, cg = I), dg.prototype.convertBytes = function (t) {\n        return new Rp(t);\n      }, dg.prototype.convertReference = function (t) {\n        t = this.convertDocumentKey(t, this.firestore._databaseId);\n        return new sp(this.firestore, null, t);\n      }, dg),\n          lg = (fg.prototype.set = function (t, e, n) {\n        this._verifyNotCommitted();\n\n        t = pg(t, this._firestore), e = ug(t.converter, e, n), n = Wp(this._dataReader, \"WriteBatch.set\", t._key, e, null !== t.converter, n);\n        return this._mutations.push(n.toMutation(t._key, fs.none())), this;\n      }, fg.prototype.update = function (t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        this._verifyNotCommitted();\n\n        t = pg(t, this._firestore), e = \"string\" == typeof (e = v(e)) || e instanceof kp ? fy(this._dataReader, \"WriteBatch.update\", t._key, e, n, r) : ly(this._dataReader, \"WriteBatch.update\", t._key, e);\n        return this._mutations.push(e.toMutation(t._key, fs.exists(!0))), this;\n      }, fg.prototype.delete = function (t) {\n        this._verifyNotCommitted();\n\n        t = pg(t, this._firestore);\n        return this._mutations = this._mutations.concat(new Rs(t._key, fs.none())), this;\n      }, fg.prototype.commit = function () {\n        return this._verifyNotCommitted(), this._committed = !0, 0 < this._mutations.length ? this._commitHandler(this._mutations) : Promise.resolve();\n      }, fg.prototype._verifyNotCommitted = function () {\n        if (this._committed) throw new Vr(Fr.FAILED_PRECONDITION, \"A write batch can no longer be used after commit() has been called.\");\n      }, fg);\n\n      function fg(t, e) {\n        this._firestore = t, this._commitHandler = e, this._mutations = [], this._committed = !1, this._dataReader = zp(t);\n      }\n\n      function dg(t) {\n        var e = this;\n        return (e = cg.call(this) || this).firestore = t, e;\n      }\n\n      function pg(t, e) {\n        if ((t = v(t)).firestore !== e) throw new Vr(Fr.INVALID_ARGUMENT, \"Provided document reference is from a different Firestore instance.\");\n        return t;\n      }\n\n      var yg,\n          gg = (n(mg, yg = I), mg.prototype.convertBytes = function (t) {\n        return new Rp(t);\n      }, mg.prototype.convertReference = function (t) {\n        t = this.convertDocumentKey(t, this.firestore._databaseId);\n        return new sp(this.firestore, null, t);\n      }, mg);\n\n      function mg(t) {\n        var e = this;\n        return (e = yg.call(this) || this).firestore = t, e;\n      }\n\n      function vg(t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        t = ep(t, sp);\n        var o = ep(t.firestore, Ip),\n            s = zp(o);\n        return wg(o, [(\"string\" == typeof (e = v(e)) || e instanceof kp ? fy(s, \"updateDoc\", t._key, e, n, r) : ly(s, \"updateDoc\", t._key, e)).toMutation(t._key, fs.exists(!0))]);\n      }\n\n      function bg(e) {\n        for (var n = [], t = 1; t < arguments.length; t++) {\n          n[t - 1] = arguments[t];\n        }\n\n        e = v(e);\n        var r = {\n          includeMetadataChanges: !1\n        },\n            i = 0;\n        \"object\" != typeof n[i] || wp(n[i]) || (r = n[i], i++);\n        var o,\n            s,\n            a,\n            u,\n            c,\n            h,\n            l = {\n          includeMetadataChanges: r.includeMetadataChanges\n        };\n        return wp(n[i]) && (o = n[i], n[i] = null === (r = o.next) || void 0 === r ? void 0 : r.bind(o), n[i + 1] = null === (r = o.error) || void 0 === r ? void 0 : r.bind(o), n[i + 2] = null === (r = o.complete) || void 0 === r ? void 0 : r.bind(o)), e instanceof sp ? (a = ep(e.firestore, Ip), u = ko(e._key.path), h = {\n          next: function next(t) {\n            n[i] && n[i](Eg(a, e, t));\n          },\n          error: n[i + 1],\n          complete: n[i + 2]\n        }) : (s = ep(e, ap), a = ep(s.firestore, Ip), u = s._query, c = new gg(a), h = {\n          next: function next(t) {\n            n[i] && n[i](new Ly(a, c, s, t));\n          },\n          error: n[i + 1],\n          complete: n[i + 2]\n        }, qy(e._query)), function (n, t, e) {\n          var r = this,\n              i = new dd(h),\n              o = new vf(t, i, e);\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(r, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = yf, [4, Rd(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), o])];\n                }\n              });\n            });\n          }), function () {\n            i.Wo(), n.asyncQueue.enqueueAndForget(function () {\n              return y(r, void 0, void 0, function () {\n                var e;\n                return g(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return e = gf, [4, Rd(n)];\n\n                    case 1:\n                      return [2, e.apply(void 0, [t.sent(), o])];\n                  }\n                });\n              });\n            });\n          };\n        }(Ap(a), u, l);\n      }\n\n      function wg(t, e) {\n        return function (n, r) {\n          var t = this,\n              i = new hu();\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = Mf, [4, kd(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), r, i])];\n                }\n              });\n            });\n          }), i.promise;\n        }(Ap(t), e);\n      }\n\n      function Eg(t, e, n) {\n        var r = n.docs.get(e._key),\n            i = new gg(t);\n        return new xy(t, i, e._key, r, new Ry(n.hasPendingWrites, n.fromCache), e.converter);\n      }\n\n      var Tg,\n          Ig = (Sg.prototype.get = function (t) {\n        var e = this,\n            n = pg(t, this._firestore),\n            r = new hg(this._firestore);\n        return this._transaction.lookup([n._key]).then(function (t) {\n          if (!t || 1 !== t.length) return Hr();\n          t = t[0];\n          if (t.isFoundDocument()) return new _y(e._firestore, r, t.key, t, n.converter);\n          if (t.isNoDocument()) return new _y(e._firestore, r, n._key, null, n.converter);\n          throw Hr();\n        });\n      }, Sg.prototype.set = function (t, e, n) {\n        t = pg(t, this._firestore), e = ug(t.converter, e, n), n = Wp(this._dataReader, \"Transaction.set\", t._key, e, null !== t.converter, n);\n        return this._transaction.set(t._key, n), this;\n      }, Sg.prototype.update = function (t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        t = pg(t, this._firestore), e = \"string\" == typeof (e = v(e)) || e instanceof kp ? fy(this._dataReader, \"Transaction.update\", t._key, e, n, r) : ly(this._dataReader, \"Transaction.update\", t._key, e);\n        return this._transaction.update(t._key, e), this;\n      }, Sg.prototype.delete = function (t) {\n        t = pg(t, this._firestore);\n        return this._transaction.delete(t._key), this;\n      }, n(_g, Tg = Sg), _g.prototype.get = function (t) {\n        var e = this,\n            n = pg(t, this._firestore),\n            r = new gg(this._firestore);\n        return Tg.prototype.get.call(this, t).then(function (t) {\n          return new xy(e._firestore, r, n._key, t._document, new Ry(!1, !1), n.converter);\n        });\n      }, _g);\n\n      function _g(t, e) {\n        var n = this;\n        return (n = Tg.call(this, t, e) || this)._firestore = t, n;\n      }\n\n      function Sg(t, e) {\n        this._firestore = t, this._transaction = e, this._dataReader = zp(t);\n      }\n\n      function Ag() {\n        if (\"undefined\" == typeof Uint8Array) throw new Vr(Fr.UNIMPLEMENTED, \"Uint8Arrays are not available in this environment.\");\n      }\n\n      function Ng() {\n        if (\"undefined\" == typeof atob) throw new Vr(Fr.UNIMPLEMENTED, \"Blobs are unavailable in Firestore in this environment.\");\n      }\n\n      var Dg,\n          Cg = (Mg.fromBase64String = function (t) {\n        return Ng(), new Mg(Rp.fromBase64String(t));\n      }, Mg.fromUint8Array = function (t) {\n        return Ag(), new Mg(Rp.fromUint8Array(t));\n      }, Mg.prototype.toBase64 = function () {\n        return Ng(), this._delegate.toBase64();\n      }, Mg.prototype.toUint8Array = function () {\n        return Ag(), this._delegate.toUint8Array();\n      }, Mg.prototype.isEqual = function (t) {\n        return this._delegate.isEqual(t._delegate);\n      }, Mg.prototype.toString = function () {\n        return \"Blob(base64: \" + this.toBase64() + \")\";\n      }, Mg),\n          kg = (Pg.prototype.enableIndexedDbPersistence = function (t, e) {\n        return function (t, e) {\n          Cp(t = ep(t, Ip));\n\n          var n = Ap(t),\n              r = t._freezeSettings(),\n              t = new ad();\n\n          return Dp(n, t, new od(t, r.cacheSizeBytes, null == e ? void 0 : e.forceOwnership));\n        }(t._delegate, {\n          forceOwnership: e\n        });\n      }, Pg.prototype.enableMultiTabIndexedDbPersistence = function (t) {\n        return function (t) {\n          Cp(t = ep(t, Ip));\n\n          var e = Ap(t),\n              n = t._freezeSettings(),\n              t = new ad();\n\n          return Dp(e, t, new sd(t, n.cacheSizeBytes));\n        }(t._delegate);\n      }, Pg.prototype.clearIndexedDbPersistence = function (t) {\n        return function (n) {\n          var t = this;\n          if (n._initialized && !n._terminated) throw new Vr(Fr.FAILED_PRECONDITION, \"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.\");\n          var r = new hu();\n          return n._queue.enqueueAndForgetEvenWhileRestricted(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return t.trys.push([0, 2,, 3]), [4, function (n) {\n                      return y(this, void 0, void 0, function () {\n                        var e;\n                        return g(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return du.yt() ? (e = n + \"main\", [4, du.delete(e)]) : [2, Promise.resolve()];\n\n                            case 1:\n                              return t.sent(), [2];\n                          }\n                        });\n                      });\n                    }(th(n._databaseId, n._persistenceKey))];\n\n                  case 1:\n                    return t.sent(), r.resolve(), [3, 3];\n\n                  case 2:\n                    return e = t.sent(), r.reject(e), [3, 3];\n\n                  case 3:\n                    return [2];\n                }\n              });\n            });\n          }), r.promise;\n        }(t._delegate);\n      }, Pg),\n          Rg = (Object.defineProperty(Lg.prototype, \"_databaseId\", {\n        get: function get() {\n          return this._delegate._databaseId;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Lg.prototype.settings = function (t) {\n        var e = this._delegate._getSettings();\n\n        t.merge || e.host === t.host || Gr(\"You are overriding the original host. If you did not intend to override your settings, use {merge: true}.\"), t.merge && delete (t = Object.assign(Object.assign({}, e), t)).merge, this._delegate._setSettings(t);\n      }, Lg.prototype.useEmulator = function (t, e, n) {\n        (function (t, e, n, r) {\n          void 0 === r && (r = {});\n\n          var i = (t = ep(t, op))._getSettings();\n\n          if (\"firestore.googleapis.com\" !== i.host && i.host !== e && Gr(\"Host has been set in both settings() and useEmulator(), emulator host will be used\"), t._setSettings(Object.assign(Object.assign({}, i), {\n            host: e + \":\" + n,\n            ssl: !1\n          })), r.mockUserToken) {\n            n = function (t, e) {\n              if (t.uid) throw new Error('The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.');\n              var n = e || \"demo-project\",\n                  r = t.iat || 0;\n              if (!(e = t.sub || t.user_id)) throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n              return t = _o2({\n                iss: \"https://securetoken.google.com/\" + n,\n                aud: n,\n                iat: r,\n                exp: r + 3600,\n                auth_time: r,\n                sub: e,\n                user_id: e,\n                firebase: {\n                  sign_in_provider: \"custom\",\n                  identities: {}\n                }\n              }, t), [a.encodeString(JSON.stringify({\n                alg: \"none\",\n                type: \"JWT\"\n              }), !1), a.encodeString(JSON.stringify(t), !1), \"\"].join(\".\");\n            }(r.mockUserToken), r = r.mockUserToken.sub || r.mockUserToken.user_id;\n            if (!r) throw new Vr(Fr.INVALID_ARGUMENT, \"mockUserToken must contain 'sub' or 'user_id' field!\");\n            t._credentials = new Ud(new Ld(n, new Lh(r)));\n          }\n        })(this._delegate, t, e, n = void 0 === n ? {} : n);\n      }, Lg.prototype.enableNetwork = function () {\n        return function (i) {\n          var t = this;\n          return i.asyncQueue.enqueue(function () {\n            return y(t, void 0, void 0, function () {\n              var n, r;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return [4, Nd(i)];\n\n                  case 1:\n                    return n = t.sent(), [4, Cd(i)];\n\n                  case 2:\n                    return r = t.sent(), [2, (n.setNetworkEnabled(!0), (e = r).Or.delete(0), Vl(e))];\n                }\n\n                var e;\n              });\n            });\n          });\n        }(Ap(ep(this._delegate, Ip)));\n      }, Lg.prototype.disableNetwork = function () {\n        return function (r) {\n          var t = this;\n          return r.asyncQueue.enqueue(function () {\n            return y(t, void 0, void 0, function () {\n              var e, n;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return [4, Nd(r)];\n\n                  case 1:\n                    return e = t.sent(), [4, Cd(r)];\n\n                  case 2:\n                    return n = t.sent(), [2, (e.setNetworkEnabled(!1), function (n) {\n                      return y(this, void 0, void 0, function () {\n                        var e;\n                        return g(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return (e = n).Or.add(0), [4, Ul(e)];\n\n                            case 1:\n                              return t.sent(), e.Br.set(\"Offline\"), [2];\n                          }\n                        });\n                      });\n                    }(n))];\n                }\n              });\n            });\n          });\n        }(Ap(ep(this._delegate, Ip)));\n      }, Lg.prototype.enablePersistence = function (t) {\n        var e = !1,\n            n = !1;\n        return t && $d(\"synchronizeTabs\", e = !!t.synchronizeTabs, \"experimentalForceOwningTab\", n = !!t.experimentalForceOwningTab), e ? this.tu.enableMultiTabIndexedDbPersistence(this) : this.tu.enableIndexedDbPersistence(this, n);\n      }, Lg.prototype.clearPersistence = function () {\n        return this.tu.clearIndexedDbPersistence(this);\n      }, Lg.prototype.terminate = function () {\n        return this.eu && (this.eu._removeServiceInstance(\"firestore\"), this.eu._removeServiceInstance(\"firestore-exp\")), this._delegate._delete();\n      }, Lg.prototype.waitForPendingWrites = function () {\n        return function (n) {\n          var t = this,\n              r = new hu();\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = qf, [4, kd(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), r])];\n                }\n              });\n            });\n          }), r.promise;\n        }(Ap(ep(this._delegate, Ip)));\n      }, Lg.prototype.onSnapshotsInSync = function (t) {\n        return e = this._delegate, t = t, function (n, t) {\n          var e = this,\n              r = new dd(t);\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(e, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = function e(t, _e3) {\n                      t.Gr.add(_e3), _e3.next();\n                    }, [4, Rd(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), r])];\n                }\n              });\n            });\n          }), function () {\n            r.Wo(), n.asyncQueue.enqueueAndForget(function () {\n              return y(e, void 0, void 0, function () {\n                var e;\n                return g(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return e = function e(t, _e4) {\n                        t.Gr.delete(_e4);\n                      }, [4, Rd(n)];\n\n                    case 1:\n                      return [2, e.apply(void 0, [t.sent(), r])];\n                  }\n                });\n              });\n            });\n          };\n        }(Ap(ep(e, Ip)), wp(t) ? t : {\n          next: t\n        });\n        var e;\n      }, Object.defineProperty(Lg.prototype, \"app\", {\n        get: function get() {\n          if (!this.eu) throw new Vr(Fr.FAILED_PRECONDITION, \"Firestore was not initialized using the Firebase SDK. 'app' is not available\");\n          return this.eu;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Lg.prototype.collection = function (t) {\n        try {\n          return new em(this, pp(this._delegate, t));\n        } catch (t) {\n          throw Qg(t, \"collection()\", \"Firestore.collection()\");\n        }\n      }, Lg.prototype.doc = function (t) {\n        try {\n          return new Kg(this, yp(this._delegate, t));\n        } catch (t) {\n          throw Qg(t, \"doc()\", \"Firestore.doc()\");\n        }\n      }, Lg.prototype.collectionGroup = function (t) {\n        try {\n          return new Jg(this, function (t, e) {\n            if (t = ep(t, op), Yd(\"collectionGroup\", \"collection id\", e), 0 <= e.indexOf(\"/\")) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid collection ID '\" + e + \"' passed to function collectionGroup(). Collection IDs must not contain '/'.\");\n            return new ap(t, null, (e = e, new Do(ui.emptyPath(), e)));\n          }(this._delegate, t));\n        } catch (t) {\n          throw Qg(t, \"collectionGroup()\", \"Firestore.collectionGroup()\");\n        }\n      }, Lg.prototype.runTransaction = function (e) {\n        var n,\n            r = this;\n        return function (n, r) {\n          var t = this,\n              i = new hu();\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return [4, Ad(n).then(function (t) {\n                      return t.datastore;\n                    })];\n\n                  case 1:\n                    return e = t.sent(), new gd(n.asyncQueue, e, r, i).run(), [2];\n                }\n              });\n            });\n          }), i.promise;\n        }(Ap(n = this._delegate), function (t) {\n          return t = new Ig(n, t), e(new Fg(r, t));\n        });\n      }, Lg.prototype.batch = function () {\n        var e = this;\n        return Ap(this._delegate), new Vg(new lg(this._delegate, function (t) {\n          return wg(e._delegate, t);\n        }));\n      }, Lg.prototype.loadBundle = function (t) {\n        throw new Vr(Fr.FAILED_PRECONDITION, '\"loadBundle()\" does not exist, have you imported \"firebase/firestore/bundle\"?');\n      }, Lg.prototype.namedQuery = function (t) {\n        throw new Vr(Fr.FAILED_PRECONDITION, '\"namedQuery()\" does not exist, have you imported \"firebase/firestore/bundle\"?');\n      }, Lg),\n          xg = (n(Og, Dg = I), Og.prototype.convertBytes = function (t) {\n        return new Cg(new Rp(t));\n      }, Og.prototype.convertReference = function (t) {\n        t = this.convertDocumentKey(t, this.firestore._databaseId);\n        return Kg.nu(t, this.firestore, null);\n      }, Og);\n\n      function Og(t) {\n        var e = this;\n        return (e = Dg.call(this) || this).firestore = t, e;\n      }\n\n      function Lg(t, e, n) {\n        var r = this;\n        this._delegate = e, this.tu = n, this.INTERNAL = {\n          delete: function _delete() {\n            return r.terminate();\n          }\n        }, t instanceof Md || (this.eu = t);\n      }\n\n      function Pg() {}\n\n      function Mg(t) {\n        this._delegate = t;\n      }\n\n      var Fg = (jg.prototype.get = function (t) {\n        var e = this,\n            n = um(t);\n        return this._delegate.get(n).then(function (t) {\n          return new Xg(e._firestore, new xy(e._firestore._delegate, e._userDataWriter, t._key, t._document, t.metadata, n.converter));\n        });\n      }, jg.prototype.set = function (t, e, n) {\n        t = um(t);\n        return n ? (Xd(\"Transaction.set\", n), this._delegate.set(t, e, n)) : this._delegate.set(t, e), this;\n      }, jg.prototype.update = function (t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        var o = um(t);\n        return 2 === arguments.length ? this._delegate.update(o, e) : (t = this._delegate).update.apply(t, s([o, e, n], r)), this;\n      }, jg.prototype.delete = function (t) {\n        t = um(t);\n        return this._delegate.delete(t), this;\n      }, jg),\n          Vg = (Bg.prototype.set = function (t, e, n) {\n        t = um(t);\n        return n ? (Xd(\"WriteBatch.set\", n), this._delegate.set(t, e, n)) : this._delegate.set(t, e), this;\n      }, Bg.prototype.update = function (t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        var o = um(t);\n        return 2 === arguments.length ? this._delegate.update(o, e) : (t = this._delegate).update.apply(t, s([o, e, n], r)), this;\n      }, Bg.prototype.delete = function (t) {\n        t = um(t);\n        return this._delegate.delete(t), this;\n      }, Bg.prototype.commit = function () {\n        return this._delegate.commit();\n      }, Bg),\n          Ug = (qg.prototype.fromFirestore = function (t, e) {\n        t = new Oy(this._firestore._delegate, this._userDataWriter, t._key, t._document, t.metadata, null);\n        return this._delegate.fromFirestore(new $g(this._firestore, t), null != e ? e : {});\n      }, qg.prototype.toFirestore = function (t, e) {\n        return e ? this._delegate.toFirestore(t, e) : this._delegate.toFirestore(t);\n      }, qg.su = function (t, e) {\n        var n = qg.iu,\n            r = n.get(t);\n        r || (r = new WeakMap(), n.set(t, r));\n        n = r.get(e);\n        return n || (n = new qg(t, new xg(t), e), r.set(e, n)), n;\n      }, qg);\n\n      function qg(t, e, n) {\n        this._firestore = t, this._userDataWriter = e, this._delegate = n;\n      }\n\n      function Bg(t) {\n        this._delegate = t;\n      }\n\n      function jg(t, e) {\n        this._firestore = t, this._delegate = e, this._userDataWriter = new xg(t);\n      }\n\n      Ug.iu = new WeakMap();\n      var Kg = (Gg.ru = function (t, e, n) {\n        if (t.length % 2 != 0) throw new Vr(Fr.INVALID_ARGUMENT, \"Invalid document reference. Document references must have an even number of segments, but \" + t.canonicalString() + \" has \" + t.length);\n        return new Gg(e, new sp(e._delegate, n, new Ni(t)));\n      }, Gg.nu = function (t, e, n) {\n        return new Gg(e, new sp(e._delegate, n, t));\n      }, Object.defineProperty(Gg.prototype, \"id\", {\n        get: function get() {\n          return this._delegate.id;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Gg.prototype, \"parent\", {\n        get: function get() {\n          return new em(this.firestore, this._delegate.parent);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Gg.prototype, \"path\", {\n        get: function get() {\n          return this._delegate.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Gg.prototype.collection = function (t) {\n        try {\n          return new em(this.firestore, pp(this._delegate, t));\n        } catch (t) {\n          throw Qg(t, \"collection()\", \"DocumentReference.collection()\");\n        }\n      }, Gg.prototype.isEqual = function (t) {\n        return (t = v(t)) instanceof sp && gp(this._delegate, t);\n      }, Gg.prototype.set = function (t, e) {\n        e = Xd(\"DocumentReference.set\", e);\n\n        try {\n          return function (t, e, n) {\n            t = ep(t, sp);\n            var r = ep(t.firestore, Ip),\n                e = ug(t.converter, e, n);\n            return wg(r, [Wp(zp(r), \"setDoc\", t._key, e, null !== t.converter, n).toMutation(t._key, fs.none())]);\n          }(this._delegate, t, e);\n        } catch (t) {\n          throw Qg(t, \"setDoc()\", \"DocumentReference.set()\");\n        }\n      }, Gg.prototype.update = function (t, e) {\n        for (var n = [], r = 2; r < arguments.length; r++) {\n          n[r - 2] = arguments[r];\n        }\n\n        try {\n          return 1 === arguments.length ? vg(this._delegate, t) : vg.apply(void 0, s([this._delegate, t, e], n));\n        } catch (t) {\n          throw Qg(t, \"updateDoc()\", \"DocumentReference.update()\");\n        }\n      }, Gg.prototype.delete = function () {\n        return wg(ep((t = this._delegate).firestore, Ip), [new Rs(t._key, fs.none())]);\n        var t;\n      }, Gg.prototype.onSnapshot = function () {\n        for (var e = this, t = [], n = 0; n < arguments.length; n++) {\n          t[n] = arguments[n];\n        }\n\n        var r = Hg(t),\n            i = zg(t, function (t) {\n          return new Xg(e.firestore, new xy(e.firestore._delegate, e._userDataWriter, t._key, t._document, t.metadata, e._delegate.converter));\n        });\n        return bg(this._delegate, r, i);\n      }, Gg.prototype.get = function (t) {\n        var e = this;\n        return (\"cache\" === (null == t ? void 0 : t.source) ? function (e) {\n          e = ep(e, sp);\n          var n = ep(e.firestore, Ip),\n              t = Ap(n),\n              r = new gg(n);\n          return function (n, r) {\n            var t = this,\n                i = new hu();\n            return n.asyncQueue.enqueueAndForget(function () {\n              return y(t, void 0, void 0, function () {\n                var e;\n                return g(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return e = function e(o, s, a) {\n                        return y(this, void 0, void 0, function () {\n                          var r, i;\n                          return g(this, function (t) {\n                            switch (t.label) {\n                              case 0:\n                                return t.trys.push([0, 2,, 3]), [4, (e = s, (n = o).persistence.runTransaction(\"read document\", \"readonly\", function (t) {\n                                  return n.Mn.mn(t, e);\n                                }))];\n\n                              case 1:\n                                return (i = t.sent()).isFoundDocument() ? a.resolve(i) : i.isNoDocument() ? a.resolve(null) : a.reject(new Vr(Fr.UNAVAILABLE, \"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)\")), [3, 3];\n\n                              case 2:\n                                return r = t.sent(), i = sf(r, \"Failed to get document '\" + s + \" from cache\"), a.reject(i), [3, 3];\n\n                              case 3:\n                                return [2];\n                            }\n\n                            var e, n;\n                          });\n                        });\n                      }, [4, Dd(n)];\n\n                    case 1:\n                      return [2, e.apply(void 0, [t.sent(), r, i])];\n                  }\n                });\n              });\n            }), i.promise;\n          }(t, e._key).then(function (t) {\n            return new xy(n, r, e._key, t, new Ry(null !== t && t.hasLocalMutations, !0), e.converter);\n          });\n        } : \"server\" === (null == t ? void 0 : t.source) ? function (e) {\n          e = ep(e, sp);\n          var n = ep(e.firestore, Ip);\n          return xd(Ap(n), e._key, {\n            source: \"server\"\n          }).then(function (t) {\n            return Eg(n, e, t);\n          });\n        } : function (e) {\n          e = ep(e, sp);\n          var n = ep(e.firestore, Ip);\n          return xd(Ap(n), e._key).then(function (t) {\n            return Eg(n, e, t);\n          });\n        })(this._delegate).then(function (t) {\n          return new Xg(e.firestore, new xy(e.firestore._delegate, e._userDataWriter, t._key, t._document, t.metadata, e._delegate.converter));\n        });\n      }, Gg.prototype.withConverter = function (t) {\n        return new Gg(this.firestore, t ? this._delegate.withConverter(Ug.su(this.firestore, t)) : this._delegate.withConverter(null));\n      }, Gg);\n\n      function Gg(t, e) {\n        this.firestore = t, this._delegate = e, this._userDataWriter = new xg(t);\n      }\n\n      function Qg(t, e, n) {\n        return t.message = t.message.replace(e, n), t;\n      }\n\n      function Hg(t) {\n        for (var e = 0, n = t; e < n.length; e++) {\n          var r = n[e];\n          if (\"object\" == typeof r && !wp(r)) return r;\n        }\n\n        return {};\n      }\n\n      function zg(t, e) {\n        var n;\n        return {\n          next: function next(t) {\n            n.next && n.next(e(t));\n          },\n          error: null === (t = (n = wp(t[0]) ? t[0] : wp(t[1]) ? t[1] : \"function\" == typeof t[0] ? {\n            next: t[0],\n            error: t[1],\n            complete: t[2]\n          } : {\n            next: t[1],\n            error: t[2],\n            complete: t[3]\n          }).error) || void 0 === t ? void 0 : t.bind(n),\n          complete: null === (t = n.complete) || void 0 === t ? void 0 : t.bind(n)\n        };\n      }\n\n      var Wg,\n          Yg,\n          Xg = (Object.defineProperty(am.prototype, \"ref\", {\n        get: function get() {\n          return new Kg(this._firestore, this._delegate.ref);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(am.prototype, \"id\", {\n        get: function get() {\n          return this._delegate.id;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(am.prototype, \"metadata\", {\n        get: function get() {\n          return this._delegate.metadata;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(am.prototype, \"exists\", {\n        get: function get() {\n          return this._delegate.exists();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), am.prototype.data = function (t) {\n        return this._delegate.data(t);\n      }, am.prototype.get = function (t, e) {\n        return this._delegate.get(t, e);\n      }, am.prototype.isEqual = function (t) {\n        return Uy(this._delegate, t._delegate);\n      }, am),\n          $g = (n(sm, Yg = Xg), sm.prototype.data = function (t) {\n        return this._delegate.data(t);\n      }, sm),\n          Jg = (om.prototype.where = function (t, e, n) {\n        try {\n          return new om(this.firestore, By(this._delegate, (r = n, i = e, o = Dy(\"where\", t), new zy(o, i, r))));\n        } catch (t) {\n          throw Qg(t, /(orderBy|where)\\(\\)/, \"Query.$1()\");\n        }\n\n        var r, i, o;\n      }, om.prototype.orderBy = function (t, e) {\n        try {\n          return new om(this.firestore, By(this._delegate, (n = void 0 === e ? \"asc\" : e, r = Dy(\"orderBy\", t), new Wy(r, n))));\n        } catch (t) {\n          throw Qg(t, /(orderBy|where)\\(\\)/, \"Query.$1()\");\n        }\n\n        var n, r;\n      }, om.prototype.limit = function (t) {\n        try {\n          return new om(this.firestore, By(this._delegate, (np(\"limit\", e = t), new Yy(\"limit\", e, \"F\"))));\n        } catch (t) {\n          throw Qg(t, \"limit()\", \"Query.limit()\");\n        }\n\n        var e;\n      }, om.prototype.limitToLast = function (t) {\n        try {\n          return new om(this.firestore, By(this._delegate, (np(\"limitToLast\", e = t), new Yy(\"limitToLast\", e, \"L\"))));\n        } catch (t) {\n          throw Qg(t, \"limitToLast()\", \"Query.limitToLast()\");\n        }\n\n        var e;\n      }, om.prototype.startAt = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        try {\n          return new om(this.firestore, By(this._delegate, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            return new Xy(\"startAt\", t, !0);\n          }.apply(void 0, t)));\n        } catch (t) {\n          throw Qg(t, \"startAt()\", \"Query.startAt()\");\n        }\n      }, om.prototype.startAfter = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        try {\n          return new om(this.firestore, By(this._delegate, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            return new Xy(\"startAfter\", t, !1);\n          }.apply(void 0, t)));\n        } catch (t) {\n          throw Qg(t, \"startAfter()\", \"Query.startAfter()\");\n        }\n      }, om.prototype.endBefore = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        try {\n          return new om(this.firestore, By(this._delegate, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            return new $y(\"endBefore\", t, !0);\n          }.apply(void 0, t)));\n        } catch (t) {\n          throw Qg(t, \"endBefore()\", \"Query.endBefore()\");\n        }\n      }, om.prototype.endAt = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        try {\n          return new om(this.firestore, By(this._delegate, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            return new $y(\"endAt\", t, !1);\n          }.apply(void 0, t)));\n        } catch (t) {\n          throw Qg(t, \"endAt()\", \"Query.endAt()\");\n        }\n      }, om.prototype.isEqual = function (t) {\n        return mp(this._delegate, t._delegate);\n      }, om.prototype.get = function (t) {\n        var e = this;\n        return (\"cache\" === (null == t ? void 0 : t.source) ? function (e) {\n          e = ep(e, ap);\n          var n = ep(e.firestore, Ip),\n              t = Ap(n),\n              r = new gg(n);\n          return function (n, r) {\n            var t = this,\n                i = new hu();\n            return n.asyncQueue.enqueueAndForget(function () {\n              return y(t, void 0, void 0, function () {\n                var e;\n                return g(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return e = function e(i, o, s) {\n                        return y(this, void 0, void 0, function () {\n                          var e, n, r;\n                          return g(this, function (t) {\n                            switch (t.label) {\n                              case 0:\n                                return t.trys.push([0, 2,, 3]), [4, vh(i, o, !0)];\n\n                              case 1:\n                                return r = t.sent(), e = new Cf(o, r.Bn), n = e._o(r.documents), n = e.applyChanges(n, !1), s.resolve(n.snapshot), [3, 3];\n\n                              case 2:\n                                return n = t.sent(), r = sf(n, \"Failed to execute query '\" + o + \" against cache\"), s.reject(r), [3, 3];\n\n                              case 3:\n                                return [2];\n                            }\n                          });\n                        });\n                      }, [4, Dd(n)];\n\n                    case 1:\n                      return [2, e.apply(void 0, [t.sent(), r, i])];\n                  }\n                });\n              });\n            }), i.promise;\n          }(t, e._query).then(function (t) {\n            return new Ly(n, r, e, t);\n          });\n        } : \"server\" === (null == t ? void 0 : t.source) ? function (e) {\n          e = ep(e, ap);\n          var n = ep(e.firestore, Ip),\n              t = Ap(n),\n              r = new gg(n);\n          return Od(t, e._query, {\n            source: \"server\"\n          }).then(function (t) {\n            return new Ly(n, r, e, t);\n          });\n        } : function (e) {\n          e = ep(e, ap);\n          var n = ep(e.firestore, Ip),\n              t = Ap(n),\n              r = new gg(n);\n          return qy(e._query), Od(t, e._query).then(function (t) {\n            return new Ly(n, r, e, t);\n          });\n        })(this._delegate).then(function (t) {\n          return new tm(e.firestore, new Ly(e.firestore._delegate, e._userDataWriter, e._delegate, t._snapshot));\n        });\n      }, om.prototype.onSnapshot = function () {\n        for (var e = this, t = [], n = 0; n < arguments.length; n++) {\n          t[n] = arguments[n];\n        }\n\n        var r = Hg(t),\n            i = zg(t, function (t) {\n          return new tm(e.firestore, new Ly(e.firestore._delegate, e._userDataWriter, e._delegate, t._snapshot));\n        });\n        return bg(this._delegate, r, i);\n      }, om.prototype.withConverter = function (t) {\n        return new om(this.firestore, t ? this._delegate.withConverter(Ug.su(this.firestore, t)) : this._delegate.withConverter(null));\n      }, om),\n          Zg = (Object.defineProperty(im.prototype, \"type\", {\n        get: function get() {\n          return this._delegate.type;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(im.prototype, \"doc\", {\n        get: function get() {\n          return new $g(this._firestore, this._delegate.doc);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(im.prototype, \"oldIndex\", {\n        get: function get() {\n          return this._delegate.oldIndex;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(im.prototype, \"newIndex\", {\n        get: function get() {\n          return this._delegate.newIndex;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), im),\n          tm = (Object.defineProperty(rm.prototype, \"query\", {\n        get: function get() {\n          return new Jg(this._firestore, this._delegate.query);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(rm.prototype, \"metadata\", {\n        get: function get() {\n          return this._delegate.metadata;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(rm.prototype, \"size\", {\n        get: function get() {\n          return this._delegate.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(rm.prototype, \"empty\", {\n        get: function get() {\n          return this._delegate.empty;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(rm.prototype, \"docs\", {\n        get: function get() {\n          var e = this;\n          return this._delegate.docs.map(function (t) {\n            return new $g(e._firestore, t);\n          });\n        },\n        enumerable: !1,\n        configurable: !0\n      }), rm.prototype.docChanges = function (t) {\n        var e = this;\n        return this._delegate.docChanges(t).map(function (t) {\n          return new Zg(e._firestore, t);\n        });\n      }, rm.prototype.forEach = function (e, n) {\n        var r = this;\n\n        this._delegate.forEach(function (t) {\n          e.call(n, new $g(r._firestore, t));\n        });\n      }, rm.prototype.isEqual = function (t) {\n        return Uy(this._delegate, t._delegate);\n      }, rm),\n          em = (n(nm, Wg = Jg), Object.defineProperty(nm.prototype, \"id\", {\n        get: function get() {\n          return this._delegate.id;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(nm.prototype, \"path\", {\n        get: function get() {\n          return this._delegate.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(nm.prototype, \"parent\", {\n        get: function get() {\n          var t = this._delegate.parent;\n          return t ? new Kg(this.firestore, t) : null;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), nm.prototype.doc = function (t) {\n        try {\n          return new Kg(this.firestore, void 0 === t ? yp(this._delegate) : yp(this._delegate, t));\n        } catch (t) {\n          throw Qg(t, \"doc()\", \"CollectionReference.doc()\");\n        }\n      }, nm.prototype.add = function (t) {\n        var e,\n            n,\n            r,\n            i = this;\n        return e = this._delegate, n = t, t = ep(e.firestore, Ip), r = yp(e), n = ug(e.converter, n), wg(t, [Wp(zp(e.firestore), \"addDoc\", r._key, n, null !== e.converter, {}).toMutation(r._key, fs.exists(!1))]).then(function () {\n          return r;\n        }).then(function (t) {\n          return new Kg(i.firestore, t);\n        });\n      }, nm.prototype.isEqual = function (t) {\n        return gp(this._delegate, t._delegate);\n      }, nm.prototype.withConverter = function (t) {\n        return new nm(this.firestore, t ? this._delegate.withConverter(Ug.su(this.firestore, t)) : this._delegate.withConverter(null));\n      }, nm);\n\n      function nm(t, e) {\n        var n = this;\n        return (n = Wg.call(this, t, e) || this).firestore = t, n._delegate = e, n;\n      }\n\n      function rm(t, e) {\n        this._firestore = t, this._delegate = e;\n      }\n\n      function im(t, e) {\n        this._firestore = t, this._delegate = e;\n      }\n\n      function om(t, e) {\n        this.firestore = t, this._delegate = e, this._userDataWriter = new xg(t);\n      }\n\n      function sm() {\n        return null !== Yg && Yg.apply(this, arguments) || this;\n      }\n\n      function am(t, e) {\n        this._firestore = t, this._delegate = e;\n      }\n\n      function um(t) {\n        return ep(t, sp);\n      }\n\n      hm.documentId = function () {\n        return new hm(hi.keyField().canonicalString());\n      }, hm.prototype.isEqual = function (t) {\n        return (t = v(t)) instanceof kp && this._delegate._internalPath.isEqual(t._internalPath);\n      }, Se = hm, cm.serverTimestamp = function () {\n        var t = new ry(\"serverTimestamp\");\n        return t._methodName = \"FieldValue.serverTimestamp\", new cm(t);\n      }, cm.delete = function () {\n        var t = new Xp(\"deleteField\");\n        return t._methodName = \"FieldValue.delete\", new cm(t);\n      }, cm.arrayUnion = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        var n = function () {\n          for (var t = [], e = 0; e < arguments.length; e++) {\n            t[e] = arguments[e];\n          }\n\n          return new iy(\"arrayUnion\", t);\n        }.apply(void 0, t);\n\n        return n._methodName = \"FieldValue.arrayUnion\", new cm(n);\n      }, cm.arrayRemove = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        var n = function () {\n          for (var t = [], e = 0; e < arguments.length; e++) {\n            t[e] = arguments[e];\n          }\n\n          return new oy(\"arrayRemove\", t);\n        }.apply(void 0, t);\n\n        return n._methodName = \"FieldValue.arrayRemove\", new cm(n);\n      }, cm.increment = function (t) {\n        t = new sy(\"increment\", t);\n        return t._methodName = \"FieldValue.increment\", new cm(t);\n      }, cm.prototype.isEqual = function (t) {\n        return this._delegate.isEqual(t._delegate);\n      }, I = cm;\n\n      function cm(t) {\n        this._delegate = t;\n      }\n\n      function hm() {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._delegate = new (kp.bind.apply(kp, s([void 0], t)))();\n      }\n\n      function lm(t) {\n        return e = this._delegate, s = t, n = Ap(e = ep(e, Ip)), t = new Tp(), function (n, t, r) {\n          var e,\n              i = this,\n              o = (e = s, t = Tl(t), e = function (t) {\n            if (t instanceof Uint8Array) return fd(t, void 0);\n            if (t instanceof ArrayBuffer) return fd(new Uint8Array(t), void 0);\n            if (t instanceof ReadableStream) return t.getReader();\n            throw new Error(\"Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream\");\n          }(\"string\" == typeof e ? new TextEncoder().encode(e) : e), new pd(e, t));\n          n.asyncQueue.enqueueAndForget(function () {\n            return y(i, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = ed, [4, kd(n)];\n\n                  case 1:\n                    return e.apply(void 0, [t.sent(), o, r]), [2];\n                }\n              });\n            });\n          });\n        }(n, e._databaseId, t), t;\n        var e, s, n;\n      }\n\n      function fm(t) {\n        var e = this,\n            n = this._delegate,\n            t = t;\n        return function (n, r) {\n          var t = this;\n          return n.asyncQueue.enqueue(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = function e(t, _e5) {\n                      var n = t;\n                      return n.persistence.runTransaction(\"Get named query\", \"readonly\", function (t) {\n                        return n.Qe.getNamedQuery(t, _e5);\n                      });\n                    }, [4, Dd(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), r])];\n                }\n              });\n            });\n          });\n        }(Ap(n = ep(n, Ip)), t).then(function (t) {\n          return t ? new ap(n, null, t.query) : null;\n        }).then(function (t) {\n          return t ? new Jg(e, t) : null;\n        });\n      }\n\n      var dm = (pm.prototype.setInstantiationMode = function (t) {\n        return this.instantiationMode = t, this;\n      }, pm.prototype.setMultipleInstances = function (t) {\n        return this.multipleInstances = t, this;\n      }, pm.prototype.setServiceProps = function (t) {\n        return this.serviceProps = t, this;\n      }, pm.prototype.setInstanceCreatedCallback = function (t) {\n        return this.onInstanceCreated = t, this;\n      }, pm);\n\n      function pm(t, e, n) {\n        this.name = t, this.instanceFactory = e, this.type = n, this.multipleInstances = !1, this.serviceProps = {}, this.instantiationMode = \"LAZY\", this.onInstanceCreated = null;\n      }\n\n      var ym,\n          gm,\n          mm = {\n        Firestore: Rg,\n        GeoPoint: Op,\n        Timestamp: Zr,\n        Blob: Cg,\n        Transaction: Fg,\n        WriteBatch: Vg,\n        DocumentReference: Kg,\n        DocumentSnapshot: Xg,\n        Query: Jg,\n        QueryDocumentSnapshot: $g,\n        QuerySnapshot: tm,\n        CollectionReference: em,\n        FieldPath: Se,\n        FieldValue: I,\n        setLogLevel: function setLogLevel(t) {\n          Ur.setLogLevel(t);\n        },\n        CACHE_SIZE_UNLIMITED: -1\n      };\n      (ym = e.default).INTERNAL.registerComponent(new dm(\"firestore\", function (t) {\n        var e = t.getProvider(\"app\").getImmediate();\n        return e = e, t = t.getProvider(\"auth-internal\"), new Rg(e, new Ip(e, t), new kg());\n      }, \"PUBLIC\").setServiceProps(Object.assign({}, mm))), ym.registerVersion(\"@firebase/firestore\", \"2.3.4\"), (gm = Rg).prototype.loadBundle = lm, gm.prototype.namedQuery = fm;\n    }.apply(this, arguments);\n  } catch (t) {\n    throw console.error(t), new Error(\"Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.\");\n  }\n});","map":null,"metadata":{},"sourceType":"script"}