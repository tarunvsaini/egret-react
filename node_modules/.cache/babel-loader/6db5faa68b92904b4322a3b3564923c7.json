{"ast":null,"code":"import _toConsumableArray from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/tarunsaini/Projects/arctic-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/tarunsaini/Projects/arctic-admin/react/src/app/views/ecommerce/Shop.jsx\";\nimport React, { Component } from \"react\";\nimport { EgretSidenavContainer, EgretSidenav, EgretSidenavContent } from \"egret\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { getProductList, getCategoryList, getRatingList, getBrandList } from \"app/redux/actions/EcommerceActions\";\nimport * as _ from \"lodash\";\nimport ShopSidenav from \"./ShopSidenav\";\nimport ShopContainer from \"./ShopContainer\";\n\nvar Shop = /*#__PURE__*/function (_Component) {\n  _inherits(Shop, _Component);\n\n  var _super = _createSuper(Shop);\n\n  function Shop() {\n    var _this;\n\n    _classCallCheck(this, Shop);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.categories = [];\n    _this.brands = [];\n    _this.state = {\n      open: true,\n      view: \"grid\",\n      page: 0,\n      rowsPerPage: 6,\n      orderBy: \"false\",\n      propsReceived: false,\n      sliderRange: [0, 100],\n      query: \"\",\n      multilevel: \"all\",\n      shipping: false,\n      categories: [],\n      brands: []\n    };\n\n    _this.toggleSidenav = function () {\n      _this.setState({\n        open: !_this.state.open\n      });\n    };\n\n    _this.handleSliderChange = function (event, newValue) {\n      _this.setState({\n        sliderRange: newValue\n      });\n\n      _this.filterProductOnPriceRange(newValue[0] * 10, newValue[1] * 10);\n    };\n\n    _this.setRowsPerPage = function (event) {\n      _this.setState({\n        rowsPerPage: event.target.value\n      });\n    };\n\n    _this.handleChangePage = function (event, newPage) {\n      _this.setState({\n        page: newPage\n      });\n    };\n\n    _this.toggleView = function (view) {\n      return _this.setState({\n        view: view\n      });\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.handleSearch = function (query) {\n      var _this$props$productLi = _this.props.productList,\n          productList = _this$props$productLi === void 0 ? [] : _this$props$productLi;\n\n      _this.setState({\n        query: query\n      });\n\n      if (_this.debounceTimer) {\n        clearTimeout(_this.debounceTimer);\n      }\n\n      _this.debounceTimer = setTimeout(function () {\n        _this.setState({\n          productList: productList.filter(function (product) {\n            return product.title.toLowerCase().match(_this.state.query.toLowerCase());\n          })\n        });\n      }, 250);\n    };\n\n    _this.handleMultilevelChange = function (event) {\n      var eventValue = event.target.value;\n      var range = event.target.value.split(\",\");\n      var _this$props$productLi2 = _this.props.productList,\n          productList = _this$props$productLi2 === void 0 ? [] : _this$props$productLi2;\n\n      if (eventValue === \"all\") {\n        _this.setState({\n          multilevel: eventValue,\n          productList: productList\n        });\n\n        return;\n      }\n\n      _this.setState({\n        multilevel: eventValue\n      });\n\n      range = range.map(function (value) {\n        return parseInt(value);\n      });\n\n      if (range.length === 2) {\n        _this.filterProductOnPriceRange(range[0], range[1]);\n      } else {\n        _this.setState({\n          productList: productList.filter(function (product) {\n            return product.price >= range[0];\n          })\n        });\n      }\n    };\n\n    _this.handleCategoryChange = function (event) {\n      var target = event.target;\n      var categories = _this.state.categories;\n      var tempCategories;\n\n      if (target.checked) {\n        tempCategories = [].concat(_toConsumableArray(categories), [target.name]);\n\n        _this.setState({\n          categories: tempCategories,\n          productList: _this.filterProductOnProperty(\"category\", tempCategories)\n        });\n      } else {\n        tempCategories = categories.filter(function (item) {\n          return item !== target.name;\n        });\n\n        _this.setState({\n          categories: tempCategories,\n          productList: _this.filterProductOnProperty(\"category\", tempCategories)\n        });\n      }\n    };\n\n    _this.handleBrandChange = function (event) {\n      var target = event.target;\n      var brands = _this.state.brands;\n      var tempBrands;\n\n      if (target.checked) {\n        tempBrands = [].concat(_toConsumableArray(brands), [target.name]);\n\n        _this.setState({\n          brands: tempBrands,\n          productList: _this.filterProductOnProperty(\"brand\", tempBrands)\n        });\n      } else {\n        tempBrands = brands.filter(function (item) {\n          return item !== target.name;\n        });\n\n        _this.setState({\n          brands: tempBrands,\n          productList: _this.filterProductOnProperty(\"brand\", tempBrands)\n        });\n      }\n    };\n\n    _this.handleRatingClick = function (rate) {\n      _this.setState({\n        productList: _this.filterProductOnProperty(\"rating\", [rate])\n      });\n    };\n\n    _this.handleFreeShippingClick = function () {\n      var shippingStatus = !_this.state.shipping;\n\n      _this.setState({\n        shipping: shippingStatus,\n        productList: _this.filterProductOnProperty(\"freeShipping\", [shippingStatus])\n      });\n    };\n\n    _this.filterProductOnProperty = function (property) {\n      var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var _this$props$productLi3 = _this.props.productList,\n          productList = _this$props$productLi3 === void 0 ? [] : _this$props$productLi3;\n\n      if (value.length === 0) {\n        return productList;\n      }\n\n      return productList.filter(function (product) {\n        return value.includes(product[property]);\n      });\n    };\n\n    _this.filterProductOnPriceRange = function (lowestPrice, highestPrice) {\n      var _this$props$productLi4 = _this.props.productList,\n          productList = _this$props$productLi4 === void 0 ? [] : _this$props$productLi4;\n\n      _this.setState({\n        productList: productList.filter(function (product) {\n          return product.price >= lowestPrice && product.price <= highestPrice;\n        })\n      });\n    };\n\n    _this.handleClearAllFilter = function () {\n      _this.setState({\n        sliderRange: [0, 100],\n        query: \"\",\n        multilevel: \"all\",\n        shipping: false,\n        categories: [],\n        brands: [],\n        productList: _this.props.productList\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Shop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getProductList();\n      this.props.getCategoryList();\n      this.props.getRatingList();\n      this.props.getBrandList();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.debounceTimer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          _this$state$productLi = _this$state.productList,\n          productList = _this$state$productLi === void 0 ? [] : _this$state$productLi,\n          brands = _this$state.brands,\n          categories = _this$state.categories,\n          sliderRange = _this$state.sliderRange,\n          view = _this$state.view,\n          page = _this$state.page,\n          rowsPerPage = _this$state.rowsPerPage,\n          orderBy = _this$state.orderBy,\n          query = _this$state.query,\n          multilevel = _this$state.multilevel,\n          shipping = _this$state.shipping;\n      var _this$props = this.props,\n          _this$props$categoryL = _this$props.categoryList,\n          categoryList = _this$props$categoryL === void 0 ? [] : _this$props$categoryL,\n          _this$props$ratingLis = _this$props.ratingList,\n          ratingList = _this$props$ratingLis === void 0 ? [] : _this$props$ratingLis,\n          _this$props$brandList = _this$props.brandList,\n          brandList = _this$props$brandList === void 0 ? [] : _this$props$brandList;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"shop m-sm-30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(EgretSidenavContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(EgretSidenav, {\n        width: \"288px\",\n        open: this.state.open,\n        toggleSidenav: this.toggleSidenav,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(ShopSidenav, {\n        query: query,\n        categories: categories,\n        brands: brands,\n        multilevel: multilevel,\n        categoryList: categoryList,\n        brandList: brandList,\n        ratingList: ratingList,\n        shipping: shipping,\n        sliderRange: sliderRange,\n        toggleSidenav: this.toggleSidenav,\n        handleSearch: this.handleSearch,\n        handleMultilevelChange: this.handleMultilevelChange,\n        handleSliderChange: this.handleSliderChange,\n        handleCategoryChange: this.handleCategoryChange,\n        handleBrandChange: this.handleBrandChange,\n        handleRatingClick: this.handleRatingClick,\n        handleFreeShippingClick: this.handleFreeShippingClick,\n        handleClearAllFilter: this.handleClearAllFilter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(EgretSidenavContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(ShopContainer, {\n        orderBy: orderBy,\n        view: view,\n        productList: productList,\n        page: page,\n        rowsPerPage: rowsPerPage,\n        toggleView: this.toggleView,\n        toggleSidenav: this.toggleSidenav,\n        handleChange: this.handleChange,\n        handleChangePage: this.handleChangePage,\n        setRowsPerPage: this.setRowsPerPage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var _nextProps$productLis = nextProps.productList,\n          productList = _nextProps$productLis === void 0 ? [] : _nextProps$productLis;\n\n      if (prevState.propsReceived) {\n        return {};\n      } else if (!prevState.propsReceived && productList.length > 0) return {\n        propsReceived: true,\n        productList: productList\n      };else return {};\n    }\n  }]);\n\n  return Shop;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    getProductList: PropTypes.func.isRequired,\n    getRatingList: PropTypes.func.isRequired,\n    getBrandList: PropTypes.func.isRequired,\n    productList: state.ecommerce.productList,\n    categoryList: state.ecommerce.categoryList,\n    ratingList: state.ecommerce.ratingList,\n    brandList: state.ecommerce.brandList\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getProductList: getProductList,\n  getCategoryList: getCategoryList,\n  getRatingList: getRatingList,\n  getBrandList: getBrandList\n})(Shop);","map":{"version":3,"sources":["/Users/tarunsaini/Projects/arctic-admin/react/src/app/views/ecommerce/Shop.jsx"],"names":["React","Component","EgretSidenavContainer","EgretSidenav","EgretSidenavContent","connect","PropTypes","getProductList","getCategoryList","getRatingList","getBrandList","_","ShopSidenav","ShopContainer","Shop","categories","brands","state","open","view","page","rowsPerPage","orderBy","propsReceived","sliderRange","query","multilevel","shipping","toggleSidenav","setState","handleSliderChange","event","newValue","filterProductOnPriceRange","setRowsPerPage","target","value","handleChangePage","newPage","toggleView","handleChange","name","handleSearch","props","productList","debounceTimer","clearTimeout","setTimeout","filter","product","title","toLowerCase","match","handleMultilevelChange","eventValue","range","split","map","parseInt","length","price","handleCategoryChange","tempCategories","checked","filterProductOnProperty","item","handleBrandChange","tempBrands","handleRatingClick","rate","handleFreeShippingClick","shippingStatus","property","includes","lowestPrice","highestPrice","handleClearAllFilter","categoryList","ratingList","brandList","nextProps","prevState","mapStateToProps","func","isRequired","ecommerce"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACEC,qBADF,EAEEC,YAFF,EAGEC,mBAHF,QAIO,OAJP;AAMA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SACEC,cADF,EAEEC,eAFF,EAGEC,aAHF,EAIEC,YAJF,QAKO,oCALP;AAOA,OAAO,KAAKC,CAAZ,MAAmB,QAAnB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;;IAEMC,I;;;;;;;;;;;;;;;UAEJC,U,GAAa,E;UACbC,M,GAAS,E;UAETC,K,GAAQ;AACNC,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,IAAI,EAAE,MAFA;AAGNC,MAAAA,IAAI,EAAE,CAHA;AAINC,MAAAA,WAAW,EAAE,CAJP;AAKNC,MAAAA,OAAO,EAAE,OALH;AAMNC,MAAAA,aAAa,EAAE,KANT;AAONC,MAAAA,WAAW,EAAE,CAAC,CAAD,EAAI,GAAJ,CAPP;AAQNC,MAAAA,KAAK,EAAE,EARD;AASNC,MAAAA,UAAU,EAAE,KATN;AAUNC,MAAAA,QAAQ,EAAE,KAVJ;AAWNZ,MAAAA,UAAU,EAAE,EAXN;AAYNC,MAAAA,MAAM,EAAE;AAZF,K;;UAeRY,a,GAAgB,YAAM;AACpB,YAAKC,QAAL,CAAc;AAAEX,QAAAA,IAAI,EAAE,CAAC,MAAKD,KAAL,CAAWC;AAApB,OAAd;AACD,K;;UAEDY,kB,GAAqB,UAACC,KAAD,EAAQC,QAAR,EAAqB;AACxC,YAAKH,QAAL,CAAc;AAAEL,QAAAA,WAAW,EAAEQ;AAAf,OAAd;;AACA,YAAKC,yBAAL,CAA+BD,QAAQ,CAAC,CAAD,CAAR,GAAc,EAA7C,EAAiDA,QAAQ,CAAC,CAAD,CAAR,GAAc,EAA/D;AACD,K;;UAEDE,c,GAAiB,UAAAH,KAAK,EAAI;AACxB,YAAKF,QAAL,CAAc;AAAER,QAAAA,WAAW,EAAEU,KAAK,CAACI,MAAN,CAAaC;AAA5B,OAAd;AACD,K;;UAEDC,gB,GAAmB,UAACN,KAAD,EAAQO,OAAR,EAAoB;AACrC,YAAKT,QAAL,CAAc;AAAET,QAAAA,IAAI,EAAEkB;AAAR,OAAd;AACD,K;;UAEDC,U,GAAa,UAAApB,IAAI;AAAA,aAAI,MAAKU,QAAL,CAAc;AAAEV,QAAAA,IAAI,EAAJA;AAAF,OAAd,CAAJ;AAAA,K;;UAEjBqB,Y,GAAe,UAAAT,KAAK,EAAI;AACtB,YAAKF,QAAL,qBAAiBE,KAAK,CAACI,MAAN,CAAaM,IAA9B,EAAqCV,KAAK,CAACI,MAAN,CAAaC,KAAlD;AACD,K;;UAEDM,Y,GAAe,UAAAjB,KAAK,EAAI;AACtB,kCAA2B,MAAKkB,KAAhC,CAAMC,WAAN;AAAA,UAAMA,WAAN,sCAAoB,EAApB;;AAEA,YAAKf,QAAL,CAAc;AAAEJ,QAAAA,KAAK,EAALA;AAAF,OAAd;;AAEA,UAAI,MAAKoB,aAAT,EAAwB;AACtBC,QAAAA,YAAY,CAAC,MAAKD,aAAN,CAAZ;AACD;;AAED,YAAKA,aAAL,GAAqBE,UAAU,CAAC,YAAM;AACpC,cAAKlB,QAAL,CAAc;AACZe,UAAAA,WAAW,EAAEA,WAAW,CAACI,MAAZ,CAAmB,UAAAC,OAAO;AAAA,mBACrCA,OAAO,CAACC,KAAR,CAAcC,WAAd,GAA4BC,KAA5B,CAAkC,MAAKnC,KAAL,CAAWQ,KAAX,CAAiB0B,WAAjB,EAAlC,CADqC;AAAA,WAA1B;AADD,SAAd;AAKD,OAN8B,EAM5B,GAN4B,CAA/B;AAOD,K;;UAEDE,sB,GAAyB,UAAAtB,KAAK,EAAI;AAChC,UAAIuB,UAAU,GAAGvB,KAAK,CAACI,MAAN,CAAaC,KAA9B;AACA,UAAImB,KAAK,GAAGxB,KAAK,CAACI,MAAN,CAAaC,KAAb,CAAmBoB,KAAnB,CAAyB,GAAzB,CAAZ;AACA,mCAA2B,MAAKb,KAAhC,CAAMC,WAAN;AAAA,UAAMA,WAAN,uCAAoB,EAApB;;AAEA,UAAIU,UAAU,KAAK,KAAnB,EAA0B;AACxB,cAAKzB,QAAL,CAAc;AAAEH,UAAAA,UAAU,EAAE4B,UAAd;AAA0BV,UAAAA,WAAW,EAAXA;AAA1B,SAAd;;AACA;AACD;;AAED,YAAKf,QAAL,CAAc;AAAEH,QAAAA,UAAU,EAAE4B;AAAd,OAAd;;AAEAC,MAAAA,KAAK,GAAGA,KAAK,CAACE,GAAN,CAAU,UAAArB,KAAK;AAAA,eAAIsB,QAAQ,CAACtB,KAAD,CAAZ;AAAA,OAAf,CAAR;;AAEA,UAAImB,KAAK,CAACI,MAAN,KAAiB,CAArB,EAAwB;AACtB,cAAK1B,yBAAL,CAA+BsB,KAAK,CAAC,CAAD,CAApC,EAAyCA,KAAK,CAAC,CAAD,CAA9C;AACD,OAFD,MAEO;AACL,cAAK1B,QAAL,CAAc;AACZe,UAAAA,WAAW,EAAEA,WAAW,CAACI,MAAZ,CAAmB,UAAAC,OAAO;AAAA,mBAAIA,OAAO,CAACW,KAAR,IAAiBL,KAAK,CAAC,CAAD,CAA1B;AAAA,WAA1B;AADD,SAAd;AAGD;AACF,K;;UAEDM,oB,GAAuB,UAAA9B,KAAK,EAAI;AAC9B,UAAII,MAAM,GAAGJ,KAAK,CAACI,MAAnB;AACA,UAAMpB,UAAN,GAAqB,MAAKE,KAA1B,CAAMF,UAAN;AACA,UAAI+C,cAAJ;;AACA,UAAI3B,MAAM,CAAC4B,OAAX,EAAoB;AAClBD,QAAAA,cAAc,gCAAO/C,UAAP,IAAmBoB,MAAM,CAACM,IAA1B,EAAd;;AACA,cAAKZ,QAAL,CAAc;AACZd,UAAAA,UAAU,EAAE+C,cADA;AAEZlB,UAAAA,WAAW,EAAE,MAAKoB,uBAAL,CAA6B,UAA7B,EAAyCF,cAAzC;AAFD,SAAd;AAID,OAND,MAMO;AACLA,QAAAA,cAAc,GAAG/C,UAAU,CAACiC,MAAX,CAAkB,UAAAiB,IAAI;AAAA,iBAAIA,IAAI,KAAK9B,MAAM,CAACM,IAApB;AAAA,SAAtB,CAAjB;;AACA,cAAKZ,QAAL,CAAc;AACZd,UAAAA,UAAU,EAAE+C,cADA;AAEZlB,UAAAA,WAAW,EAAE,MAAKoB,uBAAL,CAA6B,UAA7B,EAAyCF,cAAzC;AAFD,SAAd;AAID;AACF,K;;UAEDI,iB,GAAoB,UAAAnC,KAAK,EAAI;AAC3B,UAAII,MAAM,GAAGJ,KAAK,CAACI,MAAnB;AACA,UAAMnB,MAAN,GAAiB,MAAKC,KAAtB,CAAMD,MAAN;AACA,UAAImD,UAAJ;;AACA,UAAIhC,MAAM,CAAC4B,OAAX,EAAoB;AAClBI,QAAAA,UAAU,gCAAOnD,MAAP,IAAemB,MAAM,CAACM,IAAtB,EAAV;;AACA,cAAKZ,QAAL,CAAc;AACZb,UAAAA,MAAM,EAAEmD,UADI;AAEZvB,UAAAA,WAAW,EAAE,MAAKoB,uBAAL,CAA6B,OAA7B,EAAsCG,UAAtC;AAFD,SAAd;AAID,OAND,MAMO;AACLA,QAAAA,UAAU,GAAGnD,MAAM,CAACgC,MAAP,CAAc,UAAAiB,IAAI;AAAA,iBAAIA,IAAI,KAAK9B,MAAM,CAACM,IAApB;AAAA,SAAlB,CAAb;;AACA,cAAKZ,QAAL,CAAc;AACZb,UAAAA,MAAM,EAAEmD,UADI;AAEZvB,UAAAA,WAAW,EAAE,MAAKoB,uBAAL,CAA6B,OAA7B,EAAsCG,UAAtC;AAFD,SAAd;AAID;AACF,K;;UAEDC,iB,GAAoB,UAAAC,IAAI,EAAI;AAC1B,YAAKxC,QAAL,CAAc;AACZe,QAAAA,WAAW,EAAE,MAAKoB,uBAAL,CAA6B,QAA7B,EAAuC,CAACK,IAAD,CAAvC;AADD,OAAd;AAGD,K;;UAEDC,uB,GAA0B,YAAM;AAC9B,UAAIC,cAAc,GAAG,CAAC,MAAKtD,KAAL,CAAWU,QAAjC;;AACA,YAAKE,QAAL,CAAc;AACZF,QAAAA,QAAQ,EAAE4C,cADE;AAEZ3B,QAAAA,WAAW,EAAE,MAAKoB,uBAAL,CAA6B,cAA7B,EAA6C,CACxDO,cADwD,CAA7C;AAFD,OAAd;AAMD,K;;UAEDP,uB,GAA0B,UAACQ,QAAD,EAA0B;AAAA,UAAfpC,KAAe,uEAAP,EAAO;AAClD,mCAA2B,MAAKO,KAAhC,CAAMC,WAAN;AAAA,UAAMA,WAAN,uCAAoB,EAApB;;AACA,UAAIR,KAAK,CAACuB,MAAN,KAAiB,CAArB,EAAwB;AACtB,eAAOf,WAAP;AACD;;AACD,aAAOA,WAAW,CAACI,MAAZ,CAAmB,UAAAC,OAAO;AAAA,eAAIb,KAAK,CAACqC,QAAN,CAAexB,OAAO,CAACuB,QAAD,CAAtB,CAAJ;AAAA,OAA1B,CAAP;AACD,K;;UAEDvC,yB,GAA4B,UAACyC,WAAD,EAAcC,YAAd,EAA+B;AACzD,mCAA2B,MAAKhC,KAAhC,CAAMC,WAAN;AAAA,UAAMA,WAAN,uCAAoB,EAApB;;AACA,YAAKf,QAAL,CAAc;AACZe,QAAAA,WAAW,EAAEA,WAAW,CAACI,MAAZ,CACX,UAAAC,OAAO;AAAA,iBAAIA,OAAO,CAACW,KAAR,IAAiBc,WAAjB,IAAgCzB,OAAO,CAACW,KAAR,IAAiBe,YAArD;AAAA,SADI;AADD,OAAd;AAKD,K;;UAEDC,oB,GAAuB,YAAM;AAC3B,YAAK/C,QAAL,CAAc;AACZL,QAAAA,WAAW,EAAE,CAAC,CAAD,EAAI,GAAJ,CADD;AAEZC,QAAAA,KAAK,EAAE,EAFK;AAGZC,QAAAA,UAAU,EAAE,KAHA;AAIZC,QAAAA,QAAQ,EAAE,KAJE;AAKZZ,QAAAA,UAAU,EAAE,EALA;AAMZC,QAAAA,MAAM,EAAE,EANI;AAOZ4B,QAAAA,WAAW,EAAE,MAAKD,KAAL,CAAWC;AAPZ,OAAd;AASD,K;;;;;;;WAED,6BAAoB;AAClB,WAAKD,KAAL,CAAWpC,cAAX;AACA,WAAKoC,KAAL,CAAWnC,eAAX;AACA,WAAKmC,KAAL,CAAWlC,aAAX;AACA,WAAKkC,KAAL,CAAWjC,YAAX;AACD;;;WAED,gCAAuB;AACrBoC,MAAAA,YAAY,CAAC,KAAKD,aAAN,CAAZ;AACD;;;WAcD,kBAAS;AACP,wBAYI,KAAK5B,KAZT;AAAA,8CACE2B,WADF;AAAA,UACEA,WADF,sCACgB,EADhB;AAAA,UAEE5B,MAFF,eAEEA,MAFF;AAAA,UAGED,UAHF,eAGEA,UAHF;AAAA,UAIES,WAJF,eAIEA,WAJF;AAAA,UAKEL,IALF,eAKEA,IALF;AAAA,UAMEC,IANF,eAMEA,IANF;AAAA,UAOEC,WAPF,eAOEA,WAPF;AAAA,UAQEC,OARF,eAQEA,OARF;AAAA,UASEG,KATF,eASEA,KATF;AAAA,UAUEC,UAVF,eAUEA,UAVF;AAAA,UAWEC,QAXF,eAWEA,QAXF;AAcA,wBAA6D,KAAKgB,KAAlE;AAAA,8CAAMkC,YAAN;AAAA,UAAMA,YAAN,sCAAqB,EAArB;AAAA,8CAAyBC,UAAzB;AAAA,UAAyBA,UAAzB,sCAAsC,EAAtC;AAAA,8CAA0CC,SAA1C;AAAA,UAA0CA,SAA1C,sCAAsD,EAAtD;AAEA,0BACE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,qBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,YAAD;AACE,QAAA,KAAK,EAAC,OADR;AAEE,QAAA,IAAI,EAAE,KAAK9D,KAAL,CAAWC,IAFnB;AAGE,QAAA,aAAa,EAAE,KAAKU,aAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE,oBAAC,WAAD;AACE,QAAA,KAAK,EAAEH,KADT;AAEE,QAAA,UAAU,EAAEV,UAFd;AAGE,QAAA,MAAM,EAAEC,MAHV;AAIE,QAAA,UAAU,EAAEU,UAJd;AAKE,QAAA,YAAY,EAAEmD,YALhB;AAME,QAAA,SAAS,EAAEE,SANb;AAOE,QAAA,UAAU,EAAED,UAPd;AAQE,QAAA,QAAQ,EAAEnD,QARZ;AASE,QAAA,WAAW,EAAEH,WATf;AAUE,QAAA,aAAa,EAAE,KAAKI,aAVtB;AAWE,QAAA,YAAY,EAAE,KAAKc,YAXrB;AAYE,QAAA,sBAAsB,EAAE,KAAKW,sBAZ/B;AAaE,QAAA,kBAAkB,EAAE,KAAKvB,kBAb3B;AAcE,QAAA,oBAAoB,EAAE,KAAK+B,oBAd7B;AAeE,QAAA,iBAAiB,EAAE,KAAKK,iBAf1B;AAgBE,QAAA,iBAAiB,EAAE,KAAKE,iBAhB1B;AAiBE,QAAA,uBAAuB,EAAE,KAAKE,uBAjBhC;AAkBE,QAAA,oBAAoB,EAAE,KAAKM,oBAlB7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADF,eA2BE,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,aAAD;AACE,QAAA,OAAO,EAAEtD,OADX;AAEE,QAAA,IAAI,EAAEH,IAFR;AAGE,QAAA,WAAW,EAAEyB,WAHf;AAIE,QAAA,IAAI,EAAExB,IAJR;AAKE,QAAA,WAAW,EAAEC,WALf;AAME,QAAA,UAAU,EAAE,KAAKkB,UANnB;AAOE,QAAA,aAAa,EAAE,KAAKX,aAPtB;AAQE,QAAA,YAAY,EAAE,KAAKY,YARrB;AASE,QAAA,gBAAgB,EAAE,KAAKH,gBATzB;AAUE,QAAA,cAAc,EAAE,KAAKH,cAVvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CA3BF,CADF,CADF;AA8CD;;;WA3ED,kCAAgC8C,SAAhC,EAA2CC,SAA3C,EAAsD;AACpD,kCAA2BD,SAA3B,CAAMpC,WAAN;AAAA,UAAMA,WAAN,sCAAoB,EAApB;;AACA,UAAIqC,SAAS,CAAC1D,aAAd,EAA6B;AAC3B,eAAO,EAAP;AACD,OAFD,MAEO,IAAI,CAAC0D,SAAS,CAAC1D,aAAX,IAA4BqB,WAAW,CAACe,MAAZ,GAAqB,CAArD,EACL,OAAO;AACLpC,QAAAA,aAAa,EAAE,IADV;AAELqB,QAAAA,WAAW,EAAXA;AAFK,OAAP,CADK,KAKF,OAAO,EAAP;AACN;;;;EA5LgB3C,S;;AAgQnB,IAAMiF,eAAe,GAAG,SAAlBA,eAAkB,CAAAjE,KAAK;AAAA,SAAK;AAChCV,IAAAA,cAAc,EAAED,SAAS,CAAC6E,IAAV,CAAeC,UADC;AAEhC3E,IAAAA,aAAa,EAAEH,SAAS,CAAC6E,IAAV,CAAeC,UAFE;AAGhC1E,IAAAA,YAAY,EAAEJ,SAAS,CAAC6E,IAAV,CAAeC,UAHG;AAIhCxC,IAAAA,WAAW,EAAE3B,KAAK,CAACoE,SAAN,CAAgBzC,WAJG;AAKhCiC,IAAAA,YAAY,EAAE5D,KAAK,CAACoE,SAAN,CAAgBR,YALE;AAMhCC,IAAAA,UAAU,EAAE7D,KAAK,CAACoE,SAAN,CAAgBP,UANI;AAOhCC,IAAAA,SAAS,EAAE9D,KAAK,CAACoE,SAAN,CAAgBN;AAPK,GAAL;AAAA,CAA7B;;AAUA,eAAe1E,OAAO,CACpB6E,eADoB,EAEpB;AAAE3E,EAAAA,cAAc,EAAdA,cAAF;AAAkBC,EAAAA,eAAe,EAAfA,eAAlB;AAAmCC,EAAAA,aAAa,EAAbA,aAAnC;AAAkDC,EAAAA,YAAY,EAAZA;AAAlD,CAFoB,CAAP,CAGbI,IAHa,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  EgretSidenavContainer,\n  EgretSidenav,\n  EgretSidenavContent\n} from \"egret\";\n\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {\n  getProductList,\n  getCategoryList,\n  getRatingList,\n  getBrandList\n} from \"app/redux/actions/EcommerceActions\";\n\nimport * as _ from \"lodash\";\nimport ShopSidenav from \"./ShopSidenav\";\nimport ShopContainer from \"./ShopContainer\";\n\nclass Shop extends Component {\n  debounceTimer;\n  categories = [];\n  brands = [];\n\n  state = {\n    open: true,\n    view: \"grid\",\n    page: 0,\n    rowsPerPage: 6,\n    orderBy: \"false\",\n    propsReceived: false,\n    sliderRange: [0, 100],\n    query: \"\",\n    multilevel: \"all\",\n    shipping: false,\n    categories: [],\n    brands: []\n  };\n\n  toggleSidenav = () => {\n    this.setState({ open: !this.state.open });\n  };\n\n  handleSliderChange = (event, newValue) => {\n    this.setState({ sliderRange: newValue });\n    this.filterProductOnPriceRange(newValue[0] * 10, newValue[1] * 10);\n  };\n\n  setRowsPerPage = event => {\n    this.setState({ rowsPerPage: event.target.value });\n  };\n\n  handleChangePage = (event, newPage) => {\n    this.setState({ page: newPage });\n  };\n\n  toggleView = view => this.setState({ view });\n\n  handleChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  handleSearch = query => {\n    let { productList = [] } = this.props;\n\n    this.setState({ query });\n\n    if (this.debounceTimer) {\n      clearTimeout(this.debounceTimer);\n    }\n\n    this.debounceTimer = setTimeout(() => {\n      this.setState({\n        productList: productList.filter(product =>\n          product.title.toLowerCase().match(this.state.query.toLowerCase())\n        )\n      });\n    }, 250);\n  };\n\n  handleMultilevelChange = event => {\n    let eventValue = event.target.value;\n    let range = event.target.value.split(\",\");\n    let { productList = [] } = this.props;\n\n    if (eventValue === \"all\") {\n      this.setState({ multilevel: eventValue, productList });\n      return;\n    }\n\n    this.setState({ multilevel: eventValue });\n\n    range = range.map(value => parseInt(value));\n\n    if (range.length === 2) {\n      this.filterProductOnPriceRange(range[0], range[1]);\n    } else {\n      this.setState({\n        productList: productList.filter(product => product.price >= range[0])\n      });\n    }\n  };\n\n  handleCategoryChange = event => {\n    let target = event.target;\n    let { categories } = this.state;\n    let tempCategories;\n    if (target.checked) {\n      tempCategories = [...categories, target.name];\n      this.setState({\n        categories: tempCategories,\n        productList: this.filterProductOnProperty(\"category\", tempCategories)\n      });\n    } else {\n      tempCategories = categories.filter(item => item !== target.name);\n      this.setState({\n        categories: tempCategories,\n        productList: this.filterProductOnProperty(\"category\", tempCategories)\n      });\n    }\n  };\n\n  handleBrandChange = event => {\n    let target = event.target;\n    let { brands } = this.state;\n    let tempBrands;\n    if (target.checked) {\n      tempBrands = [...brands, target.name];\n      this.setState({\n        brands: tempBrands,\n        productList: this.filterProductOnProperty(\"brand\", tempBrands)\n      });\n    } else {\n      tempBrands = brands.filter(item => item !== target.name);\n      this.setState({\n        brands: tempBrands,\n        productList: this.filterProductOnProperty(\"brand\", tempBrands)\n      });\n    }\n  };\n\n  handleRatingClick = rate => {\n    this.setState({\n      productList: this.filterProductOnProperty(\"rating\", [rate])\n    });\n  };\n\n  handleFreeShippingClick = () => {\n    let shippingStatus = !this.state.shipping;\n    this.setState({\n      shipping: shippingStatus,\n      productList: this.filterProductOnProperty(\"freeShipping\", [\n        shippingStatus\n      ])\n    });\n  };\n\n  filterProductOnProperty = (property, value = []) => {\n    let { productList = [] } = this.props;\n    if (value.length === 0) {\n      return productList;\n    }\n    return productList.filter(product => value.includes(product[property]));\n  };\n\n  filterProductOnPriceRange = (lowestPrice, highestPrice) => {\n    let { productList = [] } = this.props;\n    this.setState({\n      productList: productList.filter(\n        product => product.price >= lowestPrice && product.price <= highestPrice\n      )\n    });\n  };\n\n  handleClearAllFilter = () => {\n    this.setState({\n      sliderRange: [0, 100],\n      query: \"\",\n      multilevel: \"all\",\n      shipping: false,\n      categories: [],\n      brands: [],\n      productList: this.props.productList\n    });\n  };\n\n  componentDidMount() {\n    this.props.getProductList();\n    this.props.getCategoryList();\n    this.props.getRatingList();\n    this.props.getBrandList();\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.debounceTimer);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let { productList = [] } = nextProps;\n    if (prevState.propsReceived) {\n      return {};\n    } else if (!prevState.propsReceived && productList.length > 0)\n      return {\n        propsReceived: true,\n        productList\n      };\n    else return {};\n  }\n\n  render() {\n    let {\n      productList = [],\n      brands,\n      categories,\n      sliderRange,\n      view,\n      page,\n      rowsPerPage,\n      orderBy,\n      query,\n      multilevel,\n      shipping\n    } = this.state;\n\n    let { categoryList = [], ratingList = [], brandList = [] } = this.props;\n\n    return (\n      <div className=\"shop m-sm-30\">\n        <EgretSidenavContainer>\n          <EgretSidenav\n            width=\"288px\"\n            open={this.state.open}\n            toggleSidenav={this.toggleSidenav}\n          >\n            <ShopSidenav\n              query={query}\n              categories={categories}\n              brands={brands}\n              multilevel={multilevel}\n              categoryList={categoryList}\n              brandList={brandList}\n              ratingList={ratingList}\n              shipping={shipping}\n              sliderRange={sliderRange}\n              toggleSidenav={this.toggleSidenav}\n              handleSearch={this.handleSearch}\n              handleMultilevelChange={this.handleMultilevelChange}\n              handleSliderChange={this.handleSliderChange}\n              handleCategoryChange={this.handleCategoryChange}\n              handleBrandChange={this.handleBrandChange}\n              handleRatingClick={this.handleRatingClick}\n              handleFreeShippingClick={this.handleFreeShippingClick}\n              handleClearAllFilter={this.handleClearAllFilter}\n            ></ShopSidenav>\n          </EgretSidenav>\n          <EgretSidenavContent>\n            <ShopContainer\n              orderBy={orderBy}\n              view={view}\n              productList={productList}\n              page={page}\n              rowsPerPage={rowsPerPage}\n              toggleView={this.toggleView}\n              toggleSidenav={this.toggleSidenav}\n              handleChange={this.handleChange}\n              handleChangePage={this.handleChangePage}\n              setRowsPerPage={this.setRowsPerPage}\n            ></ShopContainer>\n          </EgretSidenavContent>\n        </EgretSidenavContainer>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  getProductList: PropTypes.func.isRequired,\n  getRatingList: PropTypes.func.isRequired,\n  getBrandList: PropTypes.func.isRequired,\n  productList: state.ecommerce.productList,\n  categoryList: state.ecommerce.categoryList,\n  ratingList: state.ecommerce.ratingList,\n  brandList: state.ecommerce.brandList\n});\n\nexport default connect(\n  mapStateToProps,\n  { getProductList, getCategoryList, getRatingList, getBrandList }\n)(Shop);\n"]},"metadata":{},"sourceType":"module"}